<p-tabView [activeIndex]="activeTabindex" (onChange)="onTabChange($event)">
    <p-tabPanel i18n-header header="Collateral Valuations">
        <div class="row" style="padding:0 15px 0 15px;">
            <!--<h6><strong i18n>Collateral Visitation</strong></h6>-->
            <p-dataTable [responsive]="true" [paginator]="true" [rows]="10" [value]="valuationPrerequisites">
                <p-column i18n-header field="systemArrivalDateTime" header="Arrival Time" sortable="true" [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.systemArrivalDateTime | date: 'medium' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="referenceNumber" header="Reference Number">
                </p-column>
                <p-column i18n-header field="customerName" header="Customer Name">
                </p-column>
                <p-column i18n-header field="customerAccount" header="Customer Account">
                </p-column>
                <p-column i18n-header field="divisionShortCode" header="Unit" [filter]="true" filterMatchMode="contains">
                </p-column>
                <p-column i18n-header field="collateralType" header="Collateral Type">
                </p-column>
                <p-column i18n-header field="facilityAmount" header="Facility Amount" sortable="true" [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{currCode?.countryCode}} {{ d.facilityAmount | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="valuationName" header="Valuation Name">
                </p-column>
                <p-column i18n-header field="valuationReason" header="Valuation Reason">
                </p-column>
                <p-column i18n-header field="approvalStatus" header="Approval Status">
                    <!-- {{ approvalStatus == "REFERRED" ? 'BACK' : '' }} -->
                </p-column>
                <p-column i18n-header [style]="{'width':'150px'}" header="View">
                    <ng-template pTemplate="header"> </ng-template>
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        <div style="text-align:center">
                            <a (click)="viewDetail(d)" href="javascript:void(0)" i18n>Approve</a>
                        </div>
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
    </p-tabPanel>
    <p-tabPanel i18n-header header="Collateral Details">
        <div>
            <div class="panel-body">
                <div *ngIf="mainCollateralDetail != null" class="row" style="padding:0 15px 0 15px;">
                    <h6 *ngIf="collateralProperty"><strong i18n>Collateral Information Registered for: </strong></h6>
                    <table *ngIf="mainCollateralDetail" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Customer Name:</strong>
                                </td>
                                <td colspan="2" style="text-align:left">{{customerName}}</td>
                                <td>
                                    <strong i18n>Customer Code:</strong>
                                </td>
                                <td>{{customerCode}}</td>
                                <td>
                                    <strong i18n>Date Created:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.dateTimeCreated | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Collateral Code:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralCode }}</td>
                                <td>
                                    <strong i18n>Collateral Type:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralTypeName }}</td>
                                <td>
                                    <strong i18n>Collateral Sub Type:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralSubTypeName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Collateral Value:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.collateralValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Currency:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.currency }}</td>
                                <td>
                                    <strong i18n>Haircut:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.haircut }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Valuation Cycle:</strong>
                                </td>
                                <td>{{ mainCollateralDetail.valuationCycle }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td> </td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="row" style="padding:0 15px 0 15px;">
                    <h6 *ngIf="mainCollateralView" i18n>Details:</h6>
                    <table *ngIf="collateralPromissory" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral.promissoryEffectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral.promissoryMaturityDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <!-- <td>
                                              <strong i18n>Promissory Value</strong>
                                          </td>
                                          <td>{{ customerCollateral.promissoryValue | number:'1.2'}}</td> -->
                                <td>
                                    <strong i18n>Promissory Note Number:</strong>
                                </td>
                                <td>{{ customerCollateral.promissoryNoteRefferenceNumber }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralProperty" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.propertyName }}</td>
                                <td>
                                    <strong i18n>Country:</strong>
                                </td>
                                <td>{{ customerCollateral.countryName}}</td>

                                <td>
                                    <strong i18n>Construction Date:</strong>
                                </td>
                                <td>{{ customerCollateral.constructionDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>State:</strong>
                                </td>
                                <td>{{ customerCollateral.stateName }}</td>

                                <td>
                                    <strong i18n>Local Government</strong>
                                </td>
                                <td>{{customerCollateral.localGovtName}}</td>
                                <td>
                                    <strong i18n>City/Location:</strong>
                                </td>
                                <td>{{ customerCollateral.cityName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Property Address</strong>
                                </td>
                                <td>{{customerCollateral.propertyAddress}}</td>
                                <td>
                                    <strong i18n>Date Of Acquisition</strong>
                                </td>
                                <td>{{customerCollateral.dateOfAcquisition | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Last Valuation Date:</strong>
                                </td>
                                <td>{{ customerCollateral.lastValuationDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Valuer</strong>
                                </td>
                                <td>{{customerCollateral.collateralValuer}}</td>
                                <td>
                                    <strong i18n>Valuation Amount</strong>
                                </td>
                                <td>{{customerCollateral.valuationAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Property Base Type:</strong>
                                </td>
                                <td>{{ customerCollateral.propertyBaseType }}</td>
                                <td>
                                    <strong i18n>Open Market Value</strong>
                                </td>
                                <td>{{customerCollateral.openMarketValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Forced Sale Value</strong>
                                </td>
                                <td>{{customerCollateral.forcedSaleValue | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Stamp To Cover:</strong>
                                </td>
                                <td>{{ customerCollateral.stampToCover }}</td>
                                <td>
                                    <strong i18n>Security Value</strong>
                                </td>
                                <td>{{customerCollateral.securityValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Perfection Status</strong>
                                </td>
                                <td>{{customerCollateral.perfectionStatusName}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Reason for Non Perfection:</strong>
                                </td>
                                <td>{{ customerCollateral.perfectionStatusReason }}</td>
                                <td>
                                    <strong i18n>Is Owner Occupied?:</strong>
                                </td>
                                <td>{{ customerCollateral.isOwnerOccupied }}</td>
                                <td>
                                    <strong i18n>Is Property Residential?:</strong>
                                </td>
                                <td>{{ customerCollateral.isResidential }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Is Asset Pledged By a Third Party ?:</strong>
                                </td>
                                <td>{{ customerCollateral.isAssetPledgedByThirdParty ? 'Yes' : 'No' }}</td>
                                <td>
                                    <strong i18n>Third Party Name:</strong>
                                </td>
                                <td>{{ customerCollateral.thirdPartyName }}</td>

                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Is Asset Managed By a Trustee ?:</strong>
                                </td>
                                <td>{{ customerCollateral.isAssetManagedByTrustee ? 'Yes' : 'No' }}</td>
                                <td>
                                    <strong i18n>Trustee Name:</strong>
                                </td>
                                <td>{{ customerCollateral.trusteeName }}</td>
                                <td>
                                    <strong i18n>Bank Share Of Collateral:</strong>
                                </td>
                                <td>{{ customerCollateral.bankShareOfCollateral | number:'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralMarketableSecurity" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral.effectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral.maturityDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Deal Amount:</strong>
                                </td>
                                <td>{{ customerCollateral.dealAmount | number:'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.securityValue | number:'1.2' }}</td>
                                <td>
                                    <strong i18n>Lien Usable Amount</strong>
                                </td>
                                <td>{{customerCollateral.lienUsableAmount | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Issuer Name</strong>
                                </td>
                                <td>{{customerCollateral.issuerName}}</td>
                            </tr>
                            <tr>

                                <td>
                                    <strong i18n>Unit Value:</strong>
                                </td>
                                <td>{{ customerCollateral.unitValue | number:'1.2' }}</td>
                                <td>
                                    <strong i18n>Number Of Units</strong>
                                </td>
                                <td>{{customerCollateral.numberOfUnits}}</td>
                                <td>
                                    <strong i18n>Rating</strong>
                                </td>
                                <td>{{customerCollateral.rating}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Interest Payment Frequency:</strong>
                                </td>
                                <td>{{ customerCollateral.unitValue | date:"dd-MM-yyyy"}}</td>
                                <td>
                                    <strong i18n>Fund/Scheme</strong>
                                </td>
                                <td>{{customerCollateral.fundName}}</td>
                                <td>
                                    <strong i18n>Bank</strong>
                                </td>
                                <td>{{customerCollateral.bank}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralGaurantee" class="table table-casa-information">
                        <tbody>
                            <!-- *ngIf="personal" -->
                            <tr>

                                <td>
                                    <strong i18n>First Name:</strong>
                                </td>
                                <td>{{ customerCollateral.firstName }}</td>
                                <td>
                                    <strong i18n>Middle Name:</strong>
                                </td>
                                <td>{{ customerCollateral.middleName}}</td>
                                <td>
                                    <strong i18n>Last Name:</strong>
                                </td>
                                <td>{{ customerCollateral.lastName }}</td>
                            </tr>
                            <tr>
                                <!-- *ngIf="corporate" -->
                                <td>
                                    <strong i18n>BVN:</strong>
                                </td>
                                <td>{{ customerCollateral.bvn }}</td>
                                <td>
                                    <strong i18n>Name</strong>
                                </td>
                                <td>{{customerCollateral.institutionName}}</td>
                                <td>
                                    <strong i18n>{{rcName}}</strong>
                                </td>
                                <td>{{customerCollateral.rcNumber}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Phone Number 1:</strong>
                                </td>
                                <td>{{ customerCollateral.phoneNumber1 }}</td>
                                <td>
                                    <strong i18n>Phone Number 2</strong>
                                </td>
                                <td>{{customerCollateral.phoneNumber2}}</td>
                                <td>
                                    <strong i18n>Address</strong>
                                </td>
                                <td>{{customerCollateral.guarantorAddress}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Tax Number:</strong>
                                </td>
                                <td>{{ customerCollateral.taxNumber }}</td>
                                <td>
                                    <strong i18n>Relationship</strong>
                                </td>
                                <td>{{customerCollateral.relationship}}</td>
                                <td>
                                    <strong i18n>Relationship Duration</strong>
                                </td>
                                <td>{{customerCollateral.relationshipDuration}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Email Address:</strong>
                                </td>
                                <td>{{ customerCollateral.emailAddress }}</td>
                                <td>
                                    <strong i18n>Security Value</strong>
                                </td>
                                <td>{{customerCollateral.guaranteeValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Start Date</strong>
                                </td>
                                <td>{{customerCollateral.cStartDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>End Date:</strong>
                                </td>
                                <td>{{ customerCollateral.endDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralEquipment" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.description }}</td>
                                <td>
                                    <strong i18n>Machine Number:</strong>
                                </td>
                                <td>{{ customerCollateral.machineNumber}}</td>
                                <td>
                                    <strong i18n>Manufacturer Name:</strong>
                                </td>
                                <td>{{ customerCollateral.manufacturerName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Year Of Manufacture:</strong>
                                </td>
                                <td>{{ customerCollateral.yearOfManufacture }}</td>
                                <td>
                                    <strong i18n>Year Of Purchase</strong>
                                </td>
                                <td>{{customerCollateral.yearOfPurchase}}</td>
                                <td>
                                    <strong i18n>Value Base Type</strong>
                                </td>
                                <td>{{customerCollateral.valueBaseTypeName}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Machine Condition:</strong>
                                </td>
                                <td>{{ customerCollateral.machineCondition }}</td>
                                <td>
                                    <strong i18n>Machine Location</strong>
                                </td>
                                <td>{{customerCollateral.machineryLocation }}</td>
                                <td>
                                    <strong i18n>Replacement Value</strong>
                                </td>
                                <td>{{customerCollateral.replacementValue | number:'1.2'}}</td>
                            </tr>
                            <tr>

                                <td>
                                    <strong i18n>Equipment Size:</strong>
                                </td>
                                <td>{{ customerCollateral.equipmentSize }}</td>
                                <td>
                                    <strong i18n>Intended Use</strong>
                                </td>
                                <td>{{customerCollateral.intendedUse }}</td>
                                <td>
                                    <strong i18n>Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralItemPolicy" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Insurance Type:</strong>
                                </td>
                                <td>{{ customerCollateral.policyinsuranceType }}</td>
                                <td>
                                    <strong i18n>Insurer Address:</strong>
                                </td>
                                <td>{{ customerCollateral.insurerAddress}}</td>
                                <td>
                                    <strong i18n>Policy Start Date:</strong>
                                </td>
                                <td>{{ customerCollateral.policyStartDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Assign Date:</strong>
                                </td>
                                <td>{{ customerCollateral.assignDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Policy Renewal Date</strong>
                                </td>
                                <td>{{customerCollateral.policyRenewalDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Policy Amount</strong>
                                </td>
                                <td>{{customerCollateral.policyAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Premium Amount:</strong>
                                </td>
                                <td>{{ customerCollateral.premiumAmount | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Renewal Frequency</strong>
                                </td>
                                <td>{{customerCollateral.renewalFrequencyTypeName}}</td>
                                <td>
                                    <strong i18n>Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralVehicle" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Vehicle Status:</strong>
                                </td>
                                <td>{{ customerCollateral.vehicleStatus }}</td>
                                <td>
                                    <strong i18n>Vehicle Make:</strong>
                                </td>
                                <td>{{ customerCollateral.vehicleMake}}</td>
                                <td>
                                    <strong i18n>Model Name:</strong>
                                </td>
                                <td>{{ customerCollateral.modelName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Manufactured Date:</strong>
                                </td>
                                <td>{{ customerCollateral.manufacturedDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Registration Number</strong>
                                </td>
                                <td>{{customerCollateral.registrationNumber}}</td>
                                <td>
                                    <strong i18n>Serial Number</strong>
                                </td>
                                <td>{{customerCollateral.serialNumber}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Chasis Number:</strong>
                                </td>
                                <td>{{ customerCollateral.chasisNumber }}</td>
                                <td>
                                    <strong i18n>Engine Number</strong>
                                </td>
                                <td>{{customerCollateral.engineNumber}}</td>
                                <td>
                                    <strong i18n>Name Of Owner:</strong>
                                </td>
                                <td>{{ customerCollateral.nameOfOwner }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Registration Company</strong>
                                </td>
                                <td>{{customerCollateral.registrationCompany}}</td>
                                <td>
                                    <strong i18n>Resale Value</strong>
                                </td>
                                <td>{{customerCollateral.resaleValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Valuation Date:</strong>
                                </td>
                                <td>{{ customerCollateral.valuationDate | date:"dd-MM-yyyy" }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Last Valuation Amount</strong>
                                </td>
                                <td>{{customerCollateral.lastValuationAmount | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Invoice Value</strong>
                                </td>
                                <td>{{customerCollateral.invoiceValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark }}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralPreciousMetal" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Precious Metal Name:</strong>
                                </td>
                                <td>{{ customerCollateral.preciousMetalName }}</td>
                                <td>
                                    <strong i18n>Weight In Grammes:</strong>
                                </td>
                                <td>{{ customerCollateral.weightInGrammes}}</td>
                                <td>
                                    <strong i18n>Valuation Amount:</strong>
                                </td>
                                <td>{{ customerCollateral.metalValuationAmount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Unit Rate:</strong>
                                </td>
                                <td>{{ customerCollateral.metalUnitRate }}</td>
                                <td>
                                    <strong i18n>Precious Metal Form</strong>
                                </td>
                                <td>{{customerCollateral.preciousMetalFrm}}</td>
                                <td>
                                    <strong i18n>Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <table *ngIf="collateralDeposit" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Account Name:</strong>
                                </td>
                                <td>{{ customerCollateral.accountName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Effective Date:</strong>
                                </td>
                                <td>{{ customerCollateral.effectiveDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Maturity Date:</strong>
                                </td>
                                <td>{{ customerCollateral.maturityDate | date:"dd-MM-yyyy" }}</td>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.securityValue | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Current Liened Amount:</strong>
                                </td>
                                <td>{{ customerCollateral.lienAmount | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Available Balance</strong>
                                </td>
                                <td>{{customerCollateral.availableBalance | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Bank</strong>
                                </td>
                                <td>{{customerCollateral.bank}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark }}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <table *ngIf="collateralCasa" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Account Number:</strong>
                                </td>
                                <td>{{ customerCollateral.accountNumber }}</td>
                                <td>
                                    <strong i18n>Account Name:</strong>
                                </td>
                                <td>{{ customerCollateral.accountName}}</td>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.securityValue | number:'1.2'}}</td>

                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Current Liened Amount:</strong>
                                </td>
                                <td>{{ customerCollateral.lienAmount | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Available Balance:</strong>
                                </td>
                                <td>{{ customerCollateral.availableBalance | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralStock" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Share Quantity:</strong>
                                </td>
                                <td>{{ customerCollateral.shareQuantity }}</td>
                                <td>
                                    <strong i18n>Market Price:</strong>
                                </td>
                                <td>{{ customerCollateral.marketPrice}}</td>
                                <td>
                                    <strong i18n>Value:</strong>
                                </td>
                                <td>{{ customerCollateral.amount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.sharesSecurityValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Total Value</strong>
                                </td>
                                <td>{{customerCollateral.shareValueAmountToUse}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralStock" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Share Quantity:</strong>
                                </td>
                                <td>{{ customerCollateral.shareQuantity }}</td>
                                <td>
                                    <strong i18n>Market Price:</strong>
                                </td>
                                <td>{{ customerCollateral.marketPrice}}</td>
                                <td>
                                    <strong i18n>Value:</strong>
                                </td>
                                <td>{{ customerCollateral.amount | number:'1.2'}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.sharesSecurityValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>Total Value</strong>
                                </td>
                                <td>{{customerCollateral.shareValueAmountToUse}}</td>
                                <td>
                                    <strong></strong>
                                </td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="collateralIspo" class="table table-casa-information">
                        <tbody>
                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.description }}</td>
                                <td>
                                    <strong i18n>Account Name To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral.accountNameToDebit }}</td>
                                <td>
                                    <strong i18n>Account Number To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral.accountNumberToDebit }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Bank Name / Payer:</strong>
                                </td>
                                <td>{{ customerCollateral.payer }}</td>
                                <td>
                                    <strong i18n> Regular Payment Amount</strong>
                                </td>
                                <td>{{customerCollateral.regularPaymentAmount | number :'1.2'}}</td>
                                <td>
                                    <strong i18n>Interval</strong>
                                </td>
                                <td>{{customerCollateral.interval}}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="domiciliationSalary" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.description }}</td>
                                <td>
                                    <strong i18n>Employer:</strong>
                                </td>
                                <td>{{ customerCollateral.contractEmployer}}</td>
                                <td>
                                    <strong i18n>Monthly Salary:</strong>
                                </td>
                                <td>{{ customerCollateral.monthlySalary | number :'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Other Annual Allowances:</strong>
                                </td>
                                <td>{{ customerCollateral.annualAllowances | number :'1.2' }}</td>
                                <td>
                                    <strong i18n> Total Annual Emolument</strong>
                                </td>
                                <td>{{customerCollateral.annualEmolument | number :'1.2'}}</td>
                                <td>
                                    <strong i18n>Account Number (Salary Domiciled)</strong>
                                </td>
                                <td>{{customerCollateral.accountNumber }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Annual Salary:</strong>
                                </td>
                                <td>{{ customerCollateral.annualSalary | number :'1.2' }}</td>
                                <td>
                                    <strong i18n> Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="domiciliationContract" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.description }}</td>
                                <td>
                                    <strong i18n>Contract Detail:</strong>
                                </td>
                                <td>{{ customerCollateral.contractDetail}}</td>
                                <td>
                                    <strong i18n>Contract Employer:</strong>
                                </td>
                                <td>{{ customerCollateral.contractEmployer }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Total Contract Value:</strong>
                                </td>
                                <td>{{ customerCollateral.contractValue | number :'1.2' }}</td>
                                <td>
                                    <strong i18n> Outstanding Invoice Amount</strong>
                                </td>
                                <td>{{customerCollateral.outstandingInvoiceAmount | number :'1.2'}}</td>
                                <td>
                                    <strong i18n>Account Name To Debit</strong>
                                </td>
                                <td>{{customerCollateral.accountNameToDebit }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Account Number To Debit:</strong>
                                </td>
                                <td>{{ customerCollateral.accountNumberToDebit }}</td>
                                <td>
                                    <strong i18n> Bank Name / Payer</strong>
                                </td>
                                <td>{{customerCollateral.payer}}</td>
                                <td>
                                    <strong i18n>Regular Payment Amount</strong>
                                </td>
                                <td>{{customerCollateral.regularPaymentAmount | number:'1.2' }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Interval:</strong>
                                </td>
                                <td>{{ customerCollateral.interval }}</td>
                                <td>
                                    <strong i18n> Remark</strong>
                                </td>
                                <td>{{customerCollateral.remark}}</td>
                            </tr>

                        </tbody>
                    </table>

                    <table *ngIf="indemnity" class="table table-casa-information">
                        <tbody>

                            <tr>
                                <td>
                                    <strong i18n>Description:</strong>
                                </td>
                                <td>{{ customerCollateral.description }}</td>
                                <td>
                                    <strong i18n>Security Value:</strong>
                                </td>
                                <td>{{ customerCollateral.securityValue | number:'1.2'}}</td>
                                <td>
                                    <strong i18n>First Name:</strong>
                                </td>
                                <td>{{ customerCollateral.firstName }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Middle Name:</strong>
                                </td>
                                <td>{{ customerCollateral.middleName }}</td>
                                <td>
                                    <strong i18n> Last Name</strong>
                                </td>
                                <td>{{customerCollateral.lastName}}</td>
                                <td>
                                    <strong i18n>BVN</strong>
                                </td>
                                <td>{{customerCollateral.bvn }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Phone Number 1:</strong>
                                </td>
                                <td>{{ customerCollateral.phoneNumber1 }}</td>
                                <td>
                                    <strong i18n>Phone Number 2:</strong>
                                </td>
                                <td>{{ customerCollateral.phoneNumber2 }}</td>
                                <td>
                                    <strong i18n>Address</strong>
                                </td>
                                <td>{{customerCollateral.address }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n>Tax Number:</strong>
                                </td>
                                <td>{{ customerCollateral.taxNumber }}</td>
                                <td>
                                    <strong i18n> Relationship</strong>
                                </td>
                                <td>{{customerCollateral.relationship}}</td>
                                <td>
                                    <strong i18n>Relationship Duration:</strong>
                                </td>
                                <td>{{ customerCollateral.relationshipDuration }}</td>
                            </tr>
                            <tr>
                                <td>
                                    <strong i18n> Email</strong>
                                </td>
                                <td>{{customerCollateral.emailAddress}}</td>
                                <td>
                                    <strong i18n>Start Date:</strong>
                                </td>
                                <td>{{ customerCollateral.cStartDate | date:"dd-MM-yyyy"}}</td>

                                <td>
                                    <strong i18n> End Date</strong>
                                </td>
                                <td>{{customerCollateral.endDate | date:"dd-MM-yyyy"}}</td>
                            </tr>

                            <tr>
                                <td>
                                    <strong i18n>Remark:</strong>
                                </td>
                                <td>{{ customerCollateral.remark }}</td>
                                <td>
                                    <strong i18n> End Date</strong>
                                </td>
                                <td>{{customerCollateral.endDate | date:"dd-MM-yyyy"}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="panel-footer">
                        <div class="row">
                            <div class="col-md-12">
                                <button type="button" (click)="whoValualtionDetail=true;activeTabindex=2;" class="btn btn-success pull-right" i18n>
                                    View Valuation Prerequisite</button>
                                <button type="button" (click)="activeTabindex=0;" style="margin-right:5px" class="btn btn-danger pull-right" i18n>Back</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div>

                </div>
            </div>
        </div>
    </p-tabPanel>

    <p-tabPanel i18n-header header="Valuation Prerequisite">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Valuation Prerequisite
            </h2>
        </div>
        <div class="panel-body">
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable [responsive]="true" [value]="valuationPrerequisite">
                    <p-column i18n-header *ngIf="isAllowed" field="customerAccount" header="Customer Account Number">
                    </p-column>
                    <p-column i18n-header *ngIf="isAllowed" field="valuerAccount" header="Valuer Account Number">
                    </p-column>
                    <p-column i18n-header *ngIf="isAllowed" field="valuationFee" header="Valuation Fee">
                    </p-column>
                    <p-column i18n-header *ngIf="isAllowed" field="narration" header="Narration">
                    </p-column>
                    <p-column i18n-header field="collateralCode" header="Collateral Code">
                    </p-column>
                    <p-column i18n-header field="valuationRequestType" header="Valuation Prerequisite Type">
                    </p-column>
                    <p-column i18n-header field="valuationComment" header="Valuation Comment">
                    </p-column>
                    <p-column i18n-header field="approvalStatus" header="Approval Status">
                    </p-column>
                    <p-column i18n-header [style]="{'width':'150px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template *ngIf="isReferred" let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="populateValuationPrerequisiteForm(d)" href="javascript:void(0)" i18n>Edit</a>
                            </div>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>

        <!-- ================================================================================= -->

        <div style="margin-bottom:0" class="panel panel-default" *ngIf="displayNarration">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>
                    Narration
                </h2>
            </div>
            <div class="panel-body" style="min-height:120px;">
                <form novalidate [formGroup]="narrationForm" autocomplete="off">

                    <div class="form-group">
                        <div class="form-group">
                            <label for="narration" class="control-label col-md-12" i18n>Narration</label>
                            <div class="col-md-12">
                                <textarea type="text" name="narration" maxlength="200" formControlName="narration" [ngClass]="narrationForm.controls['narration'].valid ? 'valid-input' : 'required-input'" id="narration" class="form-control"></textarea>

                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="addCollateralNarration(narrationForm)" [disabled]="narrationForm.invalid" class="btn btn-success pull-right" i18n>Save and  Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- =================================================================================== -->

        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Document Uploads
            </h2>
        </div>
        <div class="panel-body">
            <div class="panel panel-default">
                <form novalidate [formGroup]="documentUploadForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group">
                                <label for="fileName" class="control-label col-md-3" i18n>Document Category</label>
                                <label for="fileName" class="control-label col-md-3" i18n>Document Type</label>
                                <label for="fileData" class="control-label col-md-6" i18n>Select Document</label>
                                <div class="col-md-3">
                                    <select (change)="getDocumentTypesByCategory($event.target.value)" name="documentCategoryId" id="documentCategoryId" formControlName="documentCategoryId" class="form-control" [ngClass]="!documentUploadForm.controls['documentCategoryId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Document Category --</option>
                                        <option *ngFor=" let x of documentCategories" [value]="x.documentCategoryId">
                                            {{x.documentCategoryName }}</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <select name="documentTypeId" formControlName="documentTypeId" [ngClass]="!documentUploadForm.controls['documentTypeId'].valid ? 'required-input' : 'valid-input'" id="documentTypeId" class="form-control">
                                        <option value="" i18n>Select Document Type</option>
                                        <option *ngFor="let x of documentTypes" value="{{x.documentTypeId}}">
                                            {{x.documentTypeName}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <input type="file" (change)="onFileChange($event)" formControlName="fileData" [ngClass]="!documentUploadForm.controls['fileData'].valid ? 'required-input' : 'valid-input'" i18n-placeholder placeholder="Upload file" accept=".pdf,.doc,.docx,.jpg,.jpeg,.xls,.xlsx,.png" #fileInput
                                        name="fileInput" style="padding-top:2px;" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <div class="panel-footer">
                    <div class="row">
                        <div class="col-md-12">
                            <button type="button" (click)="saveDocumentUpload(documentUploadForm)" [disabled]="documentUploadForm.invalid" class="btn btn-success pull-right"><span
                                    class="glyphicon glyphicon-upload"></span><ng-container i18n>Upload</ng-container>
                                    </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable #dt [value]="documentUploads" [responsive]="true" [paginator]="true" [rows]="5">
                    <p-header>
                        <div class="ui-helper-clearfix">
                            <button type="button" pButton icon="fa-file-o" iconPos="left" label="Export to CSV" (click)="dt.exportCSV()" style="float:left" i18n>Export to CSV</button>
                        </div>
                    </p-header>
                    <p-column i18n-header header="DateTime Uploaded">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.dateTimeCreated | date : 'MMM d, y, h:mm a' }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="uploadedBy" header="Uploaded By" sortable="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header header="File Name">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <span *ngIf="d.fileExtension == 'doc'" class="icon-file-word"></span>
                            <span *ngIf="d.fileExtension == 'docx'" class="icon-file-word"></span>
                            <span *ngIf="d.fileExtension == 'pdf'" class="icon-file-pdf"></span>
                            <span *ngIf="d.fileExtension == 'jpg'" class="icon-file-picture"></span>
                            <span *ngIf="d.fileExtension == 'jpeg'" class="icon-file-picture"></span>
                            <span *ngIf="d.fileExtension == 'png'" class="icon-file-picture"></span>
                            <span *ngIf="d.fileExtension == 'txt'" class="icon-file-text"></span>
                            <span *ngIf="d.fileExtension == 'xls'" class="icon-file-excel"></span>
                            <span *ngIf="d.fileExtension == 'xlsx'" class="icon-file-excel"></span> {{d.fileName}}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="fileSizeString" header="File Size" sortable="true" filterMatchMode="contains" [style]="{'width':'100px'}"></p-column>
                    <p-column i18n-header field="documentTypeName" header="Document Type" sortable="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header field="documentCategoryName" header="Document Category" sortable="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header [style]="{'width':'150px'}">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <span *ngIf="d.owner"><a (click)="deleteDocumentUpload(d)"
                                        href="javascript:void(0)" i18n>Delete</a>
                                    <span style="padding:3px;"
                                        *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1">
                                        | </span>
                                </span>
                                <a *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1" (click)="downloadDocument(d,true)" href="javascript:void(0)" i18n>View</a>
                                <span style="padding:3px;" *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1">
                                    |
                                </span>
                                <a *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1 && d.documentTypeName !='CREDIT BUREAU'" (click)="downloadDocument(d)" href="javascript:void(0)" i18n>Download</a>
                            </div>
                        </ng-template>
                    </p-column>


                </p-dataTable>
            </div>

            <div class="panel panel-default">
                <div class="panel-body">

                    <p-dataTable #dt [value]="documentDeleted" [responsive]="true" [paginator]="true" [rows]="5">
                        <p-header>
                            <div class="ui-helper-clearfix">
                                <button type="button" pButton icon="fa-file-o" iconPos="left" label="Export to CSV" (click)="dt.exportCSV()" style="float:left"></button>
                            </div>
                        </p-header>
                        <p-column i18n-header header="Date / Time Deleted">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                {{ d.dateTimeDeleted | date : 'MMM d, y, h:mm a' }}
                            </ng-template>
                        </p-column>
                        <p-column i18n-header field="uploadedBy" header="Deleted By" sortable="true" filterMatchMode="contains">
                        </p-column>
                        <p-column i18n-header header="File Name">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                <span *ngIf="d.fileExtension == 'doc'" class="icon-file-word"></span>
                                <span *ngIf="d.fileExtension == 'docx'" class="icon-file-word"></span>
                                <span *ngIf="d.fileExtension == 'pdf'" class="icon-file-pdf"></span>
                                <span *ngIf="d.fileExtension == 'jpg'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'jpeg'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'png'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'txt'" class="icon-file-text"></span>
                                <span *ngIf="d.fileExtension == 'xls'" class="icon-file-excel"></span>
                                <span *ngIf="d.fileExtension == 'xlsx'" class="icon-file-excel"></span> {{d.fileName}}
                            </ng-template>
                        </p-column>

                        <p-column i18n-header field="fileSizeString" header="File Size" sortable="true" filterMatchMode="contains" [style]="{'width':'100px'}"></p-column>
                        <p-column i18n-header field="documentTypeName" header="Document Type" sortable="true" filterMatchMode="contains">
                        </p-column>
                        <p-column i18n-header field="documentCategoryName" header="Document Category" sortable="true" filterMatchMode="contains"></p-column>

                    </p-dataTable>

                </div>
            </div>
        </div>

        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Valuer Information
            </h2>
        </div>
        <div class="panel-body">
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable [responsive]="true" [value]="valuerInfors">
                    <p-column i18n-header field="valuer" header="Valuer">
                    </p-column>
                    <p-column i18n-header field="accountNumber" header="Account Number">
                    </p-column>
                    <p-column i18n-header field="valuationComment" header="Valuer Comment">
                    </p-column>
                    <p-column i18n-header field="valuationFee" header="Valuation Fee">
                    </p-column>
                    <p-column i18n-header field="wht" header="WHT (%)">
                    </p-column>
                    <p-column i18n-header field="whtAmount" header="WHT Amount" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.whtAmount | number : '1.2' }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="omv" header="OMV" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.omv | number : '1.2' }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="fsv" header="FSV" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.fsv | number : '1.2' }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header *ngIf="valuationOfficer" [style]="{'width':'120px'}" header="View">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                                <a (click)="removeValuer(d)" href="javascript:void(0)" i18n>Remove</a>
                                <span style="padding-right:4px;">|</span>
                                <a (click)="editValuer(d)" href="javascript:void(0)" i18n>Edit</a>
                            </div>
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>

        <div class="panel-body" *ngIf="valuationOfficer && showAddValuerButton && valuerInfors.length == 0">
            <button type="button" (click)="showValurerInfo=true" class="btn btn-success pull-right" i18n>Add Valuer</button>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h6>
                    <strong i18n>Approval Comments</strong>
                </h6>
            </div>

            <div class="panel-body">
                <p-dataTable [value]="approvalWorkflowData" [paginator]="true" [rows]="5" [responsive]="true">
                    <p-column i18n-header field="requestStaffName" header="Intiated By"></p-column>
                    <p-column i18n-header field="requestApprovalLevel" header="Initiator Approval Level"></p-column>
                    <!-- <p-column i18n-header field="responseStaffName" header="Directed To"></p-column> -->
                    <p-column i18n-header field="responseApprovalLevel" header="Response Approval Level"></p-column>
                    <p-column i18n-header field="approvalStatus" header="Approval Status"></p-column>
                    <p-column i18n-header field="comment" header="Comment"></p-column>
                    <p-column i18n-header field="systemArrivalDate" header="Date of Arrival">
                        <ng-template let-col let-apr="rowData" pTemplate="body">
                            {{apr[col.field] | date: 'medium'}}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="systemResponseDate" header="Date of Response">
                        <ng-template let-col let-apr="rowData" pTemplate="body">
                            {{apr[col.field] | date: 'medium' }}
                        </ng-template>
                    </p-column>
                </p-dataTable>
            </div>
        </div>

        <!-- <div class="panel-body" *ngIf="hideApproval == true"> -->
        <div class="panel-body">
            <div class="well">
                <hr />
                <div class="row">
                    <div class="col-md-8">
                        <textarea class="form-control" i18n-placeholder placeholder="Comment" [(ngModel)]="comment" [ngClass]="comment == null || comment == '' ? 'required-input' : 'valid-input'"></textarea>
                    </div>
                    <div class="col-md-4">
                        <select class="form-control" [(ngModel)]="approvalStatusId" name="approvalStatus" [ngClass]="approvalStatusId != 2 && approvalStatusId != 3 ? 'required-input' : 'valid-input'">
                            <option value="0" [selected]="isSelected" i18n>--- Select Approval ---</option>
                            <option value="2" i18n> Approve </option>
                            <option value="3" i18n> Decline </option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="btn-group">
                            <!-- *ngIf="loanSelection?.atInitiator == true" -->
                            <button type="button" class="btn btn-danger" (click)="showCommentForm()" style="margin-right:5px">
                                <i class="glyphicon glyphicon-chevron-left"></i> <ng-container i18n> Refer Back</ng-container></button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="btn-group pull-right">
                            <button type="button" (click)="activeTabindex=0;" style="margin-right:5px" class="btn btn-danger" style="margin-right:5px" i18n>Back to list</button>
                            <button type="button" (click)="submitForApproval()" [disabled]="(comment == null || comment =='' || (approvalStatusId != 2 && approvalStatusId != 3))" class="btn btn-success" i18n>
                                Submit for Approval</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </p-tabPanel>

    <p-tabPanel i18n-header *ngIf="!userIsRelationshipManager" header="Valuers List">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                List Of Valuers
            </h2>
        </div>
        <div class="panel-body">
            <div class="row" style="padding:0 15px 0 15px;">
                <p-dataTable [responsive]="true" [value]="valuers" [paginator]="true" [rows]="10">
                    <p-column i18n-header field="name" header="Valuer" [filter]="true" filterMatchMode="contains"></p-column>
                    <p-column i18n-header field="accountNumber" header="Account Number" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header field="emailAddress" header="Email Address" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header field="phoneNumber" header="Phone Number" [filter]="true" filterMatchMode="contains">
                    </p-column>
                    <p-column i18n-header field="address" header="Address" [filter]="true" filterMatchMode="contains"></p-column>
                </p-dataTable>
            </div>
        </div>
    </p-tabPanel>
</p-tabView>


<!--------------------------------------------- Modal -------------------------------------------->

<p-dialog [responsive]=true [(visible)]="displayCommentForm" id="reccol-modal" modal="modal" showEffect="fade" width="450">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>Refer back</h2>
        </div>

        <app-refer-back *ngIf="targetId>0" [referBackOperationId]="operationId" [referBackTargetId]="targetId" [currentLevelId]="currentLevelId" (notify)="displayStatus($event)" (notifyAfterReferBack)="afterReferBackSuccess()">
        </app-refer-back>

        <!-- <form novalidate [formGroup]="commentForm">
      <div class="panel-body">
        <div class="form-horizontal">
          <div class="form-group">
            <label class="control-label col-md-6">Approval Level</label>
            <div class="col-md-12">
              <select name="approvalLevelId" formControlName="approvalLevelId" id="approvalLevelId" class="form-control"
                [ngClass]="commentForm.controls['approvalLevelId'].valid ? 'valid-input' : 'required-input'">
                <option value="">-- Select Approval Level --</option>
                <option *ngFor="let x of trailApprovalLevels" [value]="x.fromApprovalLevelId">
                  {{ x.fromApprovalLevelName }}
                </option>
              </select>
            </div>
          </div>
          <div class="form-group">
            <div class="col-md-12">
              <label>Comment</label>
            </div>
            <div class="col-md-12">
              <textarea name="comment" formControlName="comment" id="comment" class="form-control"
                [ngClass]="!commentForm.controls['comment'].valid ? 'required-input' : 'valid-input'"></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="panel-footer">
        <div class="row">
          <div class="col-md-12">
            <button type="button" (click)="returnBack(commentForm)" [disabled]="commentForm.invalid"
              class="btn btn-success pull-right">Submit</button>
            <button type="button" (click)="displayCommentForm=false; showApprovalButton=true;" style="margin-right:5px"
              class="btn btn-danger pull-right">Cancel</button>
          </div>
        </div>
      </div>
    </form> -->
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showValurerInfo" modal="modal" showEffect="fade" width="500">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Valuer Information
            </h2>
        </div>
        <div class="panel-body" style="min-height:120px;">
            <form novalidate [formGroup]="valuerInfoForm" autocomplete="off">

                <div class="form-group">
                    <div class="form-group">
                        <label for="valuerId" class="control-label col-md-12" i18n>Valuer</label>
                        <div class="col-md-12">
                            <select ngModel name="valuerId" id="valuerId" (change)="onValuerTypeChange($event.target.value)" formControlName="valuerId" class="form-control" [ngClass]="!valuerInfoForm.controls['valuerId'].valid ? 'required-input' : 'valid-input'">
                                <option value="" i18n>--- Select Valuer ---</option>
                                <option *ngFor="let x of valuers" [value]="x.collateralValuerId">{{ x.name }}
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="accountNumber" class="control-label col-md-12" i18n>Account Number</label>
                        <div class="col-md-12">
                            <input type="number" id="accountNumber" class="form-control" formControlName="accountNumber" [ngClass]="valuerInfoForm.controls['accountNumber'].valid ? 'valid-input' : 'required-input'" readonly>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationFee" class="control-label col-md-12" i18n>Valuation Fee</label>
                        <div class="col-md-12">
                            <input type="number" id="valuationFee" class="form-control" formControlName="valuationFee">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="wht" class="control-label" i18n>WHT (%)</label>
                            <input type="number" id="wht" class="form-control" formControlName="wht" (keyup)="calculateWithHoldingTax($event)">
                        </div>
                        <div class="col-md-8">
                            <label for="whtAmount" class="control-label" i18n>Amount</label>
                            <input type="number" id="whtAmount" class="form-control" formControlName="whtAmount" [ngClass]="valuerInfoForm.controls['whtAmount'].valid ? 'valid-input' : 'required-input'">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-group">
                        <div class="col-md-4">
                            <label for="omv" class="control-label" i18n>OMV</label>
                            <input type="text" formatM id="omv" class="form-control" formControlName="omv">
                        </div>
                        <div class="col-md-4">
                            <label for="fsv" class="control-label" i18n>FSV</label>
                            <input type="text" formatM id="fsv" class="form-control" formControlName="fsv">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-group">
                        <label for="valuerComment" class="control-label col-md-12" i18n>Comment</label>
                        <div class="col-md-12">
                            <textarea type="text" name="valuerComment" maxlength="200" formControlName="valuerComment" [ngClass]="valuerInfoForm.controls['valuerComment'].valid ? 'valid-input' : 'required-input'" id="valuerComment" class="form-control"></textarea>

                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="addCollateralValuerInfomation(valuerInfoForm)" [disabled]="valuerInfoForm.invalid" class="btn btn-success pull-right" i18n>Save and  Close</button>
                    <button type="button" (click)="showValurerInfo=false" style="margin-right:5px" class="btn btn-danger pull-right" i18n>Cancel</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showValuereDocumentUpload" modal="modal" showEffect="fade" width="800">
    <div class="panel-body">
        <document-upload [reload]="reload" [operationId]="valuerOperationId" [customerId]="customerId" [targetId]="valuerId" [deleteLink]="true" [showUploadForm]="true" [targetReferenceNumber]="00">
        </document-upload>
    </div>

    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button type="button" (click)="showValuereDocumentUpload=false;" class="btn btn-success pull-right" i18n>
                    Close</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showValuationPrerequisite" modal="modal" showEffect="fade" width="500">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Edit Valuation Prerequisite
            </h2>
        </div>
        <div class="panel-body" style="min-height:120px;">
            <form novalidate [formGroup]="valuationPrerequisiteForm" autocomplete="off">
                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationReportId" class="control-label col-md-12" i18n>Document Type</label>
                        <div class="col-md-12">
                            <select ngModel name="valuationRequestTypeId" id="valuationRequestTypeId" formControlName="valuationRequestTypeId" class="form-control" [ngClass]="!valuationPrerequisiteForm.controls['valuationRequestTypeId'].valid ? 'required-input' : 'valid-input'">
                                <option value="" i18n>-- Select Document Type --</option>
                                <option *ngFor="let x of valuationReportTypes" [value]="x.valuationRequestTypeId">
                                    {{ x.valuationRequestType }}</option>
                                <!-- <option *ngFor="let x of collateralTypes" [value]="x.collateralTypeId"><strong>{{ x.collateralSubTypeName }}</strong> - {{ x.collateralTypeName }}</option> -->
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="valuationComment" class="control-label col-md-12" i18n>Comment</label>
                        <div class="col-md-12">
                            <textarea type="text" name="valuationComment" maxlength="50" formControlName="valuationComment" [ngClass]="valuationPrerequisiteForm.controls['valuationComment'].valid ? 'valid-input' : 'required-input'" id="valuationComment" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-group">
                        <label for="approvalComment" class="control-label col-md-12" i18n>Approval Comment</label>
                        <div class="col-md-12">
                            <textarea type="text" name="approvalComment" readonly="true" maxlength="50" formControlName="approvalComment" id="approvalComment" class="form-control"></textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="editValuationPrerequisite(valuationPrerequisiteForm)" [disabled]="valuationPrerequisiteForm.invalid" class="btn btn-success pull-right" i18n>Save and  Close</button>
                    <button type="button" (click)="showValuationPrerequisite=false" style="margin-right:5px" class="btn btn-danger pull-right" i18n>Cancel</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayDocument" modal="modal" [contentStyle]="{'overflow-y': 'auto', 'overflow-x': 'hidden', 
'max-height': '80vh','min-height':'500px','z-index': 1500}" width="1000" [style]="{'z-index': 1500}">
    <div style="margin-bottom:0" class="panel panel-default">

        <div class="panel-heading">
            <h2 class="panel-title">
                <ng-container i18n>Document Title:</ng-container>
                <strong>{{selectedDocument}}</strong>
            </h2>
            <div class="pull-right">
                <a class="close" (click)="displayDocument=false">&times;</a>
            </div>
        </div>

        <div class="panel-body" style="overflow:auto;height:1500;">
            <img *ngIf="binaryFile" style="max-width: 100%; display: block 2px black;" [src]="'data:image/jpg;base64,'+binaryFile" alt="">
        </div>
    </div>
</p-dialog>

<fintrakbanking-message [title]="title" [message]="message" [show]="show" [cssClass]="cssClass" (closeEvent)="hideMessage($event)"></fintrakbanking-message>