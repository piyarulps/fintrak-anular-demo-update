	<div class="panel panel-default">
		<p-tabView [activeIndex]="activeTabindex" (onChange)="onTabChange($event)">
			
			<p-tabPanel i18n-header [selected]="activeTabindex == 0" header="LC Issuances">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-12">
							<h2 class="panel-title pull-left">
								<ng-container i18n>LC Application(s) For</ng-container>
								 {{label}}
							</h2>
							</div>
						</div>
					</div>
				</div>
		
				<div class="panel-body">
			
					<p-dataTable [value]="lcIssuances" [responsive]="true" [paginator]="true" [rows]="10"
						[(selection)]="lcSelection" dataKey="lcIssuanceId"
						(onRowSelect)="onlcIssuanceChange($event)" [rowsPerPageOptions]="[10,20,30]">
			
						<p-column i18n-header [style]="{'width':'4%'}" selectionMode="single"></p-column>
						<!-- for row selection -->
			
						<p-column i18n-header field="dateTimeCreated" header="Date" [filter]="false">
						<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
							{{ d.dateTimeCreated | date: 'dd-MM-yyyy' }}
						</ng-template>
						</p-column>
			
						<p-column i18n-header [style]="{'width':'10%'}" field="lcReferenceNumber"
						header="Reference" [filter]="true" filterMatchMode="contains"></p-column>
			
						<p-column i18n-header [style]="{'width':'10%'}" field="lcIssuanceId"
						header="LC ID" [filter]="true" filterMatchMode="contains"></p-column>

						<p-column i18n-header header="Customer Name/Group" [filter]="true" filterMatchMode="contains"
						[style]="{'width':'22%'}">
						<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
							{{ d.customerName }} {{ d.customerGroupName }}
						</ng-template>
						</p-column>
			
						<p-column i18n-header field="letterOfCreditAmount" header="LC Amount" [filter]="false"
						filterMatchMode="contains" [style]="{'width':'10%','text-align':'right'}">
						<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
							{{getCurrencyCode(d.currencyId)}} {{ d.letterOfCreditAmount | number : '1.2' }}
						</ng-template>
						</p-column>
						
						<p-column i18n-header *ngIf="isForReleaseOfShippingDocuments==true" field="releasedAmount" header="Total Released Amount" [filter]="false"
						filterMatchMode="contains" [style]="{'width':'10%','text-align':'right'}">
							<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
								{{getCurrencyCode(d.currencyId)}} {{ d.releasedAmount | number : '1.2' }}
							</ng-template>
						</p-column>

						<p-column i18n-header *ngIf="isForReleaseOfShippingDocuments==true" field="availableAmountForRelease" header="Available Amount For Release" [filter]="false"
						filterMatchMode="contains" [style]="{'width':'10%','text-align':'right'}">
							<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
								{{getCurrencyCode(d.currencyId)}} {{ d.availableAmountForRelease | number : '1.2' }}
							</ng-template>
						</p-column>

						<p-column i18n-header *ngIf="isForReleaseOfShippingDocuments==true" field="releaseAmount" header="Release Amount" [filter]="false"
						filterMatchMode="contains" [style]="{'width':'10%','text-align':'right'}">
							<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
								{{getCurrencyCode(d.currencyId)}} {{ d.releaseAmount | number : '1.2' }}
							</ng-template>
						</p-column>

						<p-column i18n-header [style]="{'width':'9%'}">
							<ng-template let-row="rowData" let-i="rowIndex" pTemplate="body">
								<div class="btn-group"
									[innerHtml]="getApprovalStatus(row.approvalStatusId)">
								</div>
							</ng-template>
						</p-column>
						<!-- <p-column i18n-header field="timeLapse" header="Time In" [filter]="false" filterMatchMode="contains" [style]="{'width':'11%'}">
						<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
							{{ d.timeLapse }}
						</ng-template>
						</p-column> -->
						
					</p-dataTable>
				</div>
			
			</p-tabPanel>
	
			<p-tabPanel i18n-header header="LC Issuance details" *ngIf="((isForReleaseOfShippingDocuments!=true || isLCSearch == true) && (customerId>0))" [selected]="activeTabindex == 1">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-12">
								<h2 class="panel-title pull-left">
									<ng-container i18n>Lc Issuance Details</ng-container>
									 <span *ngIf="selectedId>0"><ng-container i18n>for LCID: </ng-container>
									 {{selectedId}}</span>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<app-customer-information-detail [loadWithCustomerId]="customerId"
				(customer)="setCustomerName($event)">
				</app-customer-information-detail>
				<div style="margin-bottom:0" class="panel panel-default" *ngIf="customerId">
		
					<div class="panel-heading">
						<h2 class="panel-title">
							{{ formState }} <ng-container i18n>Lc Issuance </ng-container>
							<span *ngIf="selectedId>0"><ng-container i18n>for LCID:</ng-container>
							 {{selectedId}}</span>
						</h2>
					</div>
								
				<form novalidate [formGroup]="lcIssuanceForm" (ngSubmit)="saveLcIssuance(lcIssuanceForm)" autocomplete="off">
						<div class="panel-body">
							<div class="form-horizontal">
			
								<div class="form-group">
									<label i18n for="beneficiaryName" class="control-label col-md-2">Beneficiary Name</label>
									<div class="col-md-4">
										<input [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  type="text" pInputText name="beneficiaryName" formControlName="beneficiaryName" id="beneficiaryName" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryName'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="beneficiaryPhoneNumber" class="control-label col-md-2">Beneficiary Phone Number</label>
									<div class="col-md-4">
										<input pattern="[0-9]*" type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryPhoneNumber" formControlName="beneficiaryPhoneNumber" id="beneficiaryPhoneNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryPhoneNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="beneficiaryAddress" class="control-label col-md-2">Beneficiary Address</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryAddress" formControlName="beneficiaryAddress" id="beneficiaryAddress" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryAddress'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="beneficiaryEmail" class="control-label col-md-2">Beneficiary Email</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryEmail" formControlName="beneficiaryEmail" id="beneficiaryEmail" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryEmail'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="beneficiaryBank" class="control-label col-md-2">Beneficiary Bank</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryBank" formControlName="beneficiaryBank" id="beneficiaryBank" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryBank'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="customerName" class="control-label col-md-2">Customer</label>
									<div class="col-md-4">
										<input type="text" [readonly]="true" name="customerName" [(ngModel)]="customerName" [ngModelOptions]="{standalone: true}" id="customerName" class="form-control" [ngClass]="customerName ? 'valid-input' : 'required-input'">
									</div>
									
								</div>
			
								<div class="form-group">
									<label i18n for="letterOfCreditTypeId" class="control-label col-md-2">LC Type</label>
									<div class="col-md-4">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="letterOfCreditTypeId" (change)="resetButton($event.target.value)" id="letterOfCreditTypeId" class="form-control" formControlName="letterOfCreditTypeId" [ngClass]="lcIssuanceForm.controls['letterOfCreditTypeId'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select LC Type ---</option>
											<option *ngFor="let item of lcType" [value]="item.id">{{item.name}}</option>
										</select>
									</div>
									<div class="col-md-2">
										<div class="checkbox-container">
											<input [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" formControlName="isDraftRequired" id="isDraftRequired" type="checkbox">
										</div><label i18n class="checkbox">LC Draft Required</label>
									</div>
									<label i18n for="lcReferenceNumber" class="control-label col-md-2">Lc Reference Number</label>
									<div class="col-md-2">
										<input type="text" [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()" name="lcReferenceNumber" formControlName="lcReferenceNumber" id="lcReferenceNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['lcReferenceNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
			
			
								<div class="form-group">
									<label i18n for="letterOfcreditExpirydate" class="control-label col-md-2">LC Expirydate</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancement() ? true : null" id="letterOfcreditExpirydate" formControlName="letterOfcreditExpirydate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['letterOfcreditExpirydate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
									<label i18n for="fundSourceId" class="control-label col-md-2">Fund Source</label>
									<div class="col-md-1">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceId" (change)="resetLCFundSource($event.target.value)" id="fundSourceId" class="form-control" formControlName="fundSourceId" [ngClass]="lcIssuanceForm.controls['fundSourceId'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select LC Fund Source ---</option>
											<option  *ngFor="let item of lcFundSource" [value]="item.id">{{item.name}}</option>
										</select>
									</div>
									<div class="col-md-3" *ngIf="lcFundSourceId() == 1">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceDetails" (change)="setAmounts($event.target.value)" id="fundSourceDetails" class="form-control" formControlName="fundSourceDetails" [ngClass]="lcIssuanceForm.controls['fundSourceDetails'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select Collection Account ---</option>
											<option *ngFor="let item of customerAccount" [value]="item.casaAccountId">{{item.productAccountNumber}}</option>
										</select>
									</div>
									<div class="col-md-3" *ngIf="lcFundSourceId() == 2">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceDetails" (change)="setIFFAmounts($event.target.value)" id="fundSourceDetails" class="form-control" formControlName="fundSourceDetails" [ngClass]="lcIssuanceForm.controls['fundSourceDetails'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select IFF Line ---</option>
											<option *ngFor="let item of lines" [value]="item.loanApplicationId">{{item.applicationReferenceNumber + ' ' + item.customerAvailableAmount}}</option>
										</select>
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="formMNumber" class="control-label col-md-2">FORM M Number</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="formMNumber" formControlName="formMNumber" id="formMNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['formMNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="totalApprovedAmount" class="control-label col-md-2">Total Approved Amount</label>
									<div class="col-md-3">
										<input type="text" [readonly]="true" name="totalApprovedAmount" formControlName="totalApprovedAmount" formatM id="totalApprovedAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['totalApprovedAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-1">
										<input type="text" [attr.disabled]="true" name="totalApprovedAmountCurrencyCode" formControlName="totalApprovedAmountCurrencyCode" formatM id="totalApprovedAmountCurrencyCode" class="form-control">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="letterOfCreditAmount" class="control-label col-md-2">LC Amount</label>
									<div class="col-md-2">
										<input type="text" (keyup)="setExchangeAmt($event)" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrExtension()"  name="letterOfCreditAmount" formControlName="letterOfCreditAmount" formatM id="letterOfCreditAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['letterOfCreditAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="lcAmtExchangeRate" formControlName="lcAmtExchangeRate" formatM id="lcAmtExchangeRate" class="numeric form-control">
									</div>
									<label i18n for="availableAmount" class="control-label col-md-2">Available Amount</label>
									<div class="col-md-3">
										<input type="text" [readonly]="true" name="availableAmount" formControlName="availableAmount" formatM id="availableAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['availableAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-1">
										<input type="text" [readonly]="true" name="availableAmountCurrencyCode" formControlName="availableAmountCurrencyCode" formatM id="availableAmountCurrencyCode" class="form-control">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="lcTolerancePercentage" class="control-label col-md-2">Tolerance Value (%)</label>
									<div class="col-md-4">
										<input type="text" [readonly]="isForUssanceOrSearchOrCancelationOrEnhancementOrExtension() == true" (keyup)="calculateToleranceAmount($event)" pInputText name="lcTolerancePercentage" formControlName="lcTolerancePercentage" formatM id="lcTolerancePercentage" class="form-control" [ngClass]="lcIssuanceForm.controls['lcTolerancePercentage'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="lcToleranceValue" class="control-label col-md-2">Tolerance Value</label>
									<div class="col-md-2">
										<input type="text" [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() == true" pInputText name="lcToleranceValue" formControlName="lcToleranceValue" formatM id="lcToleranceValue" class="form-control" [ngClass]="lcIssuanceForm.controls['lcToleranceValue'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="nairaEquivalent2" formControlName="nairaEquivalent2" formatM id="nairaEquivalent2" class="numeric form-control">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="currencyId" class="control-label col-md-2">Currency</label>
									<div class="col-md-2">
											<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="currencyId" formControlName="currencyId" name="currencyId" 
											(change)="setExchangeRate($event.target.value)"	[ngClass]="lcIssuanceForm.controls['currencyId'].valid ? 'valid-input' : 'required-input'"
											class="form-control">
											<option i18n value=""> Select Currency</option>
											<option *ngFor="let curr of currencies" value="{{curr.currencyId}}"> {{curr.currencyName}}</option>
										</select>
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="nairaEquivalent" formControlName="nairaEquivalent" formatM id="nairaEquivalent" class="numeric form-control">
									</div>
									<label i18n for="proformaInvoiceId" class="control-label col-md-2">Proforma Invoice No.</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="proformaInvoiceId" formControlName="proformaInvoiceId" id="proformaInvoiceId" class="form-control" [ngClass]="lcIssuanceForm.controls['proformaInvoiceId'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="invoiceDate" class="control-label col-md-2">Proforma Invoice Date</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="invoiceDate" formControlName="invoiceDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['invoiceDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
								<!-- </div>
								<div class="form-group"> -->
									<!-- <label i18n for="invoiceDueDate" class="control-label col-md-2">Proforma Invoice Due Date</label> -->
									<label i18n for="invoiceDueDate" class="control-label col-md-2">LC Establishment Date</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="invoiceDueDate" formControlName="invoiceDueDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['invoiceDueDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
								</div>
								<div class="form-group">
									<label i18n for="transactionCycle" class="control-label col-md-2">Transaction Cycle(Days):</label>
									<div class="col-md-4">
										<input type="number" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="transactionCycle" formControlName="transactionCycle" 
										class="numeric form-control" [ngClass]="lcIssuanceForm.controls['transactionCycle'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
								<!-- <div class="form-group">
									<label i18n for="cashBuildUpAvailable" class="control-label col-md-2">Cash BuildUp Available</label>
									<div class="col-md-4">
										<input type="checkbox" name="cashBuildUpAvailable" formControlName="cashBuildUpAvailable" 
										(click)="setCashBuildUpDetails($event)">
									</div>
								</div> 
								<div *ngIf="isCashBuildUpAvailable()">
									<div class="form-group">
										<label i18n for="cashBuildUpReferenceType" class="control-label col-md-2">Cash BuildUp Reference Type</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceType" formControlName="cashBuildUpReferenceType" id="cashBuildUpReferenceType" class="form-control">
										</div>
										<label i18n for="cashBuildUpReferenceNumber" class="control-label col-md-2">Cash BuildUp Reference Number</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceNumber" formControlName="cashBuildUpReferenceNumber" id="cashBuildUpReferenceNumber" class="form-control">
										</div>
									</div>
									<div class="form-group">
										<label i18n for="percentageToCover" class="control-label col-md-2">Percentage To Cover (%)</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="percentageToCover" formControlName="percentageToCover" id="percentageToCover" class="form-control">
										</div>
									</div>
								</div> -->
								
							</div>
						</div>
				</form>

					
					<div class="panel-footer">
						<div class="row">
							<div class="col-md-12">
								<button type="button" *ngIf="((isForReleaseOfShippingDocuments==false) || (isForLCUssance==false) || (isLCSearch==false)) && (isLcCancelation==false)" (click)="saveLcIssuance(lcIssuanceForm)" [disabled]="lcIssuanceForm.invalid" class="btn btn-success pull-right">Save</button>
								<!-- <button type="button" (click)="displayLcIssuanceForm=false" style="margin-right:5px" class="btn btn-danger pull-right">Cancel</button> -->
							</div>
						</div>
					</div>
				
				</div>
			</p-tabPanel>

			<p-tabPanel i18n-header header="Shipping Documents" [selected]="activeTabindex == 1" *ngIf="((isForReleaseOfShippingDocuments==true || isLCSearch == true) && selectedId>0)">
				<div class="form-horizontal">	
					<div class="form-group">
						<label i18n for="releaseAmount" class="control-label col-md-1">Release Amount:</label>
						<div class="col-md-2">
							<!-- <input type="text" (keyup)="setReleaseAmount()" [readonly]="isLCSearch==true" pInputText name="releaseAmount" formControlName="releaseAmount" formatM id="releaseAmount" class="form-control" [ngClass]="releaseAmount > 0 ? 'valid-input' : 'required-input'"> -->
							<input type="text" [readonly]="isLCSearch==true" id="releaseAmount" pInputText [(ngModel)]="releaseAmount" formatM class="numeric form-control" [ngClass]="releaseAmount > 0 ? 'valid-input' : 'required-input'">
						</div>
						<div class="col-md-1">
							<input type="text" [readonly]="true" [(ngModel)]="LCAmountCurrencyCode" formatM class="form-control">
						</div>
						<div class="col-md-1">
							<button [disabled]="!(releaseAmount > 0)" type="button" (click)="saveRelease()"
							class="btn btn-success">Save Release Amount</button>
						</div>
					</div>
				</div>
				<document-upload *ngIf="lcReleaseAmountId>0"
					[reload]="reload"
					[operationId]="138"
					[customerId]="customerId"
					[targetId]="lcReleaseAmountId"
					[targetReferenceNumber]="lcReferenceNumber"
					[showUploadForm]="showButtons"
					(uploadCount)="numberOfShippingDocuments">
				</document-upload>
			</p-tabPanel>

			<p-tabPanel i18n-header header="LC Issuance details" *ngIf="((isForReleaseOfShippingDocuments==true || isLCSearch == true) && (customerId>0))">
				<div class="panel panel-default">
					<div class="panel-heading">
						<div class="row">
							<div class="col-md-12">
								<h2 class="panel-title pull-left">
									<ng-container i18n>Lc Issuance Details </ng-container>
									<span *ngIf="selectedId>0"><ng-container i18n>for LCID:</ng-container>
									{{selectedId}}</span>
								</h2>
							</div>
						</div>
					</div>
				</div>
				<app-customer-information-detail [loadWithCustomerId]="customerId"
				(customer)="setCustomerName($event)">
				</app-customer-information-detail>
				<div style="margin-bottom:0" class="panel panel-default" *ngIf="customerId">
		
					<div class="panel-heading">
						<h2 class="panel-title">
							{{ formState }} <ng-container i18n>Lc Issuance</ng-container>
							 <span *ngIf="selectedId>0"><ng-container i18n>for LCID:</ng-container>
							  {{selectedId}}</span>
						</h2>
					</div>
								
				<form novalidate [formGroup]="lcIssuanceForm" (ngSubmit)="saveLcIssuance(lcIssuanceForm)" autocomplete="off">
						<div class="panel-body">
							<div class="form-horizontal">
			
								<div class="form-group">
									<label i18n for="beneficiaryName" class="control-label col-md-2">Beneficiary Name</label>
									<div class="col-md-4">
										<input [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  type="text" pInputText name="beneficiaryName" formControlName="beneficiaryName" id="beneficiaryName" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryName'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="beneficiaryPhoneNumber" class="control-label col-md-2">Beneficiary Phone Number</label>
									<div class="col-md-4">
										<input pattern="[0-9]*" type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryPhoneNumber" formControlName="beneficiaryPhoneNumber" id="beneficiaryPhoneNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryPhoneNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="beneficiaryAddress" class="control-label col-md-2">Beneficiary Address</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryAddress" formControlName="beneficiaryAddress" id="beneficiaryAddress" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryAddress'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="beneficiaryEmail" class="control-label col-md-2">Beneficiary Email</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryEmail" formControlName="beneficiaryEmail" id="beneficiaryEmail" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryEmail'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="beneficiaryBank" class="control-label col-md-2">Beneficiary Bank</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="beneficiaryBank" formControlName="beneficiaryBank" id="beneficiaryBank" class="form-control" [ngClass]="lcIssuanceForm.controls['beneficiaryBank'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="customerName" class="control-label col-md-2">Customer</label>
									<div class="col-md-4">
										<input type="text" [readonly]="true" name="customerName" [(ngModel)]="customerName" [ngModelOptions]="{standalone: true}" id="customerName" class="form-control" [ngClass]="customerName ? 'valid-input' : 'required-input'">
									</div>
									
								</div>
			
								<div class="form-group">
									<label i18n for="letterOfCreditTypeId" class="control-label col-md-2">LC Type</label>
									<div class="col-md-4">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="letterOfCreditTypeId" (change)="resetButton($event.target.value)" id="letterOfCreditTypeId" class="form-control" formControlName="letterOfCreditTypeId" [ngClass]="lcIssuanceForm.controls['letterOfCreditTypeId'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select LC Type ---</option>
											<option *ngFor="let item of lcType" [value]="item.id">{{item.name}}</option>
										</select>
									</div>
									<div class="col-md-2">
										<div class="checkbox-container">
											<input [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" formControlName="isDraftRequired" id="isDraftRequired" type="checkbox">
										</div><label i18n class="checkbox">LC Draft Required</label>
									</div>
									<label i18n for="lcReferenceNumber" class="control-label col-md-2">Lc Reference Number</label>
									<div class="col-md-2">
										<input type="text" [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()" name="lcReferenceNumber" formControlName="lcReferenceNumber" id="lcReferenceNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['lcReferenceNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
			
			
								<div class="form-group">
									<label i18n for="letterOfcreditExpirydate" class="control-label col-md-2">LC Expirydate</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="letterOfcreditExpirydate" formControlName="letterOfcreditExpirydate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['letterOfcreditExpirydate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
									<label i18n for="fundSourceId" class="control-label col-md-2">Fund Source</label>
									<div class="col-md-1">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceId" (change)="resetLCFundSource($event.target.value)" id="fundSourceId" class="form-control" formControlName="fundSourceId" [ngClass]="lcIssuanceForm.controls['fundSourceId'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select LC Fund Source ---</option>
											<option  *ngFor="let item of lcFundSource" [value]="item.id">{{item.name}}</option>
										</select>
									</div>
									<div class="col-md-3" *ngIf="lcFundSourceId() == 1">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceDetails" (change)="setAmounts($event.target.value)" id="fundSourceDetails" class="form-control" formControlName="fundSourceDetails" [ngClass]="lcIssuanceForm.controls['fundSourceDetails'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select Collection Account ---</option>
											<option *ngFor="let item of customerAccount" [value]="item.casaAccountId">{{item.productAccountNumber}}</option>
										</select>
									</div>
									<div class="col-md-3" *ngIf="lcFundSourceId() == 2">
										<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" name="fundSourceDetails" (change)="setIFFAmounts($event.target.value)" id="fundSourceDetails" class="form-control" formControlName="fundSourceDetails" [ngClass]="lcIssuanceForm.controls['fundSourceDetails'].valid ? 'valid-input' : 'required-input'">
											<option i18n value="">--- Select IFF Line ---</option>
											<option  *ngFor="let item of lines" [value]="item.loanApplicationId">{{item.applicationReferenceNumber + ' ' + item.customerAvailableAmount}}</option>
										</select>
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="formMNumber" class="control-label col-md-2">FORM M Number</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="formMNumber" formControlName="formMNumber" id="formMNumber" class="form-control" [ngClass]="lcIssuanceForm.controls['formMNumber'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="totalApprovedAmount" class="control-label col-md-2">Total Approved Amount</label>
									<div class="col-md-3">
										<input type="text" [readonly]="true" name="totalApprovedAmount" formControlName="totalApprovedAmount" formatM id="totalApprovedAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['totalApprovedAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-1">
										<input type="text" [attr.disabled]="true" name="totalApprovedAmountCurrencyCode" formControlName="totalApprovedAmountCurrencyCode" formatM id="totalApprovedAmountCurrencyCode" class="form-control">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="letterOfCreditAmount" class="control-label col-md-2">LC Amount</label>
									<div class="col-md-2">
										<input type="text" (keyup)="setExchangeAmt($event)" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="letterOfCreditAmount" formControlName="letterOfCreditAmount" formatM id="letterOfCreditAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['letterOfCreditAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="lcAmtExchangeRate" formControlName="lcAmtExchangeRate" formatM id="lcAmtExchangeRate" class="numeric form-control">
									</div>
									<label i18n for="availableAmount" class="control-label col-md-2">Available Amount</label>
									<div class="col-md-3">
										<input type="text" [readonly]="true" name="availableAmount" formControlName="availableAmount" formatM id="availableAmount" class="numeric form-control" [ngClass]="lcIssuanceForm.controls['availableAmount'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-1">
										<input type="text" [readonly]="true" name="availableAmountCurrencyCode" formControlName="availableAmountCurrencyCode" formatM id="availableAmountCurrencyCode" class="form-control">
									</div>
								</div>

								<div class="form-group">
									<label i18n for="lcTolerancePercentage" class="control-label col-md-2">Tolerance Value (%)</label>
									<div class="col-md-4">
										<input type="text" [readonly]="isLCSearch==true || isForLCUssance==true || isLcCancelation==true" (keyup)="calculateToleranceAmount($event)" pInputText name="lcTolerancePercentage" formControlName="lcTolerancePercentage" formatM id="lcTolerancePercentage" class="form-control" [ngClass]="lcIssuanceForm.controls['lcTolerancePercentage'].valid ? 'valid-input' : 'required-input'">
									</div>
									<label i18n for="lcToleranceValue" class="control-label col-md-2">Tolerance Value</label>
									<div class="col-md-2">
										<input type="text" [readonly]="isLCSearch==true || isForLCUssance==true || isForReleaseOfShippingDocuments==true || isLcCancelation==true" pInputText name="lcToleranceValue" formControlName="lcToleranceValue" formatM id="lcToleranceValue" class="form-control" [ngClass]="lcIssuanceForm.controls['lcToleranceValue'].valid ? 'valid-input' : 'required-input'">
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="nairaEquivalent2" formControlName="nairaEquivalent2" formatM id="nairaEquivalent2" class="numeric form-control">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="currencyId" class="control-label col-md-2">Currency</label>
									<div class="col-md-2">
											<select [attr.disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="currencyId" formControlName="currencyId" name="currencyId" 
											(change)="setExchangeRate($event.target.value)"	[ngClass]="lcIssuanceForm.controls['currencyId'].valid ? 'valid-input' : 'required-input'"
											class="form-control">
											<option i18n value=""> Select Currency</option>
											<option  *ngFor="let curr of currencies" value="{{curr.currencyId}}"> {{curr.currencyName}}</option>
										</select>
									</div>
									<div class="col-md-2">
										<input type="text" pInputText readonly="true"  name="nairaEquivalent" formControlName="nairaEquivalent" formatM id="nairaEquivalent" class="numeric form-control">
									</div>
									<label i18n for="proformaInvoiceId" class="control-label col-md-2">Proforma Invoice No.</label>
									<div class="col-md-4">
										<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="proformaInvoiceId" formControlName="proformaInvoiceId" id="proformaInvoiceId" class="form-control" [ngClass]="lcIssuanceForm.controls['proformaInvoiceId'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
			
								<div class="form-group">
									<label i18n for="invoiceDate" class="control-label col-md-2">Proforma Invoice Date</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="invoiceDate" formControlName="invoiceDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['invoiceDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
								<!-- </div>
								<div class="form-group"> -->
									<!-- <label i18n for="invoiceDueDate" class="control-label col-md-2">Proforma Invoice Due Date</label> -->
									<label i18n for="invoiceDueDate" class="control-label col-md-2">LC Establishment Date</label>
									<div class="col-md-4">
										<p-calendar [disabled]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension() ? true : null" id="invoiceDueDate" formControlName="invoiceDueDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcIssuanceForm.controls['invoiceDueDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
									</div>
								</div>
								<div class="form-group">
									<label i18n for="transactionCycle" class="control-label col-md-2">Transaction Cycle(Days):</label>
									<div class="col-md-4">
										<input type="number" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="transactionCycle" formControlName="transactionCycle" 
										class="numeric form-control" [ngClass]="lcIssuanceForm.controls['transactionCycle'].valid ? 'valid-input' : 'required-input'">
									</div>
								</div>
								<!-- <div class="form-group">
									<label i18n for="cashBuildUpAvailable" class="control-label col-md-2">Cash BuildUp Available</label>
									<div class="col-md-4">
										<input type="checkbox" name="cashBuildUpAvailable" formControlName="cashBuildUpAvailable" 
										(click)="setCashBuildUpDetails($event)">
									</div>
								</div>
								<div *ngIf="isCashBuildUpAvailable()">
									<div class="form-group">
										<label i18n for="cashBuildUpReferenceType" class="control-label col-md-2">Cash BuildUp Reference Type</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceType" formControlName="cashBuildUpReferenceType" id="cashBuildUpReferenceType" class="form-control">
										</div>
										<label i18n for="cashBuildUpReferenceNumber" class="control-label col-md-2">Cash BuildUp Reference Number</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceNumber" formControlName="cashBuildUpReferenceNumber" id="cashBuildUpReferenceNumber" class="form-control">
										</div>
									</div>
									<div class="form-group">
										<label i18n for="percentageToCover" class="control-label col-md-2">Percentage To Cover (%)</label>
										<div class="col-md-4">
											<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="percentageToCover" formControlName="percentageToCover" id="percentageToCover" class="form-control">
										</div>
									</div>
								</div> -->
								
							</div>
						</div>
				</form>
					
					<div class="panel-footer">
						<div class="row">
							<div class="col-md-12">
								<button type="button" *ngIf="((isForReleaseOfShippingDocuments==false) || (isForLCUssance==false) || (isLCSearch==false)) && (isLcCancelation==false)" (click)="saveLcIssuance(lcIssuanceForm)" [disabled]="lcIssuanceForm.invalid" class="btn btn-success pull-right" i18n>Save</button>
								<!-- <button type="button" (click)="displayLcIssuanceForm=false" style="margin-right:5px" class="btn btn-danger pull-right">Cancel</button> -->
							</div>
						</div>
					</div>
				
				</div>
			</p-tabPanel>

			<p-tabPanel i18n-header header="Cash Build Up Plan" *ngIf="selectedId>0 && customerId>0">
				<app-lc-cash-buildup-plan 
					[lcIssuanceId]="selectedId"
					[customerId]="customerId"
					[reload]="selectedId"
					[showButtons]="showButtons && (!(isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()))">
				</app-lc-cash-buildup-plan>
				<!-- <form novalidate [formGroup]="lcIssuanceForm" autocomplete="off">
									<div class="panel-body">
										<div class="form-horizontal">
						
							<div class="form-group">
								<label i18n for="cashBuildUpReferenceType" class="control-label col-md-2"> Cash BuildUp Reference Type</label>
								<div class="col-md-4">
									<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceType" formControlName="cashBuildUpReferenceType" id="cashBuildUpReferenceType" class="form-control">
								</div>
								<label i18n for="cashBuildUpReferenceNumber" class="control-label col-md-2">Cash BuildUp Reference Number</label>
								<div class="col-md-4">
									<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="cashBuildUpReferenceNumber" formControlName="cashBuildUpReferenceNumber" id="cashBuildUpReferenceNumber" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label i18n for="percentageToCover" class="control-label col-md-2">Percentage To Cover (%)</label>
								<div class="col-md-4">
									<input type="text" pInputText [readonly]="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"  name="percentageToCover" formControlName="percentageToCover" id="percentageToCover" class="form-control">
								</div>
							</div>
							<div class="panel-footer">
									<div class="row">
										<div class="col-md-12">
											<button type="button" *ngIf="((isForReleaseOfShippingDocuments==false) || (isForLCUssance==false) || (isLCSearch==false)) && (isLcCancelation==false)" (click)="saveLcIssuance(lcIssuanceForm)" [disabled]="lcIssuanceForm.invalid" class="btn btn-success pull-right">Save</button>
											
										</div>
									</div>
								</div>
						</div>
					</div>
				</form> -->
			</p-tabPanel>

			<p-tabPanel i18n-header header="LC Required Documents" *ngIf="selectedId>0">
				<div>
					<lc-document [reload]="reload" 
					[lcIssuanceId]="selectedId"
					[showButtons]="showButtons">
					</lc-document>
				</div>
				
				<div>
					<document-upload *ngIf="selectedId>0"
						[reload]="selectedId"
						[showUploadForm]="showButtons"
						[operationId]="135"
						[customerId]="customerId"
						[targetId]="selectedId"
						[targetReferenceNumber]="lcReferenceNumber"
						(uploadCount)="numberOfLCRequiredDocuments">
					</document-upload>
				</div>
			</p-tabPanel>
			
			<p-tabPanel i18n-header header="Shipping" *ngIf="selectedId>0">
				<lc-shipping [reload]="reload" 
				[lcIssuanceId]="selectedId"
				[showButtons]="showButtons && (!(isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()))"
				(count)="numberOfShippings">
				</lc-shipping>
			</p-tabPanel>

			<p-tabPanel i18n-header header="Conditions" *ngIf="selectedId>0">
				<lc-condition [reload]="reload" 
				[lcIssuanceId]="selectedId"
				[showButtons]="showButtons && (!(isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()))">
				</lc-condition>
			</p-tabPanel>

			<p-tabPanel i18n-header header="IFF Line Details" *ngIf="(selectedApplicationId>0)">
				<div>
					<p-accordion #accordion>
						<p-accordionTab i18n-header header="Facility Details and FAM">
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<div class="pull-right">
												<button (click)="viewFAM()"><span class="glyphicon glyphicon-file" ></span>
													<ng-container i18n> Preview FAM Document</ng-container>
													</button>
											</div>
										</div>
									</div>
								</div>
							</div>
							<app-loan-application-details-view [isRecommendedInfo]="true"
								[loanApplicationId]="selectedApplicationId">
							</app-loan-application-details-view>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Line Collateral(s)">
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Line Collateral(s)
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<app-collaterals-proposed [loanApplicationId]="selectedApplicationId"
                                        [currencyId]=1
                                        [reload]="selectedApplicationId">
                                    </app-collaterals-proposed>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Line Conditions">
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Line Conditions
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<app-credit-condition [reload]="reload" [callerId]="1" [isAnalyst]="false" [isBusiness]="false"
										[displayedOnly]="true" [applicationId]="selectedApplicationId" [proposedItems]="proposedItems">
									</app-credit-condition>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Line Transaction Dynamics">
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Line Transaction Dynamics
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<app-transaction-dynamics [reload]="reload" [callerId]="1" [isAnalyst]="false" [isBusiness]="false"
										[displayedOnly]="true" [applicationId]="selectedApplicationId" [proposedItems]="proposedItems">
									</app-transaction-dynamics>
								</div>
							</div>
						</p-accordionTab>
					</p-accordion>
				</div>
			</p-tabPanel>

			<p-tabPanel i18n-header header="LC Usance" *ngIf="((isForLCUssance==true) && (selectedId>0))">
				<div class="panel panel-default">
						<div class="panel-heading">
							<div class="row">
								<div class="col-md-12">
									<h2 i18n class="panel-title pull-left">
										Lc Usance Details
									</h2>
								</div>
							</div>
						</div>
									
					<form novalidate [formGroup]="lcUssanceForm" (ngSubmit)="saveLcIssuance(lcUssanceForm)" autocomplete="off">
							<div class="panel-body">
								<div class="form-horizontal">
				
									<div class="form-group" *ngIf="isForUssanceExtension() != true">
										<label i18n for="ussanceAmount" class="control-label col-md-2">Usance Amount:</label>
										<div class="col-md-2">
											<input type="text" [readonly]="isForLCUssanceExtension == true" (keyup)="setoutstandingUsanceAmount($event)" pInputText name="ussanceAmount" formControlName="ussanceAmount" formatM id="ussanceAmount" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceAmount'].valid ? 'valid-input' : 'required-input'">
										</div>
										<div class="col-md-2">
											<select id="usanceAmountCurrencyId" formControlName="usanceAmountCurrencyId" name="usanceAmountCurrencyId" 
												[ngClass]="lcUssanceForm.controls['usanceAmountCurrencyId'].valid ? 'valid-input' : 'required-input'"
												class="form-control" (change)="setExchangeRateForUssance($event.target.value)"
												[attr.disabled]="(isForLCUssanceExtension == true )? true : null">
												<option i18n value=""> Select Currency</option>
												<option  *ngFor="let curr of currencies" value="{{curr.currencyId}}"> {{curr.currencyName}}</option>
											</select>
										</div>
										<label i18n for="ussanceRate" class="control-label col-md-2">Usance Rate (%)</label>
										<div class="col-md-4">
											<input type="text" pInputText name="ussanceRate" formControlName="ussanceRate" formatM id="ussanceRate" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceRate'].valid ? 'valid-input' : 'required-input'">
										</div>
									</div>
									<div class="form-group" *ngIf="isForUssanceExtension() == true">
										<label i18n for="ussanceAmount" class="control-label col-md-1">Usance Amount:</label>
										<div class="col-md-3">
											<input type="text" [readonly]="true" (keyup)="setoutstandingUsanceAmount($event)" pInputText name="ussanceAmount" formControlName="ussanceAmount" formatM id="ussanceAmount" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceAmount'].valid ? 'valid-input' : 'required-input'">
										</div>
										<div class="col-md-2">
											<select id="usanceAmountCurrencyId" formControlName="usanceAmountCurrencyId" name="usanceAmountCurrencyId" 
												[ngClass]="lcUssanceForm.controls['usanceAmountCurrencyId'].valid ? 'valid-input' : 'required-input'"
												class="form-control" (change)="setExchangeRateForUssance($event.target.value)"
												[attr.disabled]="true">
												<option i18n value=""> Select Currency</option>
												<option  *ngFor="let curr of currencies" value="{{curr.currencyId}}"> {{curr.currencyName}}</option>
											</select>
										</div>
										<label i18n for="ussanceRate" class="control-label col-md-1">Usance Rate (%)</label>
										<div class="col-md-5">
											<input type="text" [readonly]="true" pInputText name="ussanceRate" formControlName="ussanceRate" formatM id="ussanceRate" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceRate'].valid ? 'valid-input' : 'required-input'">
										</div>
									</div>
	
									<div class="form-group" *ngIf="isForUssanceExtension() != true">
										<label i18n for="lcEffectiveDate" class="control-label col-md-2">Usance Value Date:</label>
										<div class="col-md-4">
											<p-calendar id="lcEffectiveDate" formControlName="lcEffectiveDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
												[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
												[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcUssanceForm.controls['lcEffectiveDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
										</div>
										<label i18n for="ussanceTenor" class="control-label col-md-2">Usance Tenor (Days)</label>
										<div class="col-md-4">
											<input type="text" (keyup)="fillUsanceMaturityDate($event)" name="ussanceTenor" formControlName="ussanceTenor" id="ussanceTenor" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceTenor'].valid ? 'valid-input' : 'required-input'">
										</div>
									</div>
									<div class="form-group" *ngIf="isForUssanceExtension() == true">
										<label i18n for="lcEffectiveDate" class="control-label col-md-1">Usance Value Date:</label>
										<div class="col-md-5">
											<p-calendar [disabled]="true" id="lcEffectiveDate" formControlName="lcEffectiveDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
												[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
												[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcUssanceForm.controls['lcEffectiveDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
										</div>

										<label i18n for="ussanceTenor" class="control-label col-md-1">New Usance Tenor (Days)</label>
										<div class="col-md-2">
											<input type="text" (keyup)="fillUsanceMaturityDate($event)" name="ussanceTenor" formControlName="ussanceTenor" id="ussanceTenor" class="form-control" [ngClass]="lcUssanceForm.controls['ussanceTenor'].valid ? 'valid-input' : 'required-input'">
										</div>
										<label i18n for="oldUssanceTenor" class="control-label col-md-1">Old Usance Tenor (Days)</label>
										<div class="col-md-2">
											<input type="text" [readonly]="true" [(ngModel)]="oldUssanceTenor" [ngModelOptions]="{standalone: true}" name="oldUssanceTenor" id="oldUssanceTenor" class="form-control">
										</div>
									</div>
									<div class="form-group" *ngIf="isForUssanceExtension() != true">
										<label i18n for="lcMaturityDate" class="control-label col-md-2">Usance Maturity Date</label>
										<div class="col-md-4">
											<p-calendar [disabled]="true" id="lcMaturityDate" formControlName="lcMaturityDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcUssanceForm.controls['lcMaturityDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
										</div>
										<label i18n for="outstandingUsanceAmount" class="control-label col-md-2">Outstanding LC Amount:</label>
										<div class="col-md-4">
											<input type="text" [readonly]="true" [(ngModel)]="outstandingUsanceAmount" [ngModelOptions]="{standalone: true}" formatM id="outstandingUsanceAmount" class="form-control">
										</div>
									</div>
									<div class="form-group" *ngIf="isForUssanceExtension() == true">
										<label i18n for="lcMaturityDate" class="control-label col-md-1">New Usance Maturity Date</label>
										<div class="col-md-2">
											<p-calendar [disabled]="true" id="lcMaturityDate" formControlName="lcMaturityDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [ngClass]="lcUssanceForm.controls['lcMaturityDate'].valid ? 'valid-input' : 'required-input'"></p-calendar>
										</div>
										<label i18n for="oldLcMaturityDate" class="control-label col-md-1">Old Usance Maturity Date</label>
										<div class="col-md-2">
											<p-calendar [disabled]="true" id="oldLcMaturityDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2100"
											[showIcon]="true" [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
											[style]="{'width': '100%', 'z-index': '999'}" [(ngModel)]="oldLcMaturityDate" [ngModelOptions]="{standalone: true}"></p-calendar>
										</div>

										<label i18n for="outstandingUsanceAmount" class="control-label col-md-1">Outstanding LC Amount:</label>
										<div class="col-md-5">
											<input type="text" [readonly]="true" [(ngModel)]="outstandingUsanceAmount" [ngModelOptions]="{standalone: true}" formatM id="outstandingUsanceAmount" class="form-control">
										</div>
									</div>
	
								</div>
							</div>
					</form>

					<div class="panel-footer">
						<div class="row">
							<div class="col-md-12">
								<div class="btn-group pull-right">
									<button (click)="resetUssanceForm()" type="button" class="btn btn-danger" style="margin-right:5px" i18n>Reset</button>
									<button [disabled]="lcUssanceForm.invalid" type="button" (click)="saveUssanceForm(lcUssanceForm)"
										class="btn btn-success"i18n>Save LC Usance Details</button>
								</div>
			
							</div>
						</div>
					</div>
				</div>
			</p-tabPanel>

			<p-tabPanel i18n-header header="Approval Memo" *ngIf="targetId>0 && (selectedId>0)">
				<app-approval-memo
					[showControls]="true"
					[allowTemplateToLoad]="true"
					[canLoadDocument]="true"
					[referenceNumber]="lcReferenceNumber"
					[label]="lcForwardTitle"
					[customerId]="customerId"
					[OPERATION_ID]="OPERATION_ID"
					[targetId]="targetId">
				</app-approval-memo>
				<!-- <br/>
				<div *ngIf="isForUssanceExtension() == true">
					<app-approval-memo
						[showControls]="true"
						[allowTemplateToLoad]="false"
						[referenceNumber]="lcReferenceNumber"
						[label]="'LC Usance'"
						[customerId]="customerId"
						[OPERATION_ID]="140"
						[targetId]="lcUssanceId">
					</app-approval-memo>
				</div>
				<br/>
					<app-approval-memo *ngIf="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()"
						[showControls]="true"
						[allowTemplateToLoad]="false"
						[referenceNumber]="lcReferenceNumber"
						[label]="'LC Issuance'"
						[customerId]="customerId"
						[OPERATION_ID]="135"
						[targetId]="selectedId">
					</app-approval-memo> -->
			</p-tabPanel>

			<p-tabPanel i18n-header header="Comments" *ngIf="targetId>0 && (selectedId>0)">
				<div class="panel panel-default">
					<app-approval-comments [requireAll]=false [operationId]="OPERATION_ID"
						[applicationId]="targetId" [tableLabel]="commentHeading">
					</app-approval-comments>
					<br/>
					<div *ngIf="isForUssanceExtension() == true">
						<app-approval-comments *ngIf="lcUssanceId>0" [requireAll]=false [operationId]="140"
							[applicationId]="lcUssanceId" [tableLabel]="'LC Usance Comments'">
						</app-approval-comments>
					</div>
					<br/>
					<app-approval-comments *ngIf="isForReleaseOrUssanceOrSearchOrCancelationOrEnhancementOrExtension()" [operationId]="135"
						[applicationId]="selectedId" [requireAll]=false [tableLabel]="'LC Issuance Comments'">
					</app-approval-comments>
				</div>
			</p-tabPanel>
		</p-tabView>

		<div class="panel-footer" *ngIf="(!isOnIssuanceListTab() && !isForLCSearch())">
			<div class="row">
				<div class="col-md-12">
					<div class="col-md-6">
						<div class="btn-group">
							<button type="button" class="btn btn-danger" (click)="showCommentForm()"
								style="margin-right:5px">
								<i class="glyphicon glyphicon-chevron-left"></i>
								<ng-container i18n> Refer Back</ng-container>
							</button>
						</div>
					</div>
					<div class="col-md-6">
						<div class="btn-group pull-right">
							<button (click)="resetActiveTabIndex()" type="button" class="btn btn-danger" style="margin-right:5px" i18n>Back to Issuances</button>
							<!-- <button *ngIf="!(isForLCUssance==true || isForReleaseOfShippingDocuments==true)" [disabled]="(!(customerId>0))" type="button" (click)="forward()"
								class="btn btn-success">Submit For Approval</button> -->
							<button *ngIf="(isForReleaseOfShippingDocuments==true)" [disabled]="(!(customerId>0) || !(lcReleaseAmountId>0))" type="button" (click)="forward()"
								class="btn btn-success" i18n>Submit For Approval</button>
								<button *ngIf="(isForLCUssance==true)" [disabled]="!(customerId>0)||(lcUssanceForm.invalid)||!(selectedId>0)" type="button" (click)="forward()"
								class="btn btn-success">Submit For Approval</button>
							<button *ngIf="!(isForRelease() || isForUssance())" [disabled]="!(customerId>0)||(lcIssuanceForm.invalid)||!(selectedId>0)" type="button" (click)="forward()"
								class="btn btn-success" i18n>Submit For Approval</button>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

	<p-dialog [responsive]=true [modal]=true [dismissableMask]=true [(visible)]="showSearchCustomerDialog" width="800"
		[contentStyle]="{'overflow':'auto','max-height':'700px'}">
		<customer-search (customer)="setCustomer($event)"
			[showPhoneNumberSearch]="false">
                    
			</customer-search>
	</p-dialog>

	<p-dialog [responsive]=true [modal]=true [dismissableMask]=true [(visible)]="showLcForward" width="800"
		[contentStyle]="{'overflow':'auto','max-height':'700px'}">
		<form novalidate [formGroup]="lcForwardForm" autocomplete="off">
			<div class="panel panel-default">
				<div class="panel-heading">
					{{lcForwardTitle}}
				</div>
				<div class="panel-body">
					<div class="form-group">
						<label  for="comment" class="control-label col-md-12"><strong i18n>Comment</strong></label>
						<div class="col-md-12">
							<textarea [ngClass]="lcForwardForm.controls['comment'].valid ? 'valid-input' : 'required-input'"
								class="form-control" formControlName="comment" name="comment" cols="15" rows="3"></textarea>
						</div>
						<div *ngIf="!isLoopedStaffId">
							<label i18n for="forward" class="control-label col-md-12">Status</label>
							<div class="col-md-12">
								<select name="forward" (change)="resetButton($event.target.value)" id="forward"
									class="form-control" formControlName="forward"
									[ngClass]="lcForwardForm.controls['forward'].valid ? 'valid-input' : 'required-input'">
									<option i18n value="">--- Select Approval Status ---</option>
									<option *ngFor="let item of approvalStatusData" [value]="item.approvalStatusId">
										{{item.approvalStatusName}}</option>
								</select>
							</div>
						</div>
					</div>
				</div>
				<div class="panel-footer">
					<div class="row">
						<div class="col-md-12">
							<button type="button" (click)="goForApproval()" [disabled]="lcForwardForm.invalid"
								class="btn btn-success pull-right" i18n>Submit</button>
							<button type="button" (click)="closeDialog()" style="margin-right:5px"
								class="btn btn-danger pull-right" i18n>Cancel</button>
						</div>
					</div>
				</div>
			</div>
		</form>
	</p-dialog>

	<p-dialog  [responsive]=true [(visible)]="displayReferBackForm" modal="modal" showEffect="fade" width="700"
	[contentStyle]="{'overflow':'auto','max-height':'700px','max-width':'1300px'}">
		<div style="margin-bottom:0" class="panel panel-default">
			<div class="panel-heading">
				<h2 i18n class="panel-title">Refer back</h2>
			</div>
			<app-refer-back *ngIf="targetId>0" 
				[getAllReferTrail]="getAllReferTrail"
				[referBackOperationId]="OPERATION_ID" [currentLevelId]="lcSelection?.currentApprovalLevelId"
				[referBackTargetId]="targetId" [displayLoopInFeature]="isForReleaseOfShippingDocuments || isForLCUssanceExtension"
				(notify)="displayStatus($event)" (notifyAfterReferBack)="afterReferBackSuccess()">
			</app-refer-back>
		</div>
	</p-dialog> 

	<p-dialog [responsive]=true [(visible)]="displayFAM" modal="modal" showEffect="fade" width="1200" [contentStyle]="{'overflow':'auto','max-height':'900px'}">
        <div *ngIf="displayFAM" class="panel panel-default">
            <div class="panel-heading">
                <h2   class="panel-title">
                   <ng-container i18n> FACILITY APPROVAL MEMO No.:</ng-container>
				   
                    <strong>{{ applicationReferenceNumber }}</strong> 
                </h2>
                <div class="pull-right">
                    <a class="close" (click)="closeDocumentation()">&times;</a>
				</div> 
				<br>
				<br>
				<app-form-3800b-los *ngIf="displayFAM" [applicationReferenceNumber]="applicationReferenceNumber"></app-form-3800b-los>
			</div>
		</div>
	</p-dialog>

	<!-- <p-dialog [responsive]=true [(visible)]="displayCommentForm" id="reccol-modal" modal="modal" showEffect="fade"
		width="450">
		<div style="margin-bottom:0" class="panel panel-default">
			<div class="panel-heading">
				<h2 i18n class="panel-title">Refer back</h2>
			</div>
			<form novalidate [formGroup]="commentForm">
				<div class="panel-body">
					<div class="form-horizontal">
						<div class="form-group">
							<label i18n class="control-label col-md-6">Approval Level</label>
							<div class="col-md-12">
								<select name="approvalLevelId" formControlName="approvalLevelId" id="approvalLevelId" class="form-control" [ngClass]="commentForm.controls['approvalLevelId'].valid ? 'valid-input' : 'required-input'">
									<option i18n value="">-- Select Approval Level --</option>
									<option i18n *ngFor="let x of trailApprovalLevels" [value]="x.fromApprovalLevelId">{{ x.fromApprovalLevelName }}</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-12">
								<label i18n>Comment</label>
							</div>
							<div class="col-md-12">
								<textarea name="comment" formControlName="comment" id="comment" class="form-control"
									[ngClass]="!commentForm.controls['comment'].valid ? 'required-input' : 'valid-input'"></textarea>
							</div>
						</div>
					</div>
				</div>
				<div class="panel-footer">
					<div class="row">
						<div class="col-md-12">
							<button type="button" (click)="returnBack(commentForm)"
								[disabled]="commentForm.invalid" class="btn btn-success pull-right">Submit</button>
							<button type="button" (click)="displayCommentForm=false" style="margin-right:5px"
								class="btn btn-danger pull-right">Cancel</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</p-dialog> -->

<fintrakbanking-message [title]="title" [message]="message" [show]="show" [cssClass]="cssClass"
	(closeEvent)="hideMessage($event)"></fintrakbanking-message>
