<div class="form-horizontal" *ngIf="displayDetails">
  <div class="form-group">
    <p-tabView>
      <p-tabPanel header="Facility Details">
        <div style="margin-bottom:0" class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              Facility Details
              <!-- {{ loanSelection }} -->
            </h2>
          </div>
          <div class="panel-body">
            <table *ngIf="loanSelection != null" class="table table-customer-information">
              <tbody>

                <tr>
                  <td>
                    <strong>Reference Number:</strong>
                  </td>
                  <td>{{ loanSelection.loanReferenceNumber ? loanSelection.loanReferenceNumber : 'N/A'}}</td>
                  <td>
                    <strong>Application Reference No:</strong>
                  </td>
                  <td>{{ loanSelection.applicationReferenceNumber ? loanSelection.applicationReferenceNumber : 'N/A'}}</td>
                  <td>
                    <strong>{{disbursementAccount}}</strong>
                  </td>
                  <td>{{ loanSelection.casaAccountNumber }}</td>
        
                </tr>
                <tr>
                  <td>
                    <strong>Customer Code</strong>
                  </td>
                  <td>{{ loanSelection.customerCode }}</td>
                  <td>
                    <strong>Customer Name</strong>
                  </td>
                  <td>{{ loanSelection.customerName ? loanSelection.customerName : 'N/A'}}</td>
                  <td>
                    <strong>{{repaymentAccount}}</strong>
                  </td>
                  <td>{{ loanSelection.casaAccountNumber2 ? loanSelection.casaAccountNumber2 : 'N/A'}}</td>

                </tr>
                <tr>
                  <td>
                    <strong>Last Operation</strong>
                  </td>
                  <td>{{ loanSelection.operationName }}</td>
                  <td>
                    <strong>Product Type</strong>
                  </td>
                  <td>{{ loanSelection.productTypeName }}</td>
                  <td>
                    <strong> Product Account Name</strong>
                  </td>
                  <td>{{ loanSelection.productAccountName }}</td>
                </tr>
                <tr>
                  
                  <td>
                    <strong>Branch Name</strong>
                  </td>
                  <td>{{ loanSelection.branchName }}</td>
                  <td>
                    <strong>Customer Type</strong>
                  </td>
                  <td>{{ loanSelection.customerType }}</td>
                  <td>
                    <strong> Effective Date</strong>
                  </td>
                  <td>{{ loanSelection.effectiveDate | date }}</td>
                </tr>
                <tr>
                  <td>
                    <strong>Initiating Officer</strong>
                  </td>
                  <td>{{ loanSelection.relationshipOfficerName ? loanSelection.relationshipOfficerName : 'N/A' }}</td>
                  <td>
                    <strong> Facility Purpose</strong>
                  </td>
                  <td>{{ loanSelection.loanPurpose }}</td>
                  <td>
                      <strong> Maturity Date</strong>
                    </td>
                    <td>
                      {{ loanSelection.maturityDate | date }}
                    </td>
                </tr>
                <tr>
                  <td>
                    <strong> Amount</strong>
                  </td>
                  <td>{{ loanSelection.principalAmount }}</td>
                  <td>
                    <strong> Interest Rate(%)</strong>
                  </td>
                  <td>{{ loanSelection.interestRate }}</td>
                  <td>
                    <strong> Sector Name</strong>
                  </td>
                  <td>
                    {{ loanSelection.sectorName }}
                  </td>
<!--                   <td>
                    <strong> Maturity Date</strong>
                  </td>
                  <td>
                    {{ loanSelection.maturityDate | date }}
                  </td> -->
                </tr>
                <tr>
                  <td>
                    <strong> Currency</strong>
                  </td>
                  <td>{{ loanSelection.currency}}</td>
                  <td>
                    <strong> Exchange Rate</strong>
                  </td>
                  <td>{{ loanSelection.exchangeRate }}</td>
                  <!-- <td>
                    <strong> Outstanding Interest</strong>
                  </td>
                  <td>{{ loanSelection.outstandingInterest }}</td> -->
                  <td>
                    <strong> SubSector Name</strong>
                  </td>
                  <td>{{ loanSelection.subSectorName }}</td>
                </tr>
                <tr *ngIf="loanSystemTypeId != 2">
                  <td>
                    <strong> Principal Frequency</strong>
                  </td>
                  <td>{{ loanSelection.principalFrequencyTypeName }}</td>
                  <td>
                    <strong> Interest Frequency</strong>
                  </td>
                  <td>{{ loanSelection.interestFrequencyTypeName }}</td>
                  <!---->
                  <td>
                    <strong> Outstanding Principal</strong>
                  </td>
                  <td>{{ loanSelection.outstandingPrincipal }}</td>
                </tr>
                <tr *ngIf="loanSystemTypeId != 2">
                  <td>
                    <strong> First Principal Payment Date</strong>
                  </td>
                  <td>{{ loanSelection.firstPrincipalPaymentDate | date }}</td>
                  <td>
                    <strong> First Interest Payment Date</strong>
                  </td>
                  <td>{{ loanSelection.firstInterestPaymentDate | date }}</td>
                  
                </tr>

                <tr *ngIf="loanSystemTypeId != 2">
                  <td>
                    <strong>Past Due Days</strong>
                  </td>
                  <td>{{ loanSelection.pastDueDays }}</td>
                  
                  <td>
                    <strong> Written-off Accrual Amount</strong>
                  </td>
                  <td>{{ writtenOffAccrualAmount }}</td>
                  <td>
                    <strong>Accrued Interest:</strong>
                </td>
                <td>{{ loanSelection.accrualedAmount | number: '1.2' }}</td>
                </tr>
                <tr *ngIf="loanSystemTypeId != 2">
                    <td>
                      <strong> Interest On Past Due Interest</strong>
                    </td>
                    <td>{{ loanSelection.interesrtOnPastDueInterest }}</td>
                    <td>
                      <strong> Interest On Past Due Principal</strong>
                    </td>
                    <td>{{ loanSelection.interestOnPastDuePrincipal }}</td>
                    <td>
                      <strong> Total Repayment</strong>
                    </td>
                    <td>{{ loanSelection.totalRepayment }}</td>      
                </tr>

                  <tr *ngIf="loanSystemTypeId != 2">
                    <td>
                      <strong> Past Due Interest</strong>
                    </td>
                    <td>{{ loanSelection.pastDueInterest }}</td>
                    <td>
                      <strong> Past Due Principal</strong>
                    </td>
                    <td>{{ loanSelection.pastDuePrincipal }}</td>
                    <td>
                      <strong> Total Outstanding Balance</strong>
                    </td>
                    <td>{{ totalLoanBalance }}</td>             
                   
                   </tr>
                  <tr>
                    <td>
                      <strong> Tenor</strong>
                    </td>
                    <td>{{ loanSelection.tenor }}</td>
                    <td>
                      <strong> Booking Date</strong>
                    </td>
                    <td>{{ loanSelection.bookingDate | date }}</td>
                    
                  </tr>
              </tbody>
            </table>
          </div>

        </div>
      </p-tabPanel>
      <!-- <p-tabPanel header="Covenant Details">
        <div style="margin-bottom:0" class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              Covenant Details 1
            </h2>
          </div>
          <div class="panel-body">
            <p-dataTable [value]="convenatDetails" [responsive]="true">
              <p-header>Covenant Details</p-header>
              <p-column field="covenantDetail" header="Covenant"></p-column>
              <p-column field="covenantAmount" header="Amount"></p-column>
              <p-column field="covenantDate" header="Date"></p-column>
              <p-column field="frequencyTypeName" header="Frequency"></p-column>
            </p-dataTable>
          </div>
          <div class="panel-footer">
            <div class="row">
              <div class="col-md-12">
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel> -->
      <p-tabPanel header="Fees Details">
        <div style="margin-bottom:0" class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              Fees Details
            </h2>
          </div>
          <div class="panel-body">
            <p-dataTable [value]="chargeFeeDetails" [responsive]="true">
              <p-header>Fees Details</p-header>
              <p-column field="chargeFeeName" header="Charge Fee Name"></p-column>
              <p-column field="feeAmount" header="Fee Amount"></p-column>
              <p-column field="feeIntervalName" header="Fee Interval"></p-column>
              <p-column field="feeRateValue" header="Rate(%)"></p-column>
            </p-dataTable>
          </div>
          <div class="panel-footer">
            <div class="row">
              <div class="col-md-12">
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
      
      <p-tabPanel header="Collateral Details">
        <div style="margin-bottom:0" class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              Collateral Details
            </h2>
          </div>
          <div class="panel-body"> 
            <p-dataTable [value]="collateralDetails" [responsive]="true">
              <p-header>Collateral Details</p-header>
              <p-column field="collateralCode" header="Code"></p-column>
              <p-column field="collateralType" header="Collateral Type"></p-column>
              <p-column field="collateralValue" header="Value"></p-column>
              <p-column field="haircut" header="Haircut"></p-column>
              <!-- <p-column field="securityValue" header="Security Value"></p-column> -->
            </p-dataTable>
          </div>
          <div class="panel-footer">
            <div class="row">
              <div class="col-md-12">
              </div>
            </div>
          </div>
        </div>
      </p-tabPanel>
      <p-tabPanel header="Schedule Details" *ngIf="!displayCustomerODDetails">
        <div style="margin-bottom:0" class="panel panel-default">
          <div class="panel-heading">
            <h2 class="panel-title">
              Schedule Details
            </h2>
          </div>
          <div class="panel-body">
            <!-- <fieldset>
              <table style="margin-bottom: 20px">
                <tr>
                  <td style="font-size: 12px;font-weight: bold;padding: 4px">Granted Amount</td>
                  <td style="text-align: right;padding-left: 10px;padding: 4px">{{loanSelection?.principalAmount}}</td>
                  <td style="font-size: 12px;font-weight: bold;padding-left: 20px;padding: 4px">Interest Rate</td>
                  <td style="text-align: right;padding: 4px">{{loanSelection?.interestRate}} %</td>
                  <td style="font-size: 12px;font-weight: bold;padding-left: 20px;padding: 4px">Effective Interest Rate</td>
                  <td style="text-align: right;padding: 4px">{{loanSelection?.effectiveInterestRate | number: '1.2-2'}} %</td>
                </tr>
                <tr>
                  <td style="font-size: 12px;font-weight: bold;padding: 4px">Effective Date</td>
                  <td style="text-align: right;padding-left: 10px;padding: 4px">{{loanSelection?.effectiveDate | date}}</td>
                  <td style="font-size: 12px;font-weight: bold;padding-left: 20px;padding: 4px">Maturity Date</td>
                  <td style="text-align: right;padding: 4px">{{loanSelection?.maturityDate | date}}</td>
                  <td style="font-size: 12px;font-weight: bold;padding-left: 20px;padding: 4px">Schedule Type</td>
                  <td style="text-align: right;padding: 4px">{{loanSelection?.scheduleTypeName}}</td>
                </tr>
              </table>

            </fieldset> -->


            <p-dataTable scrollable="true"  [value]="loanScheduleDetails" [responsive]=true selectionMode="single">
              <p-column [style]="{'width':'80px'}" field="paymentNumber" header="No"></p-column>
              <p-column field="paymentDate" header="Payment Date">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span>{{schedule[col.field] | date}}</span>
                </ng-template>
              </p-column>
              <p-column field="startPrincipalAmount" header="Start Principal">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="periodPaymentAmount" header="Periodic Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="periodPrincipalAmount" header="Principal Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="periodInterestAmount" header="Interest Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="endPrincipalAmount" header="Balance">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>

              <p-column field="amortisedStartPrincipalAmount" header="AM Start Principal">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="amortisedPeriodPaymentAmount" header="AM Periodic Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="amortisedPeriodPrincipalAmount" header="AM Principal Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="amortisedPeriodInterestAmount" header="AM Interest Amount">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
              <p-column field="amortisedEndPrincipalAmount" header="AM Balance">
                <ng-template let-col let-schedule="rowData" pTemplate="body">
                  <span style="text-align: right">{{schedule[col.field] | number: '1.2-2'}}</span>
                </ng-template>
              </p-column>
            </p-dataTable>
          </div>

        </div>
      </p-tabPanel>


      <!-- <p-tabPanel header="Maturity Instruction" >
        <p-dataTable [value]="maturityInstruction" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,20,30]">
        <p-column field="actionBy" header="Customer Name" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
        <p-column field="tenor" header="Tenor" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
        <p-column field="isUsed" header="Is Used" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
        <p-column field="instructionType" header="Instruction Type" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
        <p-column field="approvalStatus" header="Status" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
        </p-dataTable>
      </p-tabPanel> -->
      


    </p-tabView>
  </div>
</div>