<customer-search (customer)="getCustomerCollateral($event.customerId,$event.customerName)"
    [showPhoneNumberSearch]="showPhoneNumberSearch"></customer-search>

<!--{{activeTabIndex}}-->
<!-- <button type="button" (click)="development()" class="btn btn-danger pull-right">Fire Development Test</button> -->

<!-- <b>{{collateralTypes.length | json}}</b> -->
<!-- {{ loanApplicationCollaterals | json }} -->
<div class="ui-g">
    <div class="ui-g-12 no-padding">

        <div class="card no-padding" *ngIf="showCustomerCollaterals">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">

                        <div class="col-md-12">
                            <h2 class="panel-title pull-left">

                                Customer Collaterals - <small><span i18n>Showing registered collaterals of </span><b>{{ selectedCustomerName }}</b></small>
                            </h2>
                            <div class="pull-right">
                                <!-- <button (click)="showModalForm()" pButton type="button" label="Add New" icon="fa-plus"></button> -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel-body coll-list">
                    <p-tabView>
                        <p-tabPanel i18n-header header="Registered Collaterals">
                            <p-dataTable [value]="customerCollaterals" [paginator]="true" [rows]="5">
                                <p-column i18n-header field="collateralCode" header="Collateral Code" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="collateralTypeName" header="Collateral Type"
                                    sortable="true" [filter]="true" filterMatchMode="contains"></p-column>

                                <!-- <p-column i18n-header field="collateralTypeId"  header="Collateral Type" sortable="true" [filter]="true" filterMatchMode="contains">
								<ng-template let-i="rowIndex" let-d="rowData" pTemplate type="body">
									{{ getCollateralTypeName(d.collateralTypeId) }}
								</ng-template>
							</p-column>-->

                                <p-column i18n-header field="collateralSubTypeId" header="Sub Type" sortable="true"
                                    [filter]="true" filterMatchMode="contains">
                                    <ng-template let-i="rowIndex" let-d="rowData" pTemplate type="body">
                                        {{ getCollateralSubTypeName(d.collateralSubTypeId) }}
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header field="collateralSummary" header="Collateral Summary"
                                    sortable="true" [filter]="true" filterMatchMode="contains"></p-column>

                                <p-column i18n-header field="collateralValue" header="Collateral Value" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.currencyCode}} {{ d.collateralValue | number : '1.2' }}
                                        <!-- {{ d.availableValue | number : '1.2' }} -->
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header field="collateralValueLcy"
                                    header="Collateral Value (Local Equivalent)" sortable="true" [filter]="true"
                                    filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.collateralValueLcy | number : '1.2' }}
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header field="haircut" header="Hair Cut/Shrinkage" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'width':'100px'}"></p-column>
                                <p-column i18n-header field="collateralReleaseStatusName" header="Status"
                                    sortable="true" [filter]="true" filterMatchMode="contains"
                                    [style]="{'width':'100px'}"></p-column>
                                <!-- <p-column i18n-header field="collateralUsageStatus" header="Usage Status" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'width':'100px'}">

                                </p-column> -->

                                <!-- <p-column i18n-header field="securityCollateralValue" header="Security Value" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.securityCollateralValue | number : '1.2' }}
                                    </ng-template>
                                </p-column> -->


                                <p-column i18n-header field="availableCollateralValue"
                                    header="Available Collateral Value" sortable="true" [filter]="true"
                                    filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.availableCollateralValue | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <!-- <p-column i18n-header field="approvalStatus" header="Approval" sortable="true" [filter]="true" filterMatchMode="contains" [style]="{'width':'100px'}">
								<ng-template let-i="rowIndex" let-d="rowData" pTemplate type="body">
									{{ getApprovalStatus(d.approvalStatus) }}
								</ng-template>
							</p-column> -->

                                <p-column [style]="{'width':'180px'}">
                                    <ng-template pTemplate="header">
                                        <div style="text-align:center">
                                            <button *ngIf="hideCreateButton == false" (click)="showModalForm()" pButton
                                                type="button" i18n-label label="Add New" icon="fa-plus"></button>
                                        </div>
                                    </ng-template>
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <div style="text-align:center">

                                            <a *ngIf="d.loanApplicationDetailId == null && hideProposeButton == false && d.isProposed != true && userIsAccountOfficer == true || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer"
                                                (click)="proposeCollateral(d)" href="javascript:void(0)"
                                                i18n>Propose</a>
                                            <span
                                                *ngIf="d.loanApplicationDetailId == null && hideProposeButton == false && userIsAccountOfficer == true || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer"
                                                style="padding:3px;">|</span>

                                            <a *ngIf="(canEditExternally || d.isProposed != true) && !isForSwap && (userIsAccountOfficer == true || userIsUserAdmin || userIsLegalOfficer || userIsHeadOfLegal || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer || userIsCountryCRM || userIsCountryCRO)"
                                                (click)="editCustomerCollateral(d)" href="javascript:void(0)"
                                                i18n>Edit</a>
                                            <span
                                                *ngIf="(canEditExternally || d.isProposed != true) && !isForSwap && (userIsAccountOfficer == true || userIsUserAdmin || userIsLegalOfficer || userIsHeadOfLegal || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer || userIsCountryCRM || userIsCountryCRO)"
                                                style="padding:3px;">|</span>

                                            <span *ngIf="d.isProposed == true" style="color:red" i18n>Proposed</span>
                                            <span *ngIf="d.isProposed == true" style="padding:3px;">|</span>
                                            <a href="javascript:void(0)" (click)="viewCollateralDetail(d)"
                                                *ngIf="!isForSwap" i18n>View</a>


                                            <!-- <a *ngIf="(!canEditExternally || userIsUserAdmin)" href="javascript:void(0)" (click)="viewCollateralDetail(d)">View</a> -->

                                            <!-- <span *ngIf="d.isMapped == true" style="color:red"> | Used</span> -->
                                            <!-- <a *ngIf="isMapped(d.collateralId) == false && d.allowApplicationMapping == true && loanApplicationId != null" (click)="mapCollateral(d.collateralId)" href="javascript:void(0)">Use</a> -->
                                            <span style="padding:3px;">|</span>
                                            <!-- <span *ngIf="!canEditExternally"  style="padding:3px;">|</span> -->
                                            <a (click)="getCollateralHistory(d)" *ngIf="!isForSwap"
                                                href="javascript:void(0)" i18n>History</a>
                                            <span *ngIf="isForSwap" style="padding:3px;">|</span>
                                            <a (click)="emitCollateralDetail(d)" *ngIf="isForSwap"
                                                href="javascript:void(0)" i18n>Select for swap</a>

                                            <span *ngIf="(userIsAccountOfficer && !d.isProposed) || userIsUserAdmin || userIsLegalOfficer|| userIsHeadOfLegal || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer || userIsCountryCRM || userIsCountryCRO"
                                                style="padding:3px;">|</span>
                                            <a (click)="deleteDuplicatedCollateral(d.collateralId)"
                                                *ngIf="(userIsAccountOfficer && !d.isProposed) || userIsUserAdmin || userIsLegalOfficer|| userIsHeadOfLegal || userIsCreditRiskManager || userIsChiefRiskOfficer || userIsProjectMonitoringOfficer || userIsCountryCRM || userIsCountryCRO"
                                                href="javascript:void(0)" i18n>Delete</a>

                                            <!-- <span *ngIf="d.available == false" style="color:#d3d3d3">Use</span> -->
                                            <!-- <span *ngIf="d.allowApplicationMapping == false && loanApplicationId != null" style="color:#d3d3d3">Use</span> -->
                                            <!-- <span style="padding:3px;">|</span>
                                            <a (click)="selectInsurance(d)" href="javascript:void(0)">Insurance</a> -->
                                        </div>
                                    </ng-template>
                                </p-column>

                            </p-dataTable>
                        </p-tabPanel>
                        <p-tabPanel
                            *ngIf="proposedCollateral != null && proposedCollateral != undefined && proposedCollateral.length > 0 && moduleValue1"
                            i18n-header header="Proposed Collaterals ({{proposedCollateral.length}})">
                            <p-dataTable [value]="proposedCollateral" [paginator]="true" [rows]="3">
                                <p-column i18n-header field="collateralCode" header="Collateral Code" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="collateralOwnerName" header="Collateral Owner"
                                    sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="referenceNumber" header="Reference Number" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="customerName" header="Obligor" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="productName" header="Product Name" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>

                                <p-column i18n-header field="facilityAmount" header="Propose Facility Amount"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.facilityAmount | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="availableCollateralValue"
                                    header="Available Collateral Value" sortable="true" [filter]="true"
                                    filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.availableCollateralValue | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="expectedCollateralCoverage" header="Expected Coverage"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.expectedCollateralCoverage | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="actualCollateralCoverage" header="Actual Coverage"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.actualCollateralCoverage | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header [style]="{'width':'120px'}" *ngIf="userIsAccountOfficer">
                                    <ng-template pTemplate="header"></ng-template>
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <div style="text-align:center">
                                            <a *ngIf="d.approvalStatusId == 1 && userIsAccountOfficer == true"
                                                (click)="deleteProposedCollateral(d.loanAppCollateralId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)" i18n>Unpropose</a>
                                            <span
                                                *ngIf="d.approvalStatusId == 1 && isAvailment == true && userIsAccountOfficer == true"
                                                style="padding:3px;">|</span>
                                            <a *ngIf="d.approvalStatusId == 1 && isAvailment == true && userIsAccountOfficer == true"
                                                (click)="mapCollateral(d.collateralId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)" i18n>Use</a>
                                            <!-- <span *ngIf="hideCollateralMapLink == true" style="color:red">Used</span> -->
                                            <span *ngIf="d.approvalStatusId == 2" style="padding:3px;">|</span>
                                            <span *ngIf="d.approvalStatusId == 2" style="color:red" i18n>Used</span>
                                            <!-- <span *ngIf="hideCollateralMapLink == true" style="padding:3px;">|</span> -->
                                            <!-- <a *ngIf="d.approvalStatusId == 2" (click)="unmapCollateral(d.collateralId,d.loanApplicationDetailId)"
                                                    href="javascript:void(0)">Unmap</a> -->

                                        </div>
                                    </ng-template>
                                </p-column>
                            </p-dataTable>
                        </p-tabPanel>
                        <p-tabPanel
                            *ngIf="proposedCollateralLms != null && proposedCollateralLms != undefined && proposedCollateralLms.length > 0 && moduleValue2"
                            i18n-header header ="Proposed Collaterals ({{proposedCollateralLms.length}}) ">
                            <p-dataTable [value]="proposedCollateralLms" [paginator]="true" [rows]="3">
                                <p-column i18n-header field="collateralCode" header="Collateral Code" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="collateralOwnerName" header="Collateral Owner"
                                    sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="referenceNumber" header="Reference Number" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="customerName" header="Obligor" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="productName" header="Product Name" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>

                                <p-column i18n-header field="facilityAmount" header="Propose Facility Amount"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.facilityAmount | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="availableCollateralValue"
                                    header="Available Collateral Value" sortable="true" [filter]="true"
                                    filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.availableCollateralValue | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="expectedCollateralCoverage" header="Expected Coverage"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.expectedCollateralCoverage | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="actualCollateralCoverage" header="Actual Coverage"
                                    sortable="true" [filter]="true" filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{d.baseCurrencyCode}} {{ d.actualCollateralCoverage | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header [style]="{'width':'120px'}" *ngIf="userIsAccountOfficer">
                                    <ng-template pTemplate="header"></ng-template>
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <div style="text-align:center">
                                            <a *ngIf="d.approvalStatusId == 1 && userIsAccountOfficer == true"
                                                (click)="deleteProposedCollateral(d.loanAppCollateralId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)" i18n>Unpropose</a>
                                            <span *ngIf="d.approvalStatusId == 1 && userIsAccountOfficer == true"
                                                style="padding:3px;">|</span>
                                            <a *ngIf="d.approvalStatusId == 1 && isAvailment == true && userIsAccountOfficer == true"
                                                (click)="mapCollateral(d.collateralId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)" i18n>Use</a>
                                            <!-- <span *ngIf="hideCollateralMapLink == true" style="color:red">Used</span> -->
                                            <span *ngIf="d.approvalStatusId == 2" style="color:red" i18n>Used</span>
                                            <!-- <span *ngIf="hideCollateralMapLink == true" style="padding:3px;">|</span> -->
                                            <!-- <a *ngIf="d.approvalStatusId == 2" (click)="unmapCollateral(d.collateralId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)">Unmap</a> -->

                                        </div>
                                    </ng-template>
                                </p-column>
                            </p-dataTable>
                        </p-tabPanel>
                        <p-tabPanel
                            *ngIf="loanApplicationCollaterals != null && loanApplicationCollaterals != undefined && loanApplicationCollaterals.length > 0"
                            header="<span i18n>Mapped Collateral</span> ({{loanApplicationCollaterals.length}})">
                            <p-dataTable [value]="loanApplicationCollaterals" [paginator]="true" [rows]="5">
                                <p-column i18n-header field="collateralReferenceNumber" header="Reference Number"
                                    sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="collateralType" header="Collateral Type" sortable="true"
                                    [filter]="true" filterMatchMode="contains"></p-column>

                                <p-column i18n-header field="collateralValue" header="Collateral Value" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.collateralValue | number : '1.2' }}
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header field="haircut" header="Hair Cut/Shrinkage" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'width':'100px'}"></p-column>
                                <p-column i18n-header field="securityValue" header="Security Value" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.securityValue | number : '1.2' }}
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header header="3rd Party" sortable="true" [filter]="true"
                                    filterMatchMode="contains" [style]="{'width':'100px'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.customerId != applicationCustomerId ? "3rd Party" : "" }}
                                    </ng-template>
                                </p-column>

                                <p-column i18n-header [style]="{'width':'60px'}">
                                    <ng-template pTemplate="header"></ng-template>
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <div style="text-align:center">
                                            <a *ngIf="d.approvalStatusId == 2"
                                                (click)="unmapCollateral(d.collateralCustomerId,d.loanApplicationDetailId)"
                                                href="javascript:void(0)" i18n>Remove</a>
                                        </div>
                                    </ng-template>
                                </p-column>

                            </p-dataTable>
                        </p-tabPanel>
                    </p-tabView>
                    <!--end of collateral list tab panel-->
                </div>
            </div>
            <!--end of panel-->
            <!-- {{ loanApplicationCollaterals | json }} -->
        </div>
    </div>
</div>

<!--form modal-->
<p-dialog [responsive]=true [(visible)]="displayModalForm" id="add-modal" modal="modal" showEffect="fade" width="1100"
    [contentStyle]="{'overflow':'auto','max-height':'700px'}">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">
                {{formState}} {{ entityName }} <b>-- {{collateralCode}}</b>
            </h2>
        </div>

        <p-tabView [activeIndex]="activeTabIndex" (onChange)="onTabChange($event)">
            <p-tabPanel i18n-header header="Customer Collateral">
                <form novalidate [formGroup]="mainForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group">
                                <label i18n for="collateralTypeId" class="control-label col-md-2">Collateral
                                    Type</label>

                                <div class="col-md-4">
                                    <select (change)="onCollateralTypeChange($event.target.value)" ngModel
                                        [attr.disabled]="disableInput ? '' : null" name="collateralTypeId"
                                        id="collateralTypeId" formControlName="collateralTypeId" class="form-control"
                                        [ngClass]="!mainForm.controls['collateralTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Collateral Type --</option>
                                        <option *ngFor="let x of collateralTypes" [value]="x.collateralTypeId">{{
                                            x.collateralTypeName }}</option>
                                        <!-- <option *ngFor="let x of collateralTypes" [value]="x.collateralTypeId"><strong>{{ x.collateralSubTypeName }}</strong> - {{ x.collateralTypeName }}</option> -->
                                    </select>
                                </div>
                                <label i18n for="collateralSubTypeId" class="control-label col-md-2">
                                    Collateral Sub Type</label>

                                <div class="col-md-4">
                                    <select (change)="onSubTypeChange($event.target.value)" name="collateralSubTypeId"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="collateralSubTypeId"
                                        id="collateralSubTypeId" class="form-control"
                                        [ngClass]="!mainForm.controls['collateralSubTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Sub Type --</option>
                                        <option *ngFor="let x of filteredSubTypes" [value]="x.collateralSubTypeId">{{
                                            x.collateralSubTypeName }}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="collateralCode"
                                    class="control-label col-md-2">{{referenceNumberLabel}}</label>
                                <div class="col-md-4">
                                    <input type="text" (input)=onRefChange() name="collateralCode" maxlength="20"
                                        formControlName="collateralCode" id="collateralCode" class="form-control"
                                        [ngClass]="!mainForm.controls['collateralCode'].valid ? 'required-input' : 'valid-input'">
                                    <!-- <input type="text" (input)=onRefChange() name="collateralCode"
                                        [attr.disabled]="isCollateralCodeVisible ? '' : null" maxlength="20"
                                        formControlName="collateralCode" id="collateralCode" class="form-control"
                                        [ngClass]="!mainForm.controls['collateralCode'].valid ? 'required-input' : 'valid-input'"> -->
                                </div>
                                <label i18n for="haircut" class="control-label col-md-2">Haircut/Shrinkage (%)</label>
                                <div class="col-md-4">
                                    <input [attr.disabled]="true" type="text" maxlength="3" name="haircut"
                                        formControlName="haircut" id="haircut" class="form-control"
                                        [ngClass]="!mainForm.controls['haircut'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="collateralValue" class="control-label col-md-2">Collateral
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" (blur)="getOutstandingBalanceForFixedDepositOrCASA()"
                                        [attr.disabled]="disableInput ? '' : null" name="collateralValue" maxlength="20"
                                        formControlName="collateralValue" formatM id="collateralValue"
                                        class="form-control"
                                        [ngClass]="!mainForm.controls['collateralValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="valuationCycle" class="control-label col-md-2">Valuation Cycle</label>
                                <div class="col-md-4">
                                    <input type="text" name="valuationCycle" [attr.disabled]="true" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="valuationCycle"
                                        formatM id="valuationCycle" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="currencyId" class="control-label col-md-2">Currency</label>
                                <div class="col-md-4">
                                    <select id="currencyId" formControlName="currencyId" name="currencyId"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!mainForm.controls['currencyId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>Select Currency</option>
                                        <option *ngFor="let curr of currencies" value="{{curr.currencyId}}">
                                            {{curr.currencyCode}}
                                            - {{curr.currencyName}}</option>
                                    </select>
                                </div>
                                <label i18n for="collateralSummary" class="control-label col-md-2">Collateral
                                    Summary</label>
                                <div class="col-md-4">

                                    <textarea type="text" name="collateralSummary" [attr.disabled]="true"
                                        maxlength="500" [attr.disabled]="disableInput ? '' : null"
                                        formControlName="collateralSummary" id="collateralSummary" class="form-control"
                                        [ngClass]="!mainForm.controls['collateralSummary'].valid ? 'required-input' : 'valid-input'"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="validTill" class="control-label col-md-2">Valid Till</label>
                                <div class="col-md-4">
                                    <p-calendar id="validTill" formControlName="validTill" [minDate]='currentDate' [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="1920:2050" [showIcon]="true"
                                        [inputStyle]="{'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'z-index': '999'}"
                                        [ngClass]="mainForm.controls['validTill'].valid ? 'valid-input' : 'required-input'">
                                    </p-calendar>
                                </div>
                            </div>
                            <!--<hr />-->
                            <!--bool-->
                            <!-- <div class="form-group">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox-container">
                                        <input formControlName="allowSharing" [attr.disabled]="true" id="allowSharing" type="checkbox">
                                    </div><label i18n class="checkbox">Allow Sharing</label>
                                </div>
                            </div> -->
                            <!-- <div class="form-group">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox-container">
                                        <input formControlName="isLocationBased" [attr.disabled]="true" id="isLocationBased" type="checkbox">
                                    </div><label i18n class="checkbox">Is Location Based</label>
                                </div>
                            </div> -->
                            <!--bool-->
                        </div>
                    </div>
                </form>
            </p-tabPanel>

            <!--sub forms-->

            <p-tabPanel header="{{ selectedCollateralTypeName }} Details" [disabled]="disableSubFormTab"
                [headerStyle]="{'width': '200px'}">
                <form novalidate [formGroup]="securityForm" *ngIf="showSecurityForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="securityType" class="control-label col-md-2">Security Type</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityType" maxlength="100"
                                        formControlName="securityType" id="securityType" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!securityForm.controls['securityType'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="effectiveDate" class="control-label col-md-2">Effective Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="effectiveDate" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="effectiveDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!securityForm.controls['effectiveDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="maturityDate" class="control-label col-md-2">Maturity Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="maturityDate" [minDate]='currentDate' formControlName="maturityDate"
                                        [attr.disabled]="disableInput ? '' : null" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [inputStyle]="!securityForm.controls['maturityDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="dealAmount" class="control-label col-md-2">Deal Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="dealAmount" maxlength="20" formControlName="dealAmount"
                                        [attr.disabled]="disableInput ? '' : null" formatM id="dealAmount"
                                        class="numeric form-control"
                                        [ngClass]="!securityForm.controls['dealAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="securityValue"
                                        [attr.disabled]="true" formatM id="securityValue" class="numeric form-control"
                                        [ngClass]="!securityForm.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="lienUsableAmount" class="control-label col-md-2">Current Liened
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="lienUsableAmount" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="lienUsableAmount"
                                        formatM id="lienUsableAmount" class="numeric form-control"
                                        [ngClass]="!securityForm.controls['lienUsableAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="issuerName" class="control-label col-md-2">Issuer Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="issuerName" maxlength="150" formControlName="issuerName"
                                        [attr.disabled]="disableInput ? '' : null" id="issuerName" class="form-control"
                                        [ngClass]="!securityForm.controls['issuerName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="issuerReferenceNumber" class="control-label col-md-2">Issuer Ref
                                    Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="issuerReferenceNumber" maxlength="50"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="issuerReferenceNumber" id="issuerReferenceNumber"
                                        class="form-control"
                                        [ngClass]="!securityForm.controls['issuerReferenceNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="unitValue" class="control-label col-md-2">Unit Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="unitValue" max="20" formControlName="unitValue" formatM
                                        [attr.disabled]="disableInput ? '' : null" id="unitValue"
                                        class="numeric form-control"
                                        [ngClass]="!securityForm.controls['unitValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="numberOfUnits" class="control-label col-md-2">Number Of Units</label>
                                <div class="col-md-4">
                                    <input type="text" name="numberOfUnits" max="10" formControlName="numberOfUnits"
                                        [attr.disabled]="disableInput ? '' : null" id="numberOfUnits" formatM
                                        class="numeric  form-control"
                                        [ngClass]="!securityForm.controls['numberOfUnits'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="rating" class="control-label col-md-2">Rating</label>
                                <div class="col-md-4">
                                    <input type="text" name="rating" maxlength="5" formControlName="rating" id="rating"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!securityForm.controls['rating'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="interestPaymentFrequency" class="control-label col-md-2">Interest
                                    Payment Frequency</label>
                                <div class="col-md-4">
                                    <input type="text" name="interestPaymentFrequency"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="interestPaymentFrequency" id="interestPaymentFrequency"
                                        class="form-control"
                                        [ngClass]="!securityForm.controls['interestPaymentFrequency'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="fundName" class="control-label col-md-2">Fund/Scheme</label>
                                <div class="col-md-4">
                                    <input type="text" name="fundName" formControlName="fundName" id="fundName"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!securityForm.controls['fundName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="bank" class="control-label col-md-2">Bank</label>
                                <div class="col-md-4">
                                    <input type="text" name="bank" maxlength="500" formControlName="bank" id="remark"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!securityForm.controls['bank'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        [attr.disabled]="disableInput ? '' : null" id="remark" class="form-control"
                                        [ngClass]="!securityForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="propertyForm" *ngIf="showPropertyForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div *ngIf="showAllowedForCollateral" class="col-md-10 offset-md-2">
                                    <label class="control-label">
                                        <h4><b style="color:rebeccapurple"> {{allowedForCollateral}} </b></h4>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="propertyName" class="control-label col-md-2"> Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="propertyName" maxlength="100"
                                        formControlName="propertyName" [attr.disabled]="disableInput ? '' : null"
                                        id="propertyName" class="form-control"
                                        [ngClass]="!propertyForm.controls['propertyName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="countryId" class="control-label col-md-2">Country</label>
                                <div class="col-md-4">
                                    <select name="countryId" formControlName="countryId" id="countryId"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        (change)="getCountry($event.target.value)"
                                        [ngClass]="!propertyForm.controls['countryId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Country --</option>
                                        <option *ngFor="let x of countries" [value]="x.countryId">{{ x.countryName }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="propertyName" class="control-label col-md-2"> State</label>
                                <div class="col-md-4">
                                    <select name="stateId" formControlName="stateId"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="getLocalGovtById($event.target.value)"
                                        [ngClass]="!propertyForm.controls['stateId'].valid ? 'required-input' : 'valid-input'"
                                        id="stateId" class="form-control">
                                        <option value="">--- Select State ---</option>
                                        <option *ngFor="let state of states" value="{{state.stateId}}">
                                            {{state.stateName}}
                                        </option>
                                    </select>
                                </div>
                                <label i18n for="localGovernmentId" class="control-label col-md-2">Local Govt</label>
                                <div class="col-md-4">
                                    <select name="localGovernmentId" (change)="getCityByLocalGovt($event.target.value)"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="localGovernmentId"
                                        [ngClass]="!propertyForm.controls['localGovernmentId'].valid ? 'required-input' : 'valid-input'"
                                        id="localGovernmentId" class="form-control">
                                        <option value="" i18n>--- Select LGA ---</option>
                                        <option *ngFor="let item of localGovt" value="{{item.localGovernmentId}}">
                                            {{item.localGovtName}}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="constructionDate" class="control-label col-md-2">Construction
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="constructionDate" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="constructionDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!propertyForm.controls['constructionDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible' }"></p-calendar>
                                </div>
                                <label i18n for="cityId" class="control-label col-md-2">City/Location</label>
                                <div class="col-md-4">
                                    <select name="cityId" formControlName="cityId"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="onAllowedCollateral($event.target.value)" id="cityId"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['cityId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select City --</option>
                                        <option *ngFor="let x of cities" [value]="x.cityId">{{ x.cityName }}</option>
                                    </select>
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="propertyAddress" class="control-label col-md-2">Property
                                    Address</label>
                                <div class="col-md-4">
                                    <input type="text" name="propertyAddress" maxlength="500"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="propertyAddress"
                                        id="propertyAddress" class="form-control"
                                        [ngClass]="!propertyForm.controls['propertyAddress'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="dateOfAcquisition" class="control-label col-md-2">Date Of
                                    Acquisition</label>
                                <div class="col-md-4">
                                    <p-calendar id="dateOfAcquisition" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="dateOfAcquisition"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!propertyForm.controls['dateOfAcquisition'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible' }"></p-calendar>
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="lastValuationDate" class="control-label col-md-2">Last Valuation
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="lastValuationDate" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="lastValuationDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true" (onSelect)="calculateLastValuationDate($event)"
                                        [inputStyle]="!propertyForm.controls['lastValuationDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="valuerId" class="control-label col-md-2">Next Valuation Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="nextValuationDate" showOn="none" disabled="disabled"
                                        formControlName="nextValuationDate" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [(ngModel)]="nextValuationDate" [attr.disabled]="true"
                                        [inputStyle]="!propertyForm.controls['nextValuationDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="valuerId" class="control-label col-md-2">Valuer</label>
                                <div class="col-md-4">
                                    <select name="valuerId" formControlName="valuerId" id="valuerId"
                                        (change)="onSelectValuerChange($event.target.value)"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!propertyForm.controls['valuerId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="0" i18n>-- Select Valuer --</option>
                                        <option *ngFor="let x of valuers" [value]="x.collateralValuerId">{{ x.name }}
                                        </option>
                                    </select>
                                </div>

                            </div>
                            <div class="form-group" *ngIf="showValuerInfo" id="valuerInfo">
                                <label i18n for="valuerName" class="control-label col-md-2">Valuer Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="valuerName" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="valuerName"
                                        id="valuerName" class="form-control"
                                        [ngClass]="!propertyForm.controls['valuerName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="valuerAccountNumber" class="control-label col-md-2">Valuer Account
                                    No</label>
                                <div class="col-md-4">
                                    <input type="text" name="valuerAccountNumber" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="valuerAccountNumber"
                                        id="valuerAccountNumber" class="form-control"
                                        [ngClass]="!propertyForm.controls['valuerAccountNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="valuationAmount" class="control-label col-md-2">Valuation
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="valuationAmount" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="valuationAmount"
                                        id="valuationAmount" formatM class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['valuationAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="valuerReferenceNumber" class="control-label col-md-2">Valuer Reference
                                    Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="valuerReferenceNumber" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="valuerReferenceNumber" id="valuerReferenceNumber"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['valuerReferenceNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="propertyValueBaseTypeId" class="control-label col-md-2">Property Base
                                    Type</label>
                                <div class="col-md-4">
                                    <select name="propertyValueBaseTypeId" formControlName="propertyValueBaseTypeId"
                                        [attr.disabled]="disableInput ? '' : null" id="propertyValueBaseTypeId"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['propertyValueBaseTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="">-- Select Property Value Base --</option>
                                        <option *ngFor="let x of valueBaseTypes" [value]="x.collateralValueBaseTypeId">
                                            {{
                                            x.valueBaseTypeName }}</option>
                                    </select>
                                </div>
                                <label i18n for="openMarketValue" class="control-label col-md-2">Open Market
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="openMarketValue" formControlName="openMarketValue"
                                        [attr.disabled]="disableInput ? '' : null" id="openMarketValue" formatM
                                        class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['openMarketValue'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="forcedSaleValue" class="control-label col-md-2">Forced Sale
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="forcedSaleValue" maxlength="=20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="forcedSaleValue"
                                        id="forcedSaleValue" formatM class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['forcedSaleValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="stampToCover" class="control-label col-md-2">Stamp To Cover</label>
                                <div class="col-md-4">
                                    <input type="text" name="stampToCover" maxlength="10" formControlName="stampToCover"
                                        [attr.disabled]="disableInput ? '' : null" id="stampToCover"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['stampToCover'].valid ? 'required-input' : 'valid-input'">
                                </div>


                            </div>
                            <div class="form-group">
                                <label i18n for="estimatedValue" class="control-label col-md-2">Estimated Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="estimatedValue" maxlength="=20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="estimatedValue"
                                        id="estimatedValue" formatM class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['estimatedValue'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="securityValue"
                                        [attr.disabled]="true" id="securityValue" formatM class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="perfectionStatusId" class="control-label col-md-2">Perfection
                                    Status</label>
                                <div class="col-md-4">
                                    <select name="perfectionStatusId" formControlName="perfectionStatusId"
                                        [attr.disabled]="disableInput ? '' : null" id="perfectionStatusId"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['perfectionStatusId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Perfection Status --</option>
                                        <option *ngFor="let x of CollateralPerfectionList"
                                            [value]="x.perfectionStatusId">{{
                                            x.perfectionStatusName }}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="isOwnerOccupied" class="control-label col-md-2">Is Owner
                                    Occupied</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="isOwnerOccupied" (change)="isOwnerOccupiedChanged($event)"
                                        id="isOwnerOccupied" [attr.disabled]="disableInput ? '' : null" type="checkbox">
                                </div>
                                <label i18n for="isResidential" class="control-label col-md-2">Is Residential</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="isResidential" (change)="isResidentialChanged($event)"
                                        id="isResidential" [attr.disabled]="disableInput ? '' : null" type="checkbox">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <label i18n for="latitude" class="control-label col-md-2">Latitude</label>
                                <div class="col-md-4">
                                    <input type="number" [(ngModel)]="latitude" maxlength="10" name="latitude"
                                        formControlName="latitude" id="latitude" class=" numeric form-control"
                                        [ngClass]="!propertyForm.controls['latitude'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="longitude" class="control-label col-md-2">Longitude</label>
                                <div class="col-md-4">
                                    <div class="input-group">
                                        <input type="number" [(ngModel)]="longitude" maxlength="10" name="longitude"
                                            formControlName="longitude" id="longitude" class=" numeric form-control"
                                            [ngClass]="!propertyForm.controls['longitude'].valid ? 'required-input' : 'valid-input'">
                                        <span class="input-group-btn">
                                            <button type="button" (click)="ViewMap()" class="btn btn-success pull-right">View Map</button>
                                        </span>
                                    </div>

                                </div>
                            </div> -->

                            <div class="form-group">

                                <label i18n for="perfectionStatusReason" class="control-label col-md-2">Reason for Non
                                    Perfection</label>
                                <div class="col-md-4">
                                    <input type="text" name="perfectionStatusReason" maxlength="200"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="perfectionStatusReason" id="perfectionStatusReason"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['perfectionStatusReason'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="bankShareOfCollateral" class="control-label col-md-2">
                                    Bank Share of Collateral (FSV)</label>
                                <div class="col-md-4">
                                    <input type="text" name="bankShareOfCollateral" maxlength="20" formatM
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="bankShareOfCollateral" id="bankShareOfCollateral"
                                        class="numeric form-control"
                                        [ngClass]="!propertyForm.controls['bankShareOfCollateral'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="isAssetPledgedByThirdParty" class="control-label col-md-2">
                                    Is Asset Pledged By a Third Party</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container col-md-4">
                                        <input formControlName="isAssetPledgedByThirdParty"
                                            [attr.disabled]="disableInput ? '' : null"
                                            (change)="onSelectOfAssetPledged($event.target.checked)"
                                            id="isAssetPledgedByThirdParty" type="checkbox">
                                    </div>
                                </div>
                                <label i18n for="thirdPartyName" class="control-label col-md-2">Third Party Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="thirdPartyName" maxlength="100"
                                        [attr.disabled]="disableThirdPartyName ? true : null"
                                        formControlName="thirdPartyName" id="thirdPartyName" class="form-control"
                                        [ngClass]="!propertyForm.controls['thirdPartyName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">

                                <label i18n for="isAssetManagedByTrustee" class="control-label col-md-2">
                                    Is Asset Managed By a Trustee</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container col-md-4">
                                        <input formControlName="isAssetManagedByTrustee" id="isAssetManagedByTrustee"
                                            [attr.disabled]="disableInput ? '' : null"
                                            (change)="onSelectOfAssetManageByTrustee($event.target.checked)"
                                            type="checkbox">
                                    </div>
                                </div>
                                <label i18n for="trusteeName" class="control-label col-md-2">Trustee Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="trusteeName" maxlength="100" formControlName="trusteeName"
                                        [attr.disabled]="disableTrusteeName ? true : null" id="trusteeName"
                                        class="form-control"
                                        [ngClass]="!propertyForm.controls['trusteeName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        [attr.disabled]="disableInput ? '' : null" id="remark" class="form-control"
                                        [ngClass]="!propertyForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="equipmentForm" *ngIf="showEquipmentForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="machineName" class="control-label col-md-2">Machine Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="machineName" maxlength="200" formControlName="machineName"
                                        [attr.disabled]="disableInput ? '' : null" id="machineName" class="form-control"
                                        [ngClass]="!equipmentForm.controls['machineName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="description" class="control-label col-md-2">Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="description" maxlength="500" formControlName="description"
                                        [attr.disabled]="disableInput ? '' : null" id="description" class="form-control"
                                        [ngClass]="!equipmentForm.controls['description'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="machineNumber" class="control-label col-md-2">Machine Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="machineNumber" maxlength="50"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="machineNumber"
                                        id="machineNumber" class="form-control"
                                        [ngClass]="!equipmentForm.controls['machineNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="manufacturerName" class="control-label col-md-2">Manufacturer
                                    Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="manufacturerName" maxlength="200"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="manufacturerName"
                                        id="manufacturerName" class="form-control"
                                        [ngClass]="!equipmentForm.controls['manufacturerName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>


                            <div class="form-group">
                                <label i18n for="yearOfManufacture" class="control-label col-md-2">Year Of
                                    Manufacture</label>
                                <div class="col-md-4">
                                    <input type="number" name="yearOfManufacture" minlength="4" maxlength="4"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="yearOfManufacture"
                                        id="yearOfManufacture" class="form-control numeric"
                                        [ngClass]="!equipmentForm.controls['yearOfManufacture'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="yearOfPurchase" class="control-label col-md-2">Year Of Purchase</label>
                                <div class="col-md-4">
                                    <input type="number" name="yearOfPurchase" minlength="4" maxlength="4"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="yearOfPurchase"
                                        id="yearOfPurchase" class="form-control numeric"
                                        [ngClass]="!equipmentForm.controls['yearOfPurchase'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="valueBaseTypeId" class="control-label col-md-2">Value Base Type</label>
                                <div class="col-md-4">
                                    <select name="valueBaseTypeId" formControlName="valueBaseTypeId"
                                        id="valueBaseTypeId" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!equipmentForm.controls['valueBaseTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="">-- Select Value Base --</option>
                                        <option *ngFor="let x of valueBaseTypes" [value]="x.collateralValueBaseTypeId">
                                            {{
                                            x.valueBaseTypeName }}</option>
                                    </select>
                                </div>
                                <label i18n for="machineCondition" class="control-label col-md-2">Machine
                                    Condition</label>
                                <div class="col-md-4">
                                    <input type="text" name="machineCondition" maxlength="100"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="machineCondition"
                                        id="machineCondition" class="form-control"
                                        [ngClass]="!equipmentForm.controls['machineCondition'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="machineryLocation" class="control-label col-md-2">Machine
                                    Location</label>
                                <div class="col-md-4">
                                    <input type="text" name="machineryLocation" maxlength="200"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="machineryLocation"
                                        id="machineryLocation" class="form-control"
                                        [ngClass]="!equipmentForm.controls['machineryLocation'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="replacementValue" class="control-label col-md-2">Replacement
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="replacementValue" maxlength="20" id="replacementValue"
                                        formControlName="replacementValue" formatM class="numeric form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!equipmentForm.controls['replacementValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="equipmentSize" class="control-label col-md-2">Equipment Size</label>
                                <div class="col-md-4">
                                    <input type="text" name="equipmentSize" maxlength="50"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="equipmentSize"
                                        id="equipmentSize" class="form-control"
                                        [ngClass]="!equipmentForm.controls['equipmentSize'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="intendedUse" class="control-label col-md-2">Intended Use</label>
                                <div class="col-md-4">
                                    <input type="text" name="intendedUse" maxlength="20" formControlName="intendedUse"
                                        id="intendedUse" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!equipmentForm.controls['intendedUse'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        id="remark" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!equipmentForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="guaranteeForm" *ngIf="showGuaranteeForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group" [hidden]="personal">
                                <label i18n for="firstName" class="control-label col-md-2"> First Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="firstName" maxlength="50" formControlName="firstName"
                                        id="firstName" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['firstName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="middleName" class="control-label col-md-2"> Middle Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="middleName" maxlength="50" formControlName="middleName"
                                        id="middleName" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['middleName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group" [hidden]="personal">
                                <label i18n for="lastName" class="control-label col-md-2"> Last Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="lastName" maxlength="50" formControlName="lastName"
                                        id="lastName" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['lastName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="bvn" class="control-label col-md-2"> BVN</label>
                                <div class="col-md-4">
                                    <input type="text" name="bvn" formControlName="bvn" maxlength="12" id="bvn"
                                        class="form-control numeric" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['bvn'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>

                            <div class="form-group" [hidden]="corporate">
                                <label i18n for="institutionName" class="control-label col-md-2"> Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="institutionName" maxlength="100"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="institutionName"
                                        id="institutionName" class="form-control"
                                        [ngClass]="!guaranteeForm.controls['institutionName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="rcNumber" class="control-label col-md-2">{{rcName}}</label>
                                <div class="col-md-4">
                                    <input type="text" name="rcNumber" maxlength="20" formControlName="rcNumber"
                                        id="rcNumber" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['rcNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="phoneNumber1" class="control-label col-md-2"> Phone Number 1</label>
                                <div class="col-md-4">
                                    <input type="text" name="phoneNumber1" 
                                        formControlName="phoneNumber1" id="phoneNumber1" class="form-control" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['phoneNumber1'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="phoneNumber2" class="control-label col-md-2"> Phone Number 2</label>
                                <div class="col-md-4">
                                    <input type="text" name="phoneNumber2"
                                        formControlName="phoneNumber2" id="phoneNumber2" maxlength="20"
                                        class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['phoneNumber2'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="guarantorAddress" class="control-label col-md-2"> Address</label>
                                <div class="col-md-4">
                                    <input type="text" name="guarantorAddress" maxlength="500"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="guarantorAddress"
                                        id="guarantorAddress" class="form-control"
                                        [ngClass]="!guaranteeForm.controls['guarantorAddress'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="taxNumber" class="control-label col-md-2"> Tax Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="taxNumber" formControlName="taxNumber" id="taxNumber"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['taxNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="relationship" class="control-label col-md-2"> Relationship</label>
                                <div class="col-md-4">
                                    <input type="text" name="relationship" maxlength="50" formControlName="relationship"
                                        id="relationship" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['relationship'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="relationshipDuration" class="control-label col-md-2">Relationship
                                    Duration</label>
                                <div class="col-md-4">
                                    <input type="text" name="relationshipDuration" maxlength="10"
                                        formControlName="relationshipDuration" id="relationshipDuration"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['relationshipDuration'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="emailAddress" class="control-label col-md-2"> Email Address</label>
                                <div class="col-md-4">
                                    <input type="email" name="emailAddress" formControlName="emailAddress"
                                        id="emailAddress" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!guaranteeForm.controls['emailAddress'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="guaranteeValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="guaranteeValue" formControlName="guaranteeValue"
                                        [attr.disabled]="true" id="guaranteeValue" class="form-control"
                                        [ngClass]="!guaranteeForm.controls['guaranteeValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="cStartDate" class="control-label col-md-2">Start Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="cStartDate" [maxDate]='currentDate' formControlName="cStartDate"
                                        [attr.disabled]="disableInput ? '' : null" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [inputStyle]="!guaranteeForm.controls['cStartDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="endDate" class="control-label col-md-2">End Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="endDate" [minDate]='currentDate' formControlName="endDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [attr.disabled]="disableInput ? '' : null" [showIcon]="true"
                                        [inputStyle]="!guaranteeForm.controls['endDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" formControlName="remark" id="remark"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!guaranteeForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                                <hr />
                                <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                    <label i18n for="remark" class="control-label col-md-2">Defer Insurance
                                        Policy</label>
                                    <div class="checkbox-container col-md-4">
                                        <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                            [attr.disabled]="disableInput ? '' : null"
                                            (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="form-group" [hidden]="!enabledJoinCollaterGuarantee"
                            style="max-height: 100px; overflow:auto">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th i18n *ngIf="showPersonalCollateralGuaranteeTableColumn ? true : false">First
                                            Name</th>
                                        <th i18n *ngIf="showPersonalCollateralGuaranteeTableColumn ? true : false">Last
                                            Name
                                        </th>
                                        <th i18n *ngIf="showPersonalCollateralGuaranteeTableColumn ? false : true">Name
                                        </th>
                                        <th i18n *ngIf="showPersonalCollateralGuaranteeTableColumn ? false : true">RC
                                            Number
                                        </th>
                                        <th i18n>Phone Number</th>
                                        <th i18n>Relationship</th>
                                        <th i18n>Start Date</th>
                                        <th i18n>End Date</th>
                                        <th></th>
                                    </tr>

                                </thead>
                                <tbody>
                                    <tr *ngFor="let p of garanteeList;let indx=index">

                                        <td *ngIf="showPersonalCollateralGuaranteeTableColumn ? true : false">
                                            {{p.firstName}}
                                        </td>
                                        <td *ngIf="showPersonalCollateralGuaranteeTableColumn ? true : false">
                                            {{p.lastName}}
                                        </td>
                                        <td *ngIf="showPersonalCollateralGuaranteeTableColumn ? false : true">
                                            {{p.institutionName}}
                                        </td>
                                        <td *ngIf="showPersonalCollateralGuaranteeTableColumn ? false : true">
                                            {{p.rcNumber}}
                                        </td>
                                        <td>
                                            {{p.phoneNumber1}}
                                        </td>
                                        <td>
                                            {{p.relationship}}
                                        </td>
                                        <td>
                                            {{p.cStartDate | date}}
                                        </td>
                                        <td>
                                            {{p.endDate | date}}
                                        </td>
                                        <td>
                                            {{p.endDate | date}}
                                        </td>
                                        <!-- <td>
                                            <label i18n (click)="ViewCollateralGuaranteeDocument(p.targetId)" class="control-label">View</label>
                                        </td> -->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- <p-dataTable [value]="garanteeList" [responsive]=true [paginator]="false" [rows]="3" >
                            <p-column i18n-header field="firstName" header="First Name" filterMatchMode="contains" ></p-column>
                            <p-column i18n-header field="lastName" header="Last Name" filterMatchMode="contains" ></p-column>
                            <p-column i18n-header field="phoneNumber1" header="phone Number" filterMatchMode="contains"></p-column>
                            <p-column i18n-header field="relationship" header="Relationship" filterMatchMode="contains" ></p-column>
                            <p-column i18n-header field="cStartDate" header="Start Date" filterMatchMode="contains"></p-column>
                            <p-column i18n-header field="endDate" header="end Date" filterMatchMode="contains"></p-column>
                        </p-dataTable> -->
                    </div>
                </form>

                <form novalidate [formGroup]="policyForm" *ngIf="showPolicyForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="insuranceCompanyName" class="control-label col-md-2">Insurance Company
                                    Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="insuranceCompanyName" maxlength="100"
                                        formControlName="insuranceCompanyName" id="insuranceCompanyName"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!policyForm.controls['insuranceCompanyName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="policyinsuranceType" class="control-label col-md-2">Insurance
                                    Type</label>
                                <div class="col-md-4">
                                    <input type="text" name="policyinsuranceType" maxlength="50"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="policyinsuranceType"
                                        id="policyinsuranceType" class="form-control"
                                        [ngClass]="!policyForm.controls['policyinsuranceType'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="insurancePolicyNumber" class="control-label col-md-2">Insurance Policy
                                    Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="insurancePolicyNumber" maxlength="100"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="insurancePolicyNumber" id="insurancePolicyNumber"
                                        class="form-control"
                                        [ngClass]="!policyForm.controls['insurancePolicyNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="insurerDetails" class="control-label col-md-2">Insurance Detail</label>
                                <div class="col-md-4">
                                    <input type="text" name="insurerDetails" maxlength="50"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="insurerDetails"
                                        id="insurerDetails" class="form-control"
                                        [ngClass]="!policyForm.controls['insurerDetails'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="insurerAddress" class="control-label col-md-2">Insurer Address</label>
                                <div class="col-md-4">
                                    <input type="text" name="insurerAddress" maxlength="200"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="insurerAddress"
                                        id="insurerAddress" class="form-control"
                                        [ngClass]="!policyForm.controls['insurerAddress'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="policyStartDate" class="control-label col-md-2">Policy Start
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="policyStartDate" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="policyStartDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!policyForm.controls['policyStartDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="assignDate" class="control-label col-md-2">Assign Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="assignDate" [maxDate]='currentDate' formControlName="assignDate"
                                        [attr.disabled]="disableInput ? '' : null" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!policyForm.controls['assignDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                                <label i18n for="policyRenewalDate" class="control-label col-md-2">Policy Renewal
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="policyRenewalDate" [minDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="policyRenewalDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true" [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!policyForm.controls['policyRenewalDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                            </div>

                            <div class="form-group">

                                <label i18n for="policyAmount" class="control-label col-md-2">Policy Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="policyAmount" maxlength="20" [attr.disabled]="true"
                                        formControlName="policyAmount" id="policyAmount" class="form-control"
                                        [ngClass]="!policyForm.controls['policyAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="premiumAmount" class="control-label col-md-2">Premium Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="premiumAmount" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="premiumAmount"
                                        id="premiumAmount" class="form-control numeric" formatM
                                        [ngClass]="!policyForm.controls['premiumAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">

                                <label i18n for="renewalFrequencyTypeId" class="control-label col-md-2">Renewal
                                    Frequency</label>
                                <div class="col-md-4">
                                    <select name="renewalFrequencyTypeId" formControlName="renewalFrequencyTypeId"
                                        id="renewalFrequencyTypeId" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!policyForm.controls['renewalFrequencyTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="" i18n>-- Select Renewal Frequency Type --</option>
                                        <option *ngFor="let x of frequencyTypes" [value]="x.lookupId">{{ x.lookupName
                                            }}</option>
                                    </select>
                                </div>
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        id="remark" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!policyForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="vehicleForm" *ngIf="showVehicleForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="vehicleType" class="control-label col-md-2">Vehicle Type</label>
                                <div class="col-md-4">
                                    <input type="text" name="vehicleType" formControlName="vehicleType" id="vehicleType"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['vehicleType'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="vehicleStatus" class="control-label col-md-2">Vehicle Status</label>
                                <div class="col-md-4">
                                    <input type="text" name="vehicleStatus" formControlName="vehicleStatus"
                                        id="vehicleStatus" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['vehicleStatus'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="vehicleMake" class="control-label col-md-2">Vehicle Make</label>
                                <div class="col-md-4">
                                    <input type="text" name="vehicleMake" formControlName="vehicleMake" id="vehicleMake"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['vehicleMake'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="modelName" class="control-label col-md-2">Model Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="modelName" formControlName="modelName" id="modelName"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['modelName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="dateOfManufacture" class="control-label col-md-2">Manufactured
                                    Date</label>
                                <div class="col-md-4">

                                    <p-calendar id="dateOfManufacture" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="dateOfManufacture"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030"
                                        [showIcon]="true"
                                        [inputStyle]="!vehicleForm.controls['dateOfManufacture'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>

                                    <!-- <p-calendar id="dateOfManufacture" formControlName="dateOfManufacture" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" [showIcon]="true" [inputStyle]="!vehicleForm.controls['dateOfManufacture'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>

                                     <input type="text" name="manufacturedDate" formControlName="manufacturedDate" id="manufacturedDate" class="form-control" [ngClass]="!vehicleForm.controls['manufacturedDate'].valid ? 'required-input' : 'valid-input'"> -->
                                </div>
                                <label i18n for="registrationNumber" class="control-label col-md-2">Registration
                                    Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="registrationNumber" formControlName="registrationNumber"
                                        id="registrationNumber" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['registrationNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="serialNumber" class="control-label col-md-2">Serial Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="serialNumber" formControlName="serialNumber"
                                        id="serialNumber" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['serialNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="chasisNumber" class="control-label col-md-2">Chasis Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="chasisNumber" formControlName="chasisNumber"
                                        id="chasisNumber" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['chasisNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="engineNumber" class="control-label col-md-2">Engine Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="engineNumber" formControlName="engineNumber"
                                        id="engineNumber" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['engineNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="nameOfOwner" class="control-label col-md-2">Name Of Owner</label>
                                <div class="col-md-4">
                                    <input type="text" name="nameOfOwner" formControlName="nameOfOwner" id="nameOfOwner"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['nameOfOwner'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="registrationCompany" class="control-label col-md-2">Registration
                                    Company</label>
                                <div class="col-md-4">
                                    <input type="text" name="registrationCompany" formControlName="registrationCompany"
                                        id="registrationCompany" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['registrationCompany'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="resaleValue" class="control-label col-md-2">Resale Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="resaleValue" formControlName="resaleValue" formatM
                                        id="resaleValue" class="numeric form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['resaleValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="valuationDate" class="control-label col-md-2">Valuation Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="valuationDate" [maxDate]='currentDate'
                                        [attr.disabled]="disableInput ? '' : null" formControlName="valuationDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!vehicleForm.controls['valuationDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="lastValuationAmount" class="control-label col-md-2">Last Valuation
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="lastValuationAmount" formControlName="lastValuationAmount"
                                        [attr.disabled]="disableInput ? '' : null" formatM id="lastValuationAmount"
                                        class="numeric form-control"
                                        [ngClass]="!vehicleForm.controls['lastValuationAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="invoiceValue" class="control-label col-md-2">Invoice Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="invoiceValue" formControlName="invoiceValue" formatM
                                        id="invoiceValue" class="numeric form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['invoiceValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" formControlName="remark" id="remark"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!vehicleForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="preciousMetalForm" *ngIf="showPreciousMetalForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group">
                                <label i18n for="metalType" class="control-label col-md-2"> Metal Type</label>
                                <div class="col-md-4">
                                    <input type="text" name="metalType" formControlName="metalType" id="metalType"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!preciousMetalForm.controls['metalType'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="preciousMetalName" class="control-label col-md-2">Precious Metal
                                    Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="preciousMetalName" maxlength="100"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="preciousMetalName"
                                        id="preciousMetalName" class="form-control"
                                        [ngClass]="!preciousMetalForm.controls['preciousMetalName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="weightInGrammes" class="control-label col-md-2">Weight In
                                    Grammes</label>
                                <div class="col-md-4">
                                    <input type="text" name="weightInGrammes" maxlength="10"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="weightInGrammes"
                                        id="weightInGrammes" class="form-control"
                                        [ngClass]="!preciousMetalForm.controls['weightInGrammes'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="metalValuationAmount" class="control-label col-md-2">Valuation
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="metalValuationAmount" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="metalValuationAmount" id="metalValuationAmount" formatM
                                        class="numeric form-control"
                                        [ngClass]="!preciousMetalForm.controls['metalValuationAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="metalUnitRate" class="control-label col-md-2">Unit Rate</label>
                                <div class="col-md-4">
                                    <input type="text" name="metalUnitRate" maxlength="5"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="metalUnitRate"
                                        id="metalUnitRate" class="form-control"
                                        [ngClass]="!preciousMetalForm.controls['metalUnitRate'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="preciousMetalFrm" class="control-label col-md-2">Precious Metal
                                    Form</label>
                                <div class="col-md-4">
                                    <input type="text" name="preciousMetalFrm" maxlength="100"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="preciousMetalFrm"
                                        id="preciousMetalFrm" class="form-control"
                                        [ngClass]="!preciousMetalForm.controls['preciousMetalFrm'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        id="remark" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!preciousMetalForm.controls['remark'].valid ? 'required-input' : 'valid-input'">

                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->

                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="depositForm" *ngIf="showDepositForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="accountName" class="control-label col-md-2">Account Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountName" [readonly]="true"
                                        formControlName="accountName" formatM id="accountName" class="form-control"
                                        [ngClass]="!depositForm.controls['accountName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="accountNumber" class="control-label col-md-2">Account Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNumber" [readonly]="true"
                                        formControlName="accountNumber" id="accountNumber" class="form-control"
                                        [ngClass]="!depositForm.controls['accountNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="effectiveDate" class="control-label col-md-2">Effective Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="effectiveDate" [maxDate]='currentDate'
                                        formControlName="effectiveDate" [monthNavigator]="true" [yearNavigator]="true"
                                        yearRange="2000:2050" [showIcon]="true"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [inputStyle]="!depositForm.controls['effectiveDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="maturityDate" class="control-label col-md-2">Maturity Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="maturityDate" [minDate]='currentDate' formControlName="maturityDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true" [attr.disabled]="disableInput ? '' : null"
                                        [inputStyle]="!depositForm.controls['maturityDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" [readonly]="true"
                                        formControlName="securityValue" formatM id="securityValue" class="form-control"
                                        [ngClass]="!depositForm.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="lienAmount" class="control-label col-md-2">Current Liened
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="lienAmount" maxlength="40" formControlName="lienAmount"
                                        [readonly]="true" formatM id="lienAmount" class="form-control"
                                        [ngClass]="!depositForm.controls['lienAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="availableBalance" class="control-label col-md-2">Available
                                    Balance</label>
                                <div class="col-md-4">
                                    <input type="text" name="availableBalance" [readonly]="true"
                                        formControlName="availableBalance" formatM id="availableBalance"
                                        class="form-control"
                                        [ngClass]="!depositForm.controls['availableBalance'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="bank" class="control-label col-md-2">Bank</label>
                                <div class="col-md-4">
                                    <input type="text" name="bank" maxlength="100" formControlName="bank" id="bank"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control"
                                        [ngClass]="!depositForm.controls['bank'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        id="remark" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!depositForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        [attr.disabled]="disableInput ? '' : null"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="casaForm" *ngIf="showCasaForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="accountNumber" class="control-label col-md-2">Account Number</label>
                                <div class="col-md-4">
                                    <input type="number" name="accountNumber" maxlength="10" [attr.disabled]="true"
                                        formControlName="accountNumber" id="accountNumber" class="form-control"
                                        [ngClass]="!casaForm.controls['accountNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="accountName" class="control-label col-md-2">Account Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountName" formControlName="accountName" formatM
                                        id="accountName" [attr.disabled]="true" class="form-control"
                                        [ngClass]="!casaForm.controls['accountName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" formControlName="securityValue" formatM
                                        id="securityValue" [attr.disabled]="true" class="form-control"
                                        [ngClass]="!casaForm.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="lienAmount" class="control-label col-md-2">Current Liened
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="lienAmount" formControlName="lienAmount" formatM
                                        id="lienAmount" [attr.disabled]="true" class="form-control"
                                        [ngClass]="!casaForm.controls['lienAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="availableBalance" class="control-label col-md-2">Available
                                    Balance</label>
                                <div class="col-md-4">
                                    <input type="text" name="availableBalance" [attr.disabled]="true"
                                        formControlName="availableBalance" formatM id="availableBalance"
                                        class="form-control"
                                        [ngClass]="!casaForm.controls['availableBalance'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" maxlength="500" formControlName="remark"
                                        id="remark" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!casaForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <label i18n for="existingLienAmount" class="control-label col-md-2">Maturity Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="existingLienAmount" formControlName="existingLienAmount" formatM id="existingLienAmount" class="form-control" [ngClass]="!depositForm.controls['existingLienAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div> -->
                            <!-- <div class="form-group">
                                <div class="col-md-2">
                                </div>
                                <div class="col-md-4">
                                    <div class="checkbox-container">
                                        <input formControlName="isOwnedByCustomer" id="isOwnedByCustomer" type="checkbox">
                                    </div><label i18n class="checkbox">Owned By Customer</label>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="stockForm" *ngIf="showStockForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group">
                                <label i18n for="companyName" class="control-label col-md-2">Company</label>
                                <div class="col-md-4">
                                    <select (change)="getStockValue($event.target.value)" (blur)="calculateStockPrice()"
                                        [attr.disabled]="disableInput ? '' : null" name="stockId" id="stockId"
                                        class="form-control" formControlName="stockId">

                                        <option value="">-- Select Symbol --</option>
                                        <option *ngFor="let x of stockPriceList" [value]="x.stockId">
                                            {{x.stockCode}} - {{x.stockName}}
                                        </option>
                                    </select>
                                </div>
                                <label i18n for="shareQuantity" class="control-label col-md-2">Share Quantity</label>
                                <div class="col-md-4">
                                    <input type="text" (blur)="calculateStockPrice()" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" name="shareQuantity" formatM
                                        formControlName="shareQuantity" id="shareQuantity" class="form-control numeric"
                                        [ngClass]="!stockForm.controls['shareQuantity'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="marketPrice" class="control-label col-md-2">Market Price</label>
                                <div class="col-md-4">
                                    <input type="text" name="marketPrice" maxlength="20" [attr.disabled]="true"
                                        (blur)="calculateStockPrice()" formControlName="marketPrice" id="marketPrice"
                                        class="form-control"
                                        [ngClass]="!stockForm.controls['marketPrice'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="amount" class="control-label col-md-2">Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="amount" maxlength="20" [attr.disabled]="true"
                                        formControlName="amount" id="amount" class="form-control"
                                        [ngClass]="!stockForm.controls['amount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="sharesSecurityValue" class="control-label col-md-2">Security
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="sharesSecurityValue" maxlength="20"
                                        [attr.disabled]="disableInput ? '' : null" formControlName="sharesSecurityValue"
                                        [attr.disabled]="true" id="sharesSecurityValue" class="form-control"
                                        [ngClass]="!stockForm.controls['sharesSecurityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="sharesSecurityValue" class="control-label col-md-2"></label>
                                <div class="col-md-4">
                                    <button type="button" (click)="AddStockValue()"
                                        class="btn btn-success pull-right">Add</button>
                                </div>
                                <label i18n for="shareValueAmountToUse" class="control-label col-md-2">Total
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="shareValueAmountToUse" (blur)="ValidateInputAmount()"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="shareValueAmountToUse" id="shareValueAmountToUse"
                                        class="form-control"
                                        [ngClass]="!stockForm.controls['shareValueAmountToUse'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                
                <form novalidate [formGroup]="miscellaneousForm" *ngIf="showMiscellaneousForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">

                            <div class="form-group">
                                <label i18n for="securityName" class="control-label col-md-2">Name of Security</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityName" formControlName="securityName"
                                        id="securityName" class="form-control"
                                        [ngClass]="!miscellaneousForm.controls['securityName'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" formControlName="securityValue" formatM
                                        id="securityValue" class="form-control" [attr.disabled]="true"
                                        [ngClass]="!miscellaneousForm.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="remark" class="control-label col-md-2">NOTE:</label>
                                <div class="col-md-4">
                                    <input type="text" name="note" maxlength="500" formControlName="note" id="remark"
                                        class="form-control"
                                        [ngClass]="!miscellaneousForm.controls['note'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <!-- <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div> -->
                            </div>
                            <fieldset>
                                <legend>
                                    <a style="text-decoration: none;" href="#" (click)="createNoteField($event)"><i
                                            class="glyphicon glyphicon-plus"></i> <span i18n>Add New</span></a>
                                </legend>

                                <!--dynamic controls-->
                                <div formArrayName="notes">

                                    <!--<div *ngFor="let x of miscellaneousForm.controls.notes.controls; let i=index">
                                    <div [formGroupName]="i">
                                        <label i18n class="control-label col-md-2">{{ x.value.labelName }}</label>
                                        <div class="col-md-4">
                                            <input type="text" formControlName="controlName" class="form-control">
                                        </div>
                                    </div>-->

                                    <div class="form-group" *ngFor="let i of inputRows">
                                        <!-- <div
                                            *ngFor="let x of miscellaneousForm.controls.notes.controls | slice:(i*2):(i+1)*2; let n=index">
                                            <div [formGroupName]="n">
                                                <label i18n class="control-label col-md-2">{{ x.value.labelName }}</label>
                                                <div class="col-md-4">
                                                    <input type="text" formControlName="labelValue" class="form-control"
                                                        id="controlName" name="controlName">
                                                </div>
                                            </div>
                                        </div> -->
                                    </div>

                                    <!--</div>-->
                                </div>
                                <!--dynamic controls end-->

                            </fieldset>

                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="promissoryForm" *ngIf="showPromissoryForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">

                                <label i18n for="promissoryEffectiveDate" class="control-label col-md-2">Effective
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="promissoryEffectiveDate" formControlName="promissoryEffectiveDate"
                                        [attr.disabled]="disableInput ? '' : null" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!promissoryForm.controls['promissoryEffectiveDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                                <label i18n for="promissoryMaturityDate" class="control-label col-md-2">Maturity
                                    Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="promissoryMaturityDate" formControlName="promissoryMaturityDate"
                                        [attr.disabled]="disableInput ? '' : null" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!promissoryForm.controls['promissoryMaturityDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                            </div>

                            <div class="form-group">
                                <!-- <label i18n for="promissoryValue" class="control-label col-md-2">Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="promissoryValue" maxlength="20"
                                        formControlName="promissoryValue" id="promissoryValue" class="form-control" [ngClass]="!promissoryForm.controls['promissoryValue'].valid ? 'required-input' : 'valid-input'">
                                </div> -->
                                <label i18n for="promissoryNoteRefferenceNumber"
                                    class="control-label col-md-2">Promissory Note Ref Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="promissoryNoteRefferenceNumber"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="promissoryNoteRefferenceNumber"
                                        id="promissoryNoteRefferenceNumber" class="form-control"
                                        [ngClass]="!promissoryForm.controls['promissoryNoteRefferenceNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="indemnityFrom" *ngIf="showIndemnityFrom" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="securityValue" class="control-label col-md-2">Security Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="securityValue" formControlName="securityValue"
                                        [attr.disabled]="disableInput ? '' : null" id="securityValue" maxlength="20"
                                        class="numeric form-control" formatM
                                        [ngClass]="!indemnityFrom.controls['securityValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="description" class="control-label col-md-2">Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="description" formControlName="description" id="description"
                                        class="form-control" maxlength="499" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['description'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="firstName" class="control-label col-md-2">First Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="firstName" formControlName="firstName" id="firstName"
                                        maxlength="100" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['firstName'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="middleName" class="control-label col-md-2">Middle Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="middleName" formControlName="middleName" id="middleName"
                                        maxlength="100" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['middleName'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="lastName" class="control-label col-md-2">Last Name</label>
                                <div class="col-md-4">
                                    <input type="text" name="lastName" formControlName="lastName" id="lastName"
                                        maxlength="100" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['lastName'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="bvn" class="control-label col-md-2">BVN</label>
                                <div class="col-md-4">
                                    <input type="number" name="bvn" formControlName="bvn" id="bvn" class="form-control"
                                        maxlength="12" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['bvn'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="phoneNumber1" class="control-label col-md-2">Phone Number 1</label>
                                <div class="col-md-4">
                                    <input type="text" name="phoneNumber1"
                                    [attr.disabled]="disableInput ? '' : null"
                                     formControlName="phoneNumber1" id="phoneNumber1" maxlength="20"
                                         class="form-control"
                                        [ngClass]="!indemnityFrom.controls['phoneNumber1'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="phoneNumber2" class="control-label col-md-2">Phone Number 2</label>
                                <div class="col-md-4">
                                    <input type="text" name="phoneNumber2"
                                    [attr.disabled]="disableInput ? '' : null"
                                    formControlName="phoneNumber2" id="phoneNumber2" maxlength="20"
                                    class="form-control"
                                    [ngClass]="!indemnityFrom.controls['phoneNumber2'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="address" class="control-label col-md-2">Address</label>
                                <div class="col-md-4">
                                    <input type="text" name="address" formControlName="address" id="address"
                                        class="form-control" maxlength="500" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['address'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="taxNumber" class="control-label col-md-2">Tax Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="taxNumber" formControlName="taxNumber" id="taxNumber"
                                        maxlength="15" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['taxNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="relationship" class="control-label col-md-2">Relationship</label>
                                <div class="col-md-4">
                                    <input type="text" name="relationship" formControlName="relationship"
                                        id="relationship" maxlength="100" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['relationship'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="relationshipDuration" class="control-label col-md-2">Relationship
                                    Duration</label>
                                <div class="col-md-4">
                                    <input type="text" name="relationshipDuration"
                                        formControlName="relationshipDuration" id="relationshipDuration" maxlength="50"
                                        class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['relationshipDuration'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="emailAddress" class="control-label col-md-2">Email</label>
                                <div class="col-md-4">
                                    <input type="text" name="emailAddress" formControlName="emailAddress"
                                        id="emailAddress" maxlength="190" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['emailAddress'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="cStartDate" class="control-label col-md-2">Start Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="cStartDate" formControlName="cStartDate" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!indemnityFrom.controls['cStartDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                            </div>

                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" formControlName="remark" id="remark"
                                        class="form-control" maxlength="500" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!indemnityFrom.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="endDate" class="control-label col-md-2">End Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="endDate" formControlName="endDate" [monthNavigator]="true"
                                        [attr.disabled]="disableInput ? '' : null" [yearNavigator]="true"
                                        yearRange="2000:2050" [showIcon]="true"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!indemnityFrom.controls['endDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="domiciliationContract" *ngIf="showDomiciliationContract"
                    autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="description" class="control-label col-md-2">Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="description" formControlName="description" id="description"
                                        maxlength="500" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['description'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="contractDetail" class="control-label col-md-2">Contract Detail</label>
                                <div class="col-md-4">
                                    <input type="text" name="contractDetail" formControlName="contractDetail"
                                        id="contractDetail" maxlength="500" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['contractDetail'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">

                                <label i18n for="contractEmployer" class="control-label col-md-2">Contract
                                    Employer</label>
                                <div class="col-md-4">
                                    <input type="text" name="contractEmployer" formControlName="contractEmployer"
                                        id="contractEmployer" maxlength="200" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['contractEmployer'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="contractValue" class="control-label col-md-2">Total Contract
                                    Value</label>
                                <div class="col-md-4">
                                    <input type="text" name="contractValue" formControlName="contractValue"
                                        [attr.disabled]="disableInput ? '' : null" id="contractValue" maxlength="20"
                                        formatM class="numeric form-control"
                                        [ngClass]="!domiciliationContract.controls['contractValue'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="outstandingInvoiceAmount" class="control-label col-md-2">Outstanding
                                    Invoice Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="outstandingInvoiceAmount"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="outstandingInvoiceAmount" id="outstandingInvoiceAmount"
                                        maxlength="20" formatM class="numeric form-control"
                                        [ngClass]="!domiciliationContract.controls['outstandingInvoiceAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="accountNameToDebit" class="control-label col-md-2">Account Name To
                                    Debit</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNameToDebit" formControlName="accountNameToDebit"
                                        id="accountNameToDebit" maxlength="150" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['accountNameToDebit'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="accountNumberToDebit" class="control-label col-md-2">Account Number To
                                    Debit</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNumberToDebit"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="accountNumberToDebit" id="accountNumberToDebit" maxlength="20"
                                        class="form-control"
                                        [ngClass]="!domiciliationContract.controls['accountNumberToDebit'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="payer" class="control-label col-md-2">Bank Name / Payer </label>
                                <div class="col-md-4">
                                    <input type="text" name="payer" formControlName="payer" id="payer"
                                        class="form-control" maxlength="150" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['payer'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="regularPaymentAmount" class="control-label col-md-2">Regular Payment
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="regularPaymentAmount" accountNumberToDeposit
                                        formControlName="regularPaymentAmount" id="regularPaymentAmount" maxlength="20"
                                        formatM class="numeric form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['regularPaymentAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="renewalFrequencyTypeId"
                                    class="control-label col-md-2">Intervals</label>
                                <div class="col-md-4">
                                    <select name="renewalFrequencyTypeId" formControlName="renewalFrequencyTypeId"
                                        id="renewalFrequencyTypeId" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['renewalFrequencyTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="">-- Select Renewal Frequency Type --</option>
                                        <option *ngFor="let x of frequencyTypes" [value]="x.lookupId">{{ x.lookupName }}
                                        </option>
                                    </select>
                                </div>

                            </div>
                            <div class="form-group">

                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" accountNumberToDeposit formControlName="remark"
                                        id="remark" maxlength="20" class=" form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>


                            </div>


                            <hr>
                            <div class="form-group">

                                <label i18n for="invoiceNumber" class="control-label col-md-2">Invoice Number</label>
                                <div class="col-md-4">
                                    <input type="number" name="invoiceNumber" formControlName="invoiceNumber"
                                        id="invoiceNumber" maxlength="20" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationContract.controls['invoiceNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="invoiceDate" class="control-label col-md-2">Invoice Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="invoiceDate" formControlName="invoiceDate" [monthNavigator]="true"
                                        [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"
                                        [ngClass]="!domiciliationContract.controls['invoiceDate'].valid ? 'required-input' : 'valid-input'">
                                    </p-calendar>
                                </div>

                            </div>

                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="domiciliationSalary" *ngIf="showDomiciliationSalary" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="description" class="control-label col-md-2">Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="description" formControlName="description" id="description"
                                        maxlength="500" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationSalary.controls['description'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="contractEmployer" class="control-label col-md-2">Employer</label>
                                <div class="col-md-4">
                                    <input type="text" name="contractEmployer" formControlName="contractEmployer"
                                        id="contractEmployer" maxlength="150" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!domiciliationSalary.controls['contractEmployer'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="monthlySalary" class="control-label col-md-2">Monthly Salary</label>
                                <div class="col-md-4">
                                    <input type="text" name="monthlySalary" formControlName="monthlySalary"
                                        [attr.disabled]="disableInput ? '' : null" id="monthlySalary" maxlength="20"
                                        formatM class="numeric form-control"
                                        [ngClass]="!domiciliationSalary.controls['monthlySalary'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="annualAllowances" class="control-label col-md-2">Other Annual
                                    Allowances</label>
                                <div class="col-md-4">
                                    <input type="text" name="annualAllowances" formControlName="annualAllowances"
                                        [attr.disabled]="disableInput ? '' : null" id="annualAllowances" maxlength="20"
                                        formatM class="numeric form-control"
                                        [ngClass]="!domiciliationSalary.controls['annualAllowances'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>

                            <div class="form-group">

                                <label i18n for="annualEmolument" class="control-label col-md-2">Total Annual
                                    Emolument</label>
                                <div class="col-md-4">
                                    <input type="text" name="annualEmolument" formControlName="annualEmolument"
                                        [attr.disabled]="disableInput ? '' : null" id="annualEmolument" maxlength="20"
                                        formatM class="numeric form-control"
                                        [ngClass]="!domiciliationSalary.controls['annualEmolument'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="accountNumber" class="control-label col-md-2">Account Number (Salary
                                    Domiciled)</label>
                                <div class="col-md-4">
                                    <input type="number" name="accountNumber" formControlName="accountNumber"
                                        [attr.disabled]="disableInput ? '' : null" id="accountNumber" maxlength="10"
                                        class="form-control"
                                        [ngClass]="!domiciliationSalary.controls['accountNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>

                            </div>


                            <div class="form-group">
                                <label i18n for="annualSalary" class="control-label col-md-2">Annual Salary</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNumber" formControlName="annualSalary"
                                        [attr.disabled]="disableInput ? '' : null" id="annualSalary" maxlength="20"
                                        formatM class="numeric form-control"
                                        [ngClass]="!domiciliationSalary.controls['annualSalary'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" formControlName="remark" id="remark"
                                        [attr.disabled]="disableInput ? '' : null" class="form-control" maxlength="500"
                                        [ngClass]="!domiciliationSalary.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>


                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

                <form novalidate [formGroup]="ispoForm" *ngIf="showIspoForm" autocomplete="off">
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="description" class="control-label col-md-2">Description</label>
                                <div class="col-md-4">
                                    <input type="text" name="description" formControlName="description" id="description"
                                        maxlength="500" class="form-control" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!ispoForm.controls['description'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="accountNameToDebit" class="control-label col-md-2">Account Name To
                                    Debit</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNameToDebit" formControlName="accountNameToDebit"
                                        id="accountNameToDebit" maxlength="200" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!ispoForm.controls['accountNameToDebit'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="accountNumberToDebit" class="control-label col-md-2">Account Number To
                                    Debit</label>
                                <div class="col-md-4">
                                    <input type="text" name="accountNumberToDebit"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="accountNumberToDebit" id="accountNumberToDebit" maxlength="20"
                                        class="form-control"
                                        [ngClass]="!ispoForm.controls['accountNumberToDebit'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="payer" class="control-label col-md-2">Bank Name / Payer</label>
                                <div class="col-md-4">
                                    <input type="text" name="payer" formControlName="payer" id="payer"
                                        class="form-control" maxlength="200" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!ispoForm.controls['payer'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>
                            <div class="form-group">

                                <label i18n for="regularPaymentAmount" class="control-label col-md-2">Regular Payment
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="regularPaymentAmount"
                                        [attr.disabled]="disableInput ? '' : null"
                                        formControlName="regularPaymentAmount" id="regularPaymentAmount" maxlength="20"
                                        class="form-control" formatM
                                        [ngClass]="!ispoForm.controls['regularPaymentAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="renewalFrequencyTypeId" class="control-label col-md-2">Payment
                                    Intervals</label>
                                <div class="col-md-4">
                                    <select name="renewalFrequencyTypeId" formControlName="renewalFrequencyTypeId"
                                        id="renewalFrequencyTypeId" class="form-control"
                                        [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!ispoForm.controls['renewalFrequencyTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="">-- Select Renewal Frequency Type --</option>
                                        <option *ngFor="let x of frequencyTypes" [value]="x.lookupId">{{ x.lookupName }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">



                                <label i18n for="remark" class="control-label col-md-2">Remark</label>
                                <div class="col-md-4">
                                    <input type="text" name="remark" formControlName="remark" id="remark"
                                        class="form-control" maxlength="500" [attr.disabled]="disableInput ? '' : null"
                                        [ngClass]="!ispoForm.controls['remark'].valid ? 'required-input' : 'valid-input'">
                                </div>
                            </div>


                            <!-- <div class="form-group">
                                <div class="col-md-6"></div>
                                <label i18n for="remark" class="control-label col-md-2">Primary Document</label>
                                <div class="col-md-4">
                                    <div class="checkbox-container">

                                    </div><label i18n class="checkbox" ng-style="isPrimaryLabel === 'Required'}"
                                        style="color:red">{{isPrimaryLabel}}</label>
                                    <button type="button" (click)="GetPrimaryDocument()" style="margin-left:60"
                                        class="btn btn-success pull-right">Upload</button>
                                </div>
                            </div> -->
                            <hr />
                            <div class="form-group" *ngIf="showInsuranceDiferCheckbox">
                                <label i18n for="remark" class="control-label col-md-2">Defer Insurance Policy</label>
                                <div class="checkbox-container col-md-4">
                                    <input formControlName="differInsurancePolicy" id="differInsurancePolicy"
                                        [attr.disabled]="disableInput ? '' : null"
                                        (change)="toggleInsurancePolicy($event.target.checked)" type="checkbox">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

            </p-tabPanel>

            <p-tabPanel i18n-header header="Insurance Information" [disabled]="!enableInsuranceFormTab">
                <form novalidate [formGroup]="insuranceForm" *ngIf="showInsuranceForm" autocomplete="off">
                    <!--<p-tabPanel i18n-header header="Insurance Information" [disabled]="enableInsuranceFormTab">
                <form novalidate [formGroup]="insuranceForm" *ngIf="true">-->
                    <div class="panel-body">
                        <div class="form-horizontal">
                            <div class="form-group">
                                <label i18n for="policyState" class="control-label col-md-2">Policy State</label>
                                <div class="col-md-4">
                                    <select id="policyState" formControlName="policyState" name="policyState"
                                        (change)="GetInsuranceDetail($event.target.value)" class="form-control"
                                        [ngClass]="!insuranceForm.controls['policyState'].valid ? 'required-input' : 'valid-input'">
                                        <option i18n value="0">Select Type</option>
                                        <option i18n value="1">New</option>
                                        <option i18n value="2">Renewal</option>
                                    </select>
                                </div>
                                <label i18n for="insuranceTypeId" class="control-label col-md-2">Insurance Type</label>
                                <div class="col-md-4">
                                    <select id="insuranceTypeId" formControlName="insuranceTypeId"
                                        name="insuranceTypeId" class="form-control"
                                        [ngClass]="!insuranceForm.controls['insuranceTypeId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="0" i18n>Select Insurance Type</option>
                                        <option *ngFor="let x of insuranceType" [value]="x.insuranceTypeId">
                                            {{ x.insuranceType }}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label i18n for="insuranceCompanyId" class="control-label col-md-2">Insurer</label>
                                <div class="col-md-4">
                                    <select id="insuranceCompanyId" (change)="getInsurerAddress($event.target.value)"
                                        formControlName="insuranceCompanyId" name="insuranceCompanyId"
                                        class="form-control"
                                        [ngClass]="!insuranceForm.controls['insuranceCompanyId'].valid ? 'required-input' : 'valid-input'">
                                        <option value="0" i18n>Select Insurance Company</option>
                                        <option *ngFor="let x of insuranceCompany" [value]="x.insuranceCompanyId">
                                            {{x.companyName }}</option>
                                    </select>
                                </div>
                                <label i18n for="companyAddress" class="control-label col-md-2">Insurer Address</label>
                                <div class="col-md-4">
                                    <textarea type="text" name="companyAddress" maxlength="200"
                                        formControlName="companyAddress" id="companyAddress" class="form-control"
                                        [ngClass]="!insuranceForm.controls['companyAddress'].valid ? 'required-input' : 'valid-input'"></textarea>
                                </div>
                            </div>

                            <div class="form-group">
                                <label i18n for="referenceNumber" class="control-label col-md-2">Reference
                                    Number</label>
                                <div class="col-md-4">
                                    <input type="text" name="referenceNumber" formControlName="referenceNumber"
                                        id="referenceNumber" class="form-control"
                                        [ngClass]="!insuranceForm.controls['referenceNumber'].valid ? 'required-input' : 'valid-input'">
                                </div>

                                <label i18n for="description" class="control-label col-md-2">Policy Description</label>
                                <div class="col-md-4">
                                    <textarea type="text" name="description" formControlName="description"
                                        id="description" class="form-control"
                                        [ngClass]="!insuranceForm.controls['description'].valid ? 'required-input' : 'valid-input'"></textarea>
                                </div>

                            </div>

                            <div class="form-group">
                                <label i18n for="startDate" class="control-label col-md-2">Policy Start Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="startDate" [maxDate]='currentDate' formControlName="startDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!insuranceForm.controls['startDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>
                                <label i18n for="expiryDate" class="control-label col-md-2">Policy Expiry Date</label>
                                <div class="col-md-4">
                                    <p-calendar id="expiryDate" [minDate]='currentDate' formControlName="expiryDate"
                                        [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050"
                                        [showIcon]="true"
                                        [inputStyle]="!insuranceForm.controls['expiryDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                        [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                                </div>

                            </div>
                            <div class="form-group">
                                <label i18n for="sumInsured" class="control-label col-md-2">Coverage Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="sumInsured" formControlName="sumInsured" formatM
                                        id="sumInsured" class="numeric form-control"
                                        [ngClass]="!insuranceForm.controls['sumInsured'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                <label i18n for="inSurPremiumAmount" class="control-label col-md-2">Premium
                                    Amount</label>
                                <div class="col-md-4">
                                    <input type="text" name="inSurPremiumAmount" maxlength="20"
                                        formControlName="inSurPremiumAmount" id="inSurPremiumAmount"
                                        class="form-control numeric" formatM
                                        [ngClass]="!insuranceForm.controls['inSurPremiumAmount'].valid ? 'required-input' : 'valid-input'">
                                </div>
                                </div>
                            <!--<div class="form-group" *ngIf="IsInsurancePolicyInEditMood">
                                <label i18n class="control-label col-md-6"></label>
                                <div class="col-md-6">
                                    <button type="button" (click)="AddInsurancePolicy(insuranceForm)"
                                        class="btn btn-success pull-right">Add
                                        New Policy</button>
                                </div>
                            </div>-->

                                <!--<div *ngIf="InsuranceSaveButton" class="panel-footer">
                                <div class="row">
                                    <div class="col-md-12">
                                        <button type="button" (click)="SaveInsurance(insuranceForm)"
                                            [disabled]="insuranceForm.invalid"
                                            class="btn btn-success pull-right">Save</button>

                                    </div>
                                </div>
                            </div>-->
                                <br />
                                <br />
                            </div>
                            <!--<div class="form-group" *ngIf="IsInsurancePolicyInEditMood">-->
                            <div class="form-group" *ngIf="insurancePolicies && insurancePolicies.length > 0"
                                style="max-height: 100px; overflow:auto">

                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th i18n>Insurance Type</th>
                                            <th i18n>Insurance Company</th>
                                            <th i18n>Coverage Amount</th>
                                            <th i18n>Policy Start Date</th>
                                            <th i18n>Policy Expiry Date</th>
                                            <th i18n>Has Expired</th>
                                            <th></th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let p of insurancePolicies;let indx=index">


                                            <td>
                                                {{p.insuranceType}}
                                            </td>
                                            <td>
                                                {{p.insuranceCompany}}
                                            </td>
                                            <td>
                                                {{p.sumInsured}}
                                            </td>
                                            <td>
                                                {{p.startDate | date}}
                                            </td>
                                            <td>
                                                {{p.expiryDate | date}}
                                            </td>
                                            <td>
                                                {{p.hasExpired}}
                                            </td>
                                            <td>
                                                <!--<label i18n (click)="editInsurancePolicy(p.referenceNumber)" class="control-label">Edit</label>-->
                                                <label i18n (click)="editInsurance(p)"
                                                    class="control-label">Edit</label>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                        </div>
                </form>
            </p-tabPanel>
            <p-tabPanel i18n-header header="Document Uploads" [disabled]="!(selectedId>0)">

                <div class="panel-body">

                    <document-upload *ngIf="selectedId>0" [reload]="selectedId" [operationId]="60"
                        [customerId]="selectedCustomerId" [targetId]="selectedId" [deleteLink]="deleteLink"
                        [showUploadForm]="showUploadForm" [targetReferenceNumber]="applicationReferenceNumber">
                    </document-upload>
                </div>
                <!-- <div class="form-horizontal">tempCollateralId
                    <div class="form-group">
                        <label i18n for="documentTitle" class="control-label col-md-2">Document Title / Code</label>
                        <div class="col-md-8">
                            <input type="text" [(ngModel)]="uploadFileTitle" class="form-control" name="description"
                                placeholder="Document title...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="documentTypeId" class="control-label col-md-2">Document Type</label>

                        <div class="col-md-8">
                            <select name="documentTypeId" id="documentTypeId" [(ngModel)]="documentTypeId"
                                class="form-control">
                                <option value="">-- Select Document Type --</option>
                                <option *ngFor="let x of collateralDocumentTypes" [value]="x.documentTypeId">
                                    {{ x.documentType }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="document" class="control-label col-md-2">Select Document</label>
                        <div class="col-md-8">
                            <input type="file" (change)="onFileChange($event)" placeholder="Upload file"
                                accept=".pdf,.doc,.docx,.xlsx,.jpg,.jpeg" #fileInput name="fileInput"
                                style="padding-top:2px;" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="document" class="control-label col-md-2"></label>
                        <div class="col-md-4">
                            <button (click)="uploadFile()" class="btn btn-sm btn-primary"
                                [disabled]="uploadFileTitle==null || file==undefined"><span
                                    class="glyphicon glyphicon-upload"></span> Upload</button>
                        </div>
                    </div>
                </div>

                <p-dataTable [value]="supportingDocuments" [paginator]="true" [rows]="5">
                    <p-column i18n-header field="documentTitle" header="Document Title" sortable="true" [filter]="true"
                        filterMatchMode="contains"></p-column>
                    <p-column i18n-header field="fileExtension" [style]="{'width':'50px'}" header="Type" [filter]="true"
                        filterMatchMode="contains" [style]="{'width':'60px'}"></p-column>
                    <p-column i18n-header field="isPrimaryDocument" [style]="{'width':'70px'}" header="is Primary Document"
                        [filter]="true" filterMatchMode="contains" [style]="{'width':'60px'}"></p-column>
                    <p-column i18n-header field="collateralReleaseStatusName" header="Status" [filter]="true"
                        filterMatchMode="contains"></p-column>

                    <p-column i18n-header [style]="{'width':'100px'}">

                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template pTemplate="body" let-d="rowData" let-i="rowIndex">
                            <a *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="viewDocument(d.documentId)" href="javascript:void(0)">View</a>
                            <a *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="DownloadDocument(d.documentId)" href="javascript:void(0)">Download</a>
                        </ng-template>
                    </p-column>
                   
                </p-dataTable> -->

            </p-tabPanel>
            <p-tabPanel i18n-header header="Visitation Detail" [disabled]="disableVisitationPanel">
                <div class="form-horizontal">

                    <div class="form-group">
                        <label i18n for="lastVisitaionDate" class="control-label col-md-2">Last Visitation Date</label>
                        <div class="col-md-8">
                            <p-calendar [(ngModel)]="lastVisitaionDate" [maxDate]='currentDate' dateFormat='dd/mm/yy'
                                [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                [inputStyle]="!visitationForm.controls['lastVisitaionDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                (onSelect)="calculateLastVisitationDate($event)"
                                [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="nextVisitationDate" class="control-label col-md-2">Next Visitation Date</label>
                        <div class="col-md-8">
                            <p-calendar [(ngModel)]="nextVisitationDate" dateFormat='dd/mm/yy' disabled="disabled"
                                [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true"
                                [inputStyle]="!visitationForm.controls['nextVisitationDate'].valid ? {'width': '100%','border-left':'3px solid #ff0000'} : {'width': '100%','border-left':'3px solid #3cd225'}"
                                [style]="{'width': '100%', 'overflow': 'visible'  }"></p-calendar>
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="visitationRemark" class="control-label col-md-2">Remark</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" [(ngModel)]="visitationRemark"
                                placeholder="Remark...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="visitationDocument" class="control-label col-md-2">Select Visitation
                            File</label>
                        <div class="col-md-8">
                            <input type="file" (change)="onFileChange($event)" [(ngModel)]="visitationDocument"
                                placeholder="Upload file" accept=".pdf,.doc,.docx,.jpg,.jpeg" #fileInput
                                name="fileInput" style="padding-top:2px;" class="form-control">
                        </div>
                    </div>
                    <div class="form-group">
                        <label i18n for="document" class="control-label col-md-2"></label>
                        <div class="col-md-4">
                            <button (click)="uploadVisitationFile(visitationForm)" class="btn btn-sm btn-primary"
                                [disabled]="lastVisitaionDate==null || visitationRemark==null || file==undefined"><span
                                    class="glyphicon glyphicon-upload"></span>
                                <ng-container i18n>Upload</ng-container>
                            </button>
                        </div>
                    </div>
                </div>
                <p-dataTable [value]="visitationDetail" [paginator]="true" [rows]="5">
                    <p-column i18n-header field="collateralSummary" header="Collateral Summary" sortable="true"
                        [filter]="true" filterMatchMode="contains"></p-column>
                    <p-column i18n-header field="lastVisitaionDate" [style]="{'width':'100px'}"
                        header="Last Visitation Date" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.lastVisitaionDate | date }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="nextVisitationDate" [style]="{'width':'100px'}"
                        header="Next Visitation Date" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.nextVisitationDate | date }}
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="visitationRemark" header="Remark" sortable="true" [filter]="true"
                        filterMatchMode="contains"></p-column>
                    <p-column i18n-header field="doneBy" header="Done By" sortable="true" [filter]="true"
                        filterMatchMode="contains"></p-column>
                    <!-- <p-column i18n-header [style]="{'width':'100px'}">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template pTemplate="body" let-d="rowData" let-i="rowIndex">
                            <a (click)="viewVisitationDocument(d.collateralVisitationID)" href="javascript:void(0)">View</a>
                        </ng-template>
                    </p-column> -->
                    <p-column i18n-header [style]="{'width':'100px'}">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template pTemplate="body" let-d="rowData" let-i="rowIndex">
                            <a *ngIf="['jpg','jpeg','bmp', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="viewVisitationImage(d.documentId)" href="javascript:void(0)" i18n>View</a>
                            <a *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="viewVisitationDocument(d.documentId)" href="javascript:void(0)"
                                i18n>Download</a>
                        </ng-template>
                    </p-column>
                </p-dataTable>

                <!-- <p-dataTable [paginator]="true" [rows]="5" [value]="visitationDetail" [responsive]=true selectionMode="single">
                    <p-column i18n-header field="lastVisitaionDate" header="Last Visitation Date" sortable="true" [filter]="true" filterMatchMode="contains">
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            {{ d.lastVisitaionDate | date }} (click)="viewDocument(d.documentId)"
                        </ng-template>
                    </p-column>
                    <p-column i18n-header field="visitationRemark" header="Remark" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                    <p-column i18n-header >

                        <ng-template pTemplate="header">
                        </ng-template>
                        <ng-template let-staff="rowData" let-d="rowIndex" pTemplate="body">
                            <a *ngIf="d.fileExtension=='jpg' || d.fileExtension=='jpeg'">
                                <i class="glyphicon glyphicon-pencil">View File</i>
                            </a>
                        </ng-template>
                    </p-column>
                </p-dataTable> -->

            </p-tabPanel>

        </p-tabView>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <!-- {{ casaForm.value | json }} -->
                    <!-- || isPrimaryLabel == 'Required' -->
                    <button type="button" (click)="submitForm(mainForm)"
                        [disabled]="(mainForm.invalid || subForm.invalid || (insuranceForm.invalid && !enableInsuranceFormTab))"
                        class="btn btn-success pull-right" i18n>Save</button>
                    <button type="button" (click)="closeForm()" style="margin-right:5px"
                        class="btn btn-danger pull-right" i18n>Close</button>
                </div>
            </div>
        </div>

    </div>
    <!--<pre>{{ payload | json }}</pre>-->
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showSearchCustomerDialog" id="add-modal" modal="modal" showEffect="fade"
    width="1000" [contentStyle]="{'overflow':'auto','max-height':'1000px'}">
    <div style="margin-bottom:0" class="panel panel-default">
        <collateral-information-view *ngIf="showSearchCustomerDialog" [reload]="fetchedCollateral.collateralId"
            [collateralCustomerId]="fetchedCollateral.collateralId"
            [showCollateralInformation]="showSearchCustomerDialog" (closeWindow)="showSearchCustomerDialog=false">
        </collateral-information-view>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayCollateralDetails" showEffect="fade" width="1000" modal="modal"
    [contentStyle]="{'overflow':'auto','max-height':'1000px'}">
    <div style="margin-bottom:0" class="panel panel-default">
        <collateral-information-view *ngIf="displayCollateralDetails" [reload]="collateral?.collateralId"
            [collateralCustomerId]="collateral?.collateralId" [showCollateralInformation]="displayCollateralDetails"
            (closeWindow)="displayCollateralDetails=false">
        </collateral-information-view>
    </div>
</p-dialog>

<!--end of form modal-->

<p-dialog [responsive]=true [(visible)]="showLocationMap" id="add-modal" modal="modal" showEffect="fade" width="900">

    <!-- <credit-map [latitude]="latitude" [longitude]="longitude" (closeForm)="hideViewMap()" ></credit-map> -->

</p-dialog>
<!--new-label modal form-->
<p-dialog [responsive]=true [(visible)]="displayNewFieldLabelForm" id="new-label-modal" modal="modal" showEffect="fade"
    width="450">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                New Control Label
            </h2>
        </div>

        <form novalidate [formGroup]="newFieldLabelForm" autocomplete="off">
            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label i18n for="labelName" class="control-label col-md-12">Label Name</label>
                        <div class="col-md-12">
                            <input type="text"
                                [ngClass]="!newFieldLabelForm.controls['labelName'].valid ? 'required-input' : 'valid-input'"
                                class="form-control" formControlName="labelName" name="labelName">
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="addNoteField()" [disabled]="newFieldLabelForm.invalid"
                            class="btn btn-success pull-right" i18n>Create</button>
                        <button type="button" (click)="displayNewFieldLabelForm=false" style="margin-right:5px"
                            class="btn btn-danger pull-right" i18n>Cancel</button>
                    </div>
                </div>
            </div>
        </form>

    </div>
</p-dialog>
<!--END new-label modal form-->


<!--modal for obligor details starts-->
<p-dialog [responsive]=true [(visible)]="displayDocument" modal="modal" showEffect="fade" width="1200">
    <div *ngIf="displayDocument" style="margin-bottom:0" class="panel panel-default">

        <div class="panel-heading">
            <h2 class="panel-title">
                <ng-container i18n>Document Title:</ng-container><strong>{{ selectedDocument }}</strong>
            </h2>
            <div class="pull-right"><a class="close" (click)="displayDocument=false">&times;</a></div>
        </div>

        <div class="panel-body" style="overflow:auto;height:450px">

            <img *ngIf="binaryFile" style="max-width: 100%; display: block 2px black;"
                [src]="'data:image/jpg;base64,'+binaryFile" alt="" class="img-thumbnail">

        </div>

    </div>
</p-dialog>



<p-dialog [responsive]=true [(visible)]="displayCollateralHistory" [modal]=true [dismissableMask]=true width="1200"
    [contentStyle]="{'overflow':'auto','max-height':'1000px'}">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Collateral History
            </h2>
        </div>
        <div class="panel-body">
            <p-dataTable [paginator]="true" [rows]="5" [value]="collateralHistory" [responsive]=true>
                <p-column i18n-header field="loanRef" header="Loan Reference" sortable="true" [filter]="true"
                    filterMatchMode="contains"></p-column>
                <p-column i18n-header field="customerName" header="Customer Name" sortable="true" [filter]="true"
                    filterMatchMode="contains"></p-column>
                <p-column i18n-header field="approvedLoanAmount" header="Approved Loan Amount" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.approvedLoanAmount | number : '1.2' }}
                    </ng-template>
                </p-column>
               
                <p-column i18n-header field="totalOutstanding" header="Total Outstanding" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.totalOutstanding | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="amountInUse" header="Collateral Amount in use" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.amountInUse | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="lastVisitationDate" header="Last Visitation Date" sortable="true"
                [filter]="true" filterMatchMode="contains">
                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                    {{ d.lastVisitationDate | date }}
                </ng-template>
            </p-column>
                <p-column i18n-header field="dateUsed" header="Date Collateral was Mapped" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.dateUsed | date }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="expirationDate" header="Loan Maturity Date" sortable="true" [filter]="true"
                    filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.expirationDate | date }}
                    </ng-template>
                </p-column>
            </p-dataTable>
        </div>
        <div class="panel-footer">

        </div>
    </div>

</p-dialog>
<!--modal ends-->


<fintrakbanking-message [title]="title" [message]="message" [show]="show" [cssClass]="cssClass"
    (closeEvent)="hideMessage($event)"></fintrakbanking-message>

<!-- {{loanApplicationCollaterals | json}} -->
<!-- <pre>{{ customerCollaterals | json }}</pre>   -->

<!-- <p-dialog [responsive]=true [(visible)]="displayFileUpload" id="add-modal" modal="modal" showEffect="fade" width="450">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">
                Primary Document
            </h2>
        </div>


        <form novalidate [formGroup]="CollateralPrimaryDocumentForm">
            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label i18n class="control-label col-md-4">Title</label>
                        <div class="col-md-8">
                            <input type="text" formControlName="collateralPrimaryDocumentTitle"
                                name="collateralPrimaryDocumentTitle" id="collateralPrimaryDocumentTitle"
                                maxlength="100" required class="form-control"
                                [ngClass]="!CollateralPrimaryDocumentForm.controls['collateralPrimaryDocumentTitle'].valid ? 'required-input' : 'valid-input'">
                        </div>
                    </div>
                    <div class="form-group" *ngIf="!showPromissoryForm">
                        <label i18n for="documentTypeId" class="control-label col-md-4">Document Type</label>

                        <div class="col-md-8">
                            <select name="documentTypeId" id="documentTypeId" formControlName="documentTypeId"
                                class="form-control"
                                [ngClass]="!CollateralPrimaryDocumentForm.controls['documentTypeId'].valid ? 'required-input' : 'valid-input'">
                                <option value="">-- Select Document Type --</option>
                                <option *ngFor="let x of collateralDocumentTypes" [value]="x.documentTypeId">
                                    {{ x.documentType }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label i18n class="control-label col-md-4">Select Document</label>
                        <div class="col-md-8">
                            <input type="file" id="collateralPrimaryDocument" (change)="onFileChange($event)"
                                formControlName="collateralPrimaryDocument" name="collateralPrimaryDocument"
                                placeholder="Upload file" accept=".pdf,.doc,.docx,.jpg,.jpeg" #fileInput
                                name="fileInput" style="padding-top:2px;" class="form-control"
                                [ngClass]="!CollateralPrimaryDocumentForm.controls['collateralPrimaryDocument'].valid ? 'required-input' : 'valid-input'">
                        </div>
                    </div>

                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="AcceptImage()"
                            [disabled]="(CollateralPrimaryDocumentForm.invalid || CollateralPrimaryDocumentForm.invalid || (CollateralPrimaryDocumentForm.invalid || file==undefined))"
                            class="btn btn-success pull-right">Add</button>
                        <button type="button" (click)="closePrimaryDocUpload()" style="margin-right:5px"
                            class="btn btn-danger pull-right">Cancel</button>
                    </div>
                </div>
            </div>

        </form>
    </div>


</p-dialog> -->


<p-dialog [responsive]=true [(visible)]="displayPropose" id="add-modal" modal="modal" showEffect="fade" width="650">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Propose Collateral
            </h2>
        </div>
        <div class="panel-body">
            <div class="form-horizontal">
                <div class="form-group">

                    <div class="col-md-12" *ngIf="module == moduleValue2">
                        <select name="productDropDown" id="productDropDown"
                            (change)="getProposeCollateralCoverageLms($event.target.value)"
                            [(ngModel)]="productDropDown" class="form-control">
                            <option value="" i18n>-- Select Facility --</option>
                            <option *ngFor="let x of faciliies" [value]="x.productId">
                                {{ x.productName }}</option>
                        </select>
                    </div>

                    <div class="col-md-12" *ngIf="module == moduleValue1">
                        <select name="productDropDown" id="productDropDown"
                            (change)="getProposeCollateralCoverage($event.target.value)" [(ngModel)]="productDropDown"
                            class="form-control">
                            <option value="">-- Select Facility --</option>
                            <option *ngFor="let x of faciliies" [value]="x.productId">
                                {{ x.productName }}</option>
                        </select>
                    </div>
                </div>

            </div>
        </div>
        <div class="panel-body">
            <p-dataTable [value]="collateralCoverage" [paginator]="true" [rows]="3">
                <p-column i18n-header field="facilityAmount" header="Facility Propose Amount" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{d.baseCurrencyCode}} {{ d.facilityAmount | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="availableCollateralValue" header="Available Collateral Value"
                    sortable="true" [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{d.baseCurrencyCode}} {{ d.availableCollateralValue | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="expectedCoveragePercentage" header="Expected Coverage Percentage"
                    sortable="true" [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{ d.expectedCoveragePercentage | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="expectedCollateralCoverage" header="Expected Coverage" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{d.baseCurrencyCode}} {{ d.expectedCollateralCoverage | number : '1.2' }}
                    </ng-template>
                </p-column>
                <p-column i18n-header field="actualCollateralCoverage" header="Actual Coverage" sortable="true"
                    [filter]="true" filterMatchMode="contains">
                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                        {{d.baseCurrencyCode}} {{ d.actualCollateralCoverage | number : '1.2' }}
                    </ng-template>
                </p-column>
                <!-- <p-column i18n-header [style]="{'width':'100px'}">
                        <ng-template pTemplate="header"></ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <a (click)="DeleteCollateralCoverage(d)" href="javascript:void(0)">Delete</a>
                        </ng-template>
                    </p-column> -->
            </p-dataTable>
        </div>
        <div class="panel-footer" *ngIf="module == moduleValue2">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="saveProposeLMS()" class="btn btn-success pull-right"
                        i18n>Propose</button>
                    <button type="button" (click)="displayPropose=false" style="margin-right:5px"
                        class="btn btn-danger pull-right" i18n>Cancel</button>
                </div>
            </div>
        </div>

        <div class="panel-footer" *ngIf="module == moduleValue1">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="savePropose()" class="btn btn-success pull-right"
                        i18n>Propose</button>
                    <button type="button" (click)="displayPropose=false" style="margin-right:5px"
                        class="btn btn-danger pull-right" i18n>Cancel</button>
                </div>
            </div>
        </div>

    </div>


</p-dialog>