<div class="ui-g">
    <div class="ui-g-12 no-padding">
        <div class="card no-padding">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-12">
                            <h2 class="panel-title pull-left">
                                Employer Related Loans
                            </h2>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="ui-g ui-fluid">
                        <div class="form-group" style="margin-right:30px">
                            <label for="searchItem" class="control-label col=md-3">
                                Start Date
                            </label>
                            <div class="col=md-9">
                                <p-calendar [(ngModel)]="startDate" dateFormat="dd-MM-yy" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true">
                                </p-calendar> 
                            </div>
                        </div>
                        <div class="form-group" style="margin-right:30px">
                            <label for="searchItem" class="control-label col=md-3 ">
                                End Date
                            </label>
                            <div class="col=md-9">
                                <p-calendar [(ngModel)]="endDate" dateFormat="dd-MM-yy" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2050" [showIcon]="true">
                                </p-calendar>
                            </div>
                        </div>
                        <div class="form-group" style="margin-right:30px">
                            <label for="searchItem" class="control-label col=md-3">
                                .
                            </label>
                            <div class="col=md-9">
                                <button pButton type="button" (click)="GetFacilities()" label="Fetch Record"></button>
                            </div>
                        </div>
                    </div>
                    <p-dataTable  [scrollable]="true" #dt [paginator]="true" [responsive]="true"
                    [value]="employerRelatedLoans" [rows]="10">
                        <p-header>
                            <div class="ui-helper-clearfix">
                                <button type="button" pButton icon="fa-file-o" iconPos="left" label="Export to CSV" (click)="dt.exportCSV()" style="float:left"></button>
                            </div>
                        </p-header>
                        <p-column [style]="{'width':'100px','font-size':'12px'}" field="accountNumber" header="Account Number" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column>
                        <p-column [style]="{'width':'150px','font-size':'12px'}" field="customerName" header="Customer Name" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column>
                        <!-- <p-column field="customerDivisionShortCode" [style]="{'width':'50px'}" header="Division" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column> -->
                        <p-column [style]="{'width':'120px','font-size':'12px'}" field="applicationReferenceNumber" header="Application Ref No" sortable="true"
                            [filter]="true" filterMatchMode="contains"> </p-column>
                        <!-- <p-column field="productNames" header="Product" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column> -->
                            
                        <p-column [style]="{'width':'120px','font-size':'12px'}" field="requestedAmount" header="Loan Amount" sortable="true" [filter]="true"
                            filterMatchMode="contains" [style]="{'text-align':'right'}">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                {{ d.requestedAmount | number : '1.2' }}
                            </ng-template>
                        </p-column> 
                        <p-column [style]="{'width':'100px','font-size':'12px'}" field="bookingDate" header="Book Date">
                            <ng-template let-col let-apr="rowData" pTemplate="body">
                                {{apr[col.field] | date: 'medium'}}
                            </ng-template>
                        </p-column>
                        <p-column [style]="{'width':'100px','font-size':'12px'}" field="maturityDate" header="Maturity Date">
                            <ng-template let-col let-apr="rowData" pTemplate="body">
                                {{apr[col.field] | date: 'medium'}}
                            </ng-template>
                        </p-column>
                        <p-column [style]="{'width':'70px','font-size':'12px'}" field="approvedTenor" header="Loan Tenor (days)" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column>
                        <p-column [style]="{'width':'70px','font-size':'12px'}" field="interestRate" header="Interest Rate" [filter]="false" filterMatchMode="contains"
                            [style]="{'text-align':'right'}">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                {{ d.interestRate | number : '1.2' }}
                            </ng-template>
                        </p-column>
                        <p-column [style]="{'width':'70px','font-size':'12px'}" field="emi" header="EMI" sortable="true"
                            [filter]="true" filterMatchMode="contains"> </p-column>
                        <p-column [style]="{'width':'150px','font-size':'12px'}" field="employer" header="Employer" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column>
                        <p-column [style]="{'width':'120px','font-size':'12px'}" field="approvedAmount" header="Employer's Global Limit" sortable="true" [filter]="true"
                            filterMatchMode="contains" [style]="{'text-align':'right'}">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                {{ d.approvedAmount | number : '1.2' }}
                            </ng-template>
                        </p-column>
                        <p-column [style]="{'width':'120px','font-size':'12px'}" field="totalUtilized" header="Amount Utilized" sortable="true" [filter]="true"
                            filterMatchMode="contains" [style]="{'text-align':'right'}">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                {{ d.requestedAmount | number : '1.2' }}
                            </ng-template>
                        </p-column>
                        <p-column [style]="{'width':'120px','font-size':'12px'}" field="loanStatus" header="Loan Performance Status" sortable="true" [filter]="true"
                            filterMatchMode="contains"> </p-column>
                        <p-column [style]="{'width':'50px'}" field="dpd" header="DPD" sortable="true"
                            [filter]="true" filterMatchMode="contains"> </p-column>
                        
                        <!-- <p-column [style]="{'width':'65px'}">
                            <ng-template pTemplate="header"></ng-template>
                            <ng-template let-x="rowData" let-i="rowIndex" pTemplate="body">
                                <span>
                                    <a (click)="viewRecord(x)" href="javascript:void(0)">Details</a>
                                </span>
                            </ng-template>
                        </p-column> -->
                    </p-dataTable>
                </div>
            </div>
        </div>
    </div>
</div>


<p-dialog [responsive]=true [(visible)]="displayCommentForm" id="add-modal" modal="modal" showEffect="fade" width="1200"
    [contentStyle]="{'overflow':'auto','max-height':'700px'}">
    <div style="margin-bottom:0" class="panel panel-default">

        <div class="panel-heading">
            <h2 class="panel-title">Details
            </h2>
            <div class="pull-right">
                <a class="close" (click)="displayModalForm=false">&times;</a>
            </div>
        </div>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" (click)="displayCommentForm=false" style="margin-right:5px"
                        class="btn btn-danger pull-right">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>