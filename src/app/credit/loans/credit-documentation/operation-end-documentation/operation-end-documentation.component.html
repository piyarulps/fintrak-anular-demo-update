<div class="ui-g">
    <div class="ui-g-12 no-padding">
        <div class="card no-padding">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-12">
                            <h2 i18n class="panel-title pull-left">
                                Related Documentation
                            </h2>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
					<p-accordion #accordion2>
						<p-accordionTab i18n-header header="Deferral/Waiver">
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Deferral/Waiver Approval Documentation
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<div class="form-horizontal">
										<p-tabView [activeIndex]="activeTabindex1" (onChange)="onTabChange1($event)">
												
											<p-tabPanel i18n-header  header="Checklist Items">
												<p-dataTable [paginator]="true" [rows]="15" [value]="checklistAwaitingApproval" [responsive]="true" selectionMode="single"
													[(selection)]="selectedChecklist">
													<p-column i18n-header field="systemArrivalDateTime" header="Arrival Date" sortable="true" [filter]="true" filterMatchMode="contains">
														<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
															{{ d.systemArrivalDateTime | date: 'medium'}}
														</ng-template>
													</p-column>
													<p-column i18n-header field="applicationReferenceNumber" header="Ref.Number" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
													<p-column i18n-header field="customerName" header="Customer Name" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
													<p-column i18n-header field="condition" header="Deferred Document" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
													<p-column i18n-header field="deferredDate" header="Deferred Date" sortable="true" [filter]="true" filterMatchMode="contains">
													<ng-template let-col let-ln="rowData" pTemplate="body">
														{{ln[col.field] | date: 'medium' }}
													</ng-template>
													</p-column>
													<p-column i18n-header field="checklistStatus" header="Checklist Status" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
													<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" [filter]="true" filterMatchMode="contains">
													
													</p-column>
													<p-column i18n-header field="isLMS" header="LMS" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
												
													<p-column [style]="{'width':'80px', 'text-align':'center'}">
														<ng-template pTemplate="header">
															View
														</ng-template>
														<ng-template let-row="rowData" let-i="rowIndex" pTemplate="body">
															<button type="button" (click)="viewChecklistDetails(row)">
															<i class="glyphicon glyphicon-eye-open"></i>
															</button>
														</ng-template>
													</p-column>
													<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
														<ng-template pTemplate="header"></ng-template>
														<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
															<div style="text-align:center">
																<a i18n (click)="forward(d.conditionId, d.operationId, 1)" href="javascript:void(0)">Flag As Documented</a>
															</div>
														</ng-template>
													</p-column>
												</p-dataTable>
											</p-tabPanel >
								
											<p-tabPanel i18n-header  header="Deferral Memo" [disabled]="itemSelected == false">
												<div class="panel panel-default">
													<div class="panel-heading">
														<div class="row">
															<div class="col-md-12">
																<h2 i18n class="panel-title pull-left">
																	Deferral Memo
																</h2>
																<button i18n type="button" (click)="printDocumentByElemntId('Deferral Memo','deferralWaiverPdf')" class="btn btn-success pull-right">
																Generate PDF
																</button>
															</div>
														</div>
													</div>
													<div class="panel-body" id="deferralWaiverPdf" [innerHtml]="ckEditorContent">
													</div>
												</div>
											</p-tabPanel >
								
											<p-tabPanel i18n-header  header="Supporting Documents" [disabled]="itemSelected == false">
												<document-upload [reload]="selectedChecklistData?.conditionId" [operationId]="selectedChecklistData?.operationId"
													[targetId]="selectedChecklistData?.conditionId" [customerId]="selectedChecklistData?.customerId"
													[targetReferenceNumber]="selectedChecklistData?.applicationReferenceNumber">
												</document-upload>
											</p-tabPanel >
								
											<p-tabPanel i18n-header  header="Comments" [disabled]="itemSelected == false">
												<div class="panel panel-default">
													<app-approval-comments [operationId]="selectedChecklistData?.operationId"
														[applicationId]="selectedChecklistData?.conditionId">
													</app-approval-comments>
												</div>
											</p-tabPanel >
										</p-tabView>
									</div>
								</div>
								<div class="panel-footer" *ngIf="activeTabindex1 != 0">
									<div class="row">
									<div class="col-md-12">
										<div class="btn-group pull-right">
											<button i18n (click)="hideModal(1)" type="button" class="btn btn-danger" style="margin-right:5px">Close</button>
										</div>
									</div>
									</div>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Deferred Document Approval Documentation
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<p-dataTable [value]="deferralDocuments" [rows]="10" [paginator]="true">
										<p-column i18n-header field="dateCreated" header="Arrival Date" sortable="true" [filter]="true" filterMatchMode="contains">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.dateCreated | date: 'medium'}}
											</ng-template>
										</p-column>
										<p-column i18n-header field="applicationReferenceNumber" header="Reference Number" sortable="true" [filter]="true"
										filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="customerName" header="Customer Name" sortable="true" [filter]="true" filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="condition" header="Condition" sortable="true" [filter]="true" filterMatchMode="contains">
										</p-column>
										<!-- <p-column i18n-header field="deferredDate" header="Deferred Date" sortable="true" [filter]="true" filterMatchMode="contains">
										<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
											{{ d.nextCallDate | date: 'medium'}}
										</ng-template>
										</p-column> -->
										<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" filterMatchMode="contains"
										[filter]="true">
										</p-column>
										<p-column [style]="{'width':'100px'}">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template pTemplate="body" let-col let-d="rowData" let-i="rowIndex">
												<a i18n (click)="viewProvision(d)" href="javascript:void(0)">View</a>
											</ng-template>
										</p-column>
										<p-column [style]="{'width':'100px'}">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template pTemplate="body" let-col let-d="rowData" let-i="rowIndex">
												<a i18n (click)="forward(d.conditionId, d.operationId, 9)" href="javascript:void(0)">Flag As Documented</a>
											</ng-template>
										</p-column>
									</p-dataTable>
								</div>
							</div>
							<div class="panel panel-default">
								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Deferral Extension Approval Documentation
											</h2>
										</div>
									</div>
								</div>
							
								<div class="panel-body">
									<p-dataTable [value]="deferralDocumentsExtension" [rows]="10" [paginator]="true">
										<p-column i18n-header field="dateCreated" header="Arrival Date" sortable="true" [filter]="true" filterMatchMode="contains">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.dateCreated | date: 'medium'}}
											</ng-template>
										</p-column>
										<p-column i18n-header field="applicationReferenceNumber" header="Reference Number" sortable="true" [filter]="true" filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="customerName" header="Customer Name" sortable="true" [filter]="true" filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="condition" header="Condition" sortable="true" [filter]="true" filterMatchMode="contains">
										</p-column>
										<!-- <p-column i18n-header field="deferredDate" header="Deferred Date" sortable="true" [filter]="true" filterMatchMode="contains">
										<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
											{{ d.nextCallDate | date: 'medium'}}
										</ng-template>
										</p-column> -->
										<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" filterMatchMode="contains"
										[filter]="true">
										</p-column>
										<p-column [style]="{'width':'100px'}">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template pTemplate="body" let-col let-d="rowData" let-i="rowIndex">
												<a i18n (click)="viewdeferralExtension(d)" href="javascript:void(0)">View</a>
											</ng-template>
										</p-column>
										<p-column [style]="{'width':'100px'}">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template pTemplate="body" let-col let-d="rowData" let-i="rowIndex">
												<a i18n (click)="forward(d.conditionId, d.operationId, 10)" href="javascript:void(0)">Flag As Documented</a>
											</ng-template>
										</p-column>
									</p-dataTable>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Original Document Submission">
							<div class="panel panel-default">
								<div class="panel-body">
								<p-tabView [activeIndex]="activeTabindex3">
									<p-tabPanel i18n-header  header="Document Upload">
									<div style="margin-bottom:0" class="panel panel-default">
										<div class="panel-heading">
											<p-dataTable [value]="originalDocumentApprovals" [paginator]="true" [rows]="10"
												[rowsPerPageOptions]="[10,20,30]">
												<p-column i18n-header field="systemArrivalDateTime" header="Arrival Date" sortable="true" [filter]="true"
												filterMatchMode="contains">
													<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
														{{ d.systemArrivalDateTime | date: 'medium' }}
													</ng-template>
												</p-column>
												<p-column i18n-header field="collateralCustomerId" header="Collateral Customer Id" sortable="true">
												</p-column>
												<p-column i18n-header field="referenceNumber" header="Upload Reference Number" sortable="true" [filter]="true"
												filterMatchMode="contains"></p-column>
												<p-column i18n-header field="description" header="Description" sortable="true" [filter]="true"
												filterMatchMode="contains"></p-column>
												<p-column i18n-header field="isOriginalTitleDocumentString" header="Is Original Titke Document" sortable="true" [filter]="true"
												filterMatchMode="contains"></p-column>
												<p-column i18n-header field="approvalStatusName" header="Approval Status" sortable="true" [filter]="true"
												filterMatchMode="contains"></p-column>
												<p-column i18n-header field="approvalDate" header="Date Approved" sortable="true" [filter]="true"
												filterMatchMode="contains">
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<span *ngIf=" d.approvalDate !=null">{{ d.approvalDate | date: 'medium' }}</span>
													<span *ngIf="d.approvalDate == null">{{ d.dateTimeCreated | date: 'medium' }}</span>
												</ng-template>
												</p-column>
												<p-column>
												<ng-template pTemplate="header"></ng-template>
												<ng-template let-row="rowData" let-i="rowIndex" pTemplate="body">
													<a (click)="viewOriginalDocDetail(row)" href="javascript:void(0)"><i class="glyphicon glyphicon-eye"></i>
													<ng-container i18n>View Detail</ng-container>
													</a>
												</ng-template>
												</p-column>
												<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
													<ng-template pTemplate="header"></ng-template>
													<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
														<div style="text-align:center">
															<a i18n (click)="forward(d.originalDocumentApprovalId, d.operationId, 3)" href="javascript:void(0)">Flag As Documented</a>
														</div>
													</ng-template>
												</p-column>
											</p-dataTable>
										</div>
									</div>
									</p-tabPanel >
									<p-tabPanel i18n-header  header="Facility Detail" [disabled]="facilityDetailForOriginalDocSub==false">
									<div style="margin-bottom:0" class="panel panel-default">
										<div class="panel-heading">
											<h2 i18n class="panel-title">
												Facility Details
											</h2>
										</div>
										<div class="panel-body">
											<table *ngIf="OrignalDocLoanSelection != null" class="table table-customer-information">
												<tbody>
								
												<tr>
													<td>
													<strong i18n>Application Reference No:</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.applicationReferenceNumber ?
																		OrignalDocLoanSelection.applicationReferenceNumber : 'N/A'}}</td>
								
													<td>
													<strong i18n>Customer Code</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.customerCode }}</td>
													<td>
													<strong i18n>Customer Name</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.customerName ? OrignalDocLoanSelection.customerName : 'N/A'}}</td>
												</tr>
								
												<tr>
													<td>
													<strong i18n>Branch Name</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.branchName }}</td>
													<td>
													<strong i18n> product Name</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.productName }}</td>
												</tr>
												<tr>
													<td>
													<strong i18n>Initiating Officer</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.relationshipOfficerName ? OrignalDocLoanSelection.relationshipOfficerName :
																'N/A' }}</td>
													<!-- <td>
													<strong i18n>Business Manager</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.relationshipManagerName }}</td> -->
													<td>
													<strong i18n> Product Index</strong>
													</td>
													<td>{{OrignalDocLoanSelection.productPriceIndex}}</td>
												</tr>
												<tr>
													<td>
													<strong i18n> Application Date</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.applicationDate | date }}</td>
													<td>
													<strong i18n>Application Amount</strong>
													</td>
													<td>{{ OrignalDocLoanSelection.applicationAmount }}</td>
													<td>
													<strong i18n> Interest Rate</strong>
													</td>
													<td>{{OrignalDocLoanSelection.interestRate}}</td>
												</tr>
								
												</tbody>
											</table>
										</div>
										<div class="panel-body">
											<p-dataTable [value]="documentUploadsOriginalDocSub" [responsive]="true" [paginator]="true" [rows]="5">
												<p-column header="File Name">
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<span *ngIf="d.fileExtension == 'doc'" class="icon-file-word"></span>
													<span *ngIf="d.fileExtension == 'docx'" class="icon-file-word"></span>
													<span *ngIf="d.fileExtension == 'pdf'" class="icon-file-pdf"></span>
													<span *ngIf="d.fileExtension == 'jpg'" class="icon-file-picture"></span>
													<span *ngIf="d.fileExtension == 'jpeg'" class="icon-file-picture"></span>
													<span *ngIf="d.fileExtension == 'png'" class="icon-file-picture"></span>
													<span *ngIf="d.fileExtension == 'txt'" class="icon-file-text"></span>
													<span *ngIf="d.fileExtension == 'xls'" class="icon-file-excel"></span>
													<span *ngIf="d.fileExtension == 'xlsx'" class="icon-file-excel"></span>
													{{d.fileName}}
												</ng-template>
												</p-column>
												<p-column i18n-header field="fileSizeString" header="File Size" sortable="true" filterMatchMode="contains"
												[style]="{'width':'100px'}"></p-column>
												<p-column i18n-header field="documentTypeName" header="Document Type" sortable="true" filterMatchMode="contains">
												</p-column>
												<p-column i18n-header field="documentCategoryName" header="Document Category" sortable="true"
												filterMatchMode="contains">
												</p-column>
												<p-column [style]="{'width':'120px'}">
												<ng-template pTemplate="header"> </ng-template>
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<div style="text-align:center">
													<a i18n *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1"
														(click)="downloadDocument(d,true)" href="javascript:void(0)">View</a>
													<a i18n *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1"
														(click)="downloadDocument(d)" href="javascript:void(0)">Download</a>
													</div>
												</ng-template>
												</p-column>
											</p-dataTable>
										</div>
										<div class="panel-footer" *ngIf="activeTabindex3 != 0">
											<div class="row">
											<div class="col-md-12">
												<div class="btn-group pull-right">
													<button i18n (click)="hideModal(3)" type="button" class="btn btn-danger" style="margin-right:5px">Back To List</button>
													<!-- <button type="button" (click)="goForApproval(selectedChecklistData)" class="btn btn-success">Submit</button> -->
												</div>
											</div>
											</div>
										</div>
									</div>
									</p-tabPanel >
									<p-tabPanel i18n-header  header="Approval Comments">
										<div *ngIf="operationId3>0">
											<app-approval-comments [requireAll]=false [operationId]="operationId3"
												[applicationId]="targetId3" [tableLabel]="'Original Documments Approval Comments'">
											</app-approval-comments>
										</div>
									</p-tabPanel >
								</p-tabView>
								</div>
								<div class="panel-footer" *ngIf="activeTabindex3 != 0">
									<div class="row">
										<div class="col-md-12">
											<div class="btn-group pull-right">
												<button i18n (click)="hideModal(3)" type="button" class="btn btn-danger" style="margin-right:5px">Close</button>
											</div>
										</div>
									</div>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Security Release">
							<div class="panel panel-default">
								<p-tabView>
									<p-tabPanel i18n-header  header="Approved Items">
										<div class="panel-body">
										<p-dataTable [value]="approvalReleases" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,20,30]">
											<p-column i18n-header field="dateRecieved" header="Arrival Date" sortable="true" [filter]="true"
											filterMatchMode="contains">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.dateRecieved | date: 'medium' }}
											</ng-template>
											</p-column>
											<p-column i18n-header field="customerName" header="Customer Name" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
											<p-column i18n-header field="collateralCode" header="Collateral ID" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
											<p-column i18n-header field="documentDescription" header="Description" sortable="true" [filter]="true"
											filterMatchMode="contains">
											</p-column>
											<p-column i18n-header field="documentReferenceNumber" header="Document Reference Number" sortable="true" [filter]="true"
											filterMatchMode="contains">
											</p-column>
											<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
											<p-column i18n-header field="createdByName" header="Created By" sortable="true" [filter]="true"
											filterMatchMode="contains">
											</p-column>
											<p-column [style]="{'width':'80px'}" header="">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												<div style="text-align:center">
												<a i18n (click)="viewDocumentsForSecurityRelease(d)" href="javascript:void(0)">View </a>
												</div>
											</ng-template>
											</p-column>
											<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
												<ng-template pTemplate="header"></ng-template>
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<div style="text-align:center">
														<a i18n (click)="forward(d.originalDocumentApprovalId, d.operationId, 2)" href="javascript:void(0)">Flag As Documented</a>
													</div>
												</ng-template>
											</p-column>
										</p-dataTable>
										</div>
								
									</p-tabPanel >
								</p-tabView>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Letter Generation">
							<div class="panel panel-default">

								<div class="panel-heading">
									<div class="row">
										<div class="col-md-12">
											<h2 i18n class="panel-title pull-left">
												Letter Generation requests
											</h2>
										</div>
									</div>
								</div>
								<div class="panel-body">
									<p-dataTable [value]="letterGenerationRequests" [responsive]="true" [paginator]="false" [rows]="5" let
										i="index">
										<p-column i18n-header field="systemArrivalDateTime" header="Arrival Date" [filter]="false">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.systemArrivalDateTime | date: 'medium' }}
											</ng-template>
										</p-column>
										<p-column i18n-header field="requestRef" header="Reference Id" sortable="true" filterMatchMode="contains"></p-column>
										<p-column i18n-header field="customerName" header="Customer" sortable="true" filterMatchMode="contains"></p-column>
										<p-column i18n-header field="requestType" header="Request Type" sortable="true" filterMatchMode="contains">
											<ng-template let-d="rowData" pTemplate="body">
												<div style="text-align:center">
													{{ getRequestTypeName(d.requestType) }}
												</div>
											</ng-template>
										</p-column>
										<p-column i18n-header field="loanBalance" header="Outstanding Amount" sortable="true" filterMatchMode="contains"></p-column>
										<p-column i18n-header field="requestDate" header="Request Date" sortable="true" filterMatchMode="contains">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.requestDate | date: 'medium' }}
											</ng-template>
										</p-column>
										<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" filterMatchMode="contains"></p-column>
										<p-column i18n-header [style]="{'width':'100px'}" header="View">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												<div style="text-align:center">
													<a i18n (click)="editLetterGenerationRequest(d)" href="javascript:void(0)">View</a>
												</div>
											</ng-template>
										</p-column>
										<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
											<ng-template pTemplate="header"></ng-template>
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												<div style="text-align:center">
													<a i18n (click)="forward(d.requestId, d.operationId, 4)" href="javascript:void(0)">Flag As Documented</a>
												</div>
											</ng-template>
										</p-column>
									</p-dataTable>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Project Site Report">
							<div style="margin-bottom:0" class="panel panel-default">
								<div class="panel-heading">
								<div class="row">
									<div class="col-md-12">
										<h2 i18n class="panel-title pull-left">
											Project Site Report Requests
										</h2>
									</div>
								</div>
								</div>
								<div style="padding:3px" class="panel-body">
								<p-tabView>
									<p-tabPanel i18n-header  header="Project Site Report">
									<div class="panel-heading">
										<div class="row">
											<div class="col-md-12">
												<h2 i18n class="panel-title pull-left">
													Project Site Report
												</h2>
											</div>
										</div>
									</div>
									<div class="panel-body">
						
										<p-dataTable [value]="ProjectSiteReports" [responsive]="true" [paginator]="true" [rows]="5">
										<p-column i18n-header field="systemArrivalDateTime" header="Arrival Date" [filter]="false">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.systemArrivalDateTime | date: 'medium' }}
											</ng-template>
										</p-column>
										<p-column i18n-header field="clientName" header="Client Name" sortable="true" [filter]="true"
											filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="contractorName" header="Contractor Name" sortable="true" [filter]="true"
											filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="consultantName" header="Consultant Name" sortable="true" [filter]="true"
											filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="psrRepeortType" header="Facility Type" sortable="true" filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="projectAmount" header="Project Cost" sortable="true" filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="currency" header="Currency" sortable="true"
																filterMatchMode="contains"></p-column>
										<p-column i18n-header field="projectDescription" header="Project Description" sortable="true"
											filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true" filterMatchMode="contains"></p-column>
										<p-column i18n-header [style]="{'width':'200px'}" header="View">
											<ng-template pTemplate="header"> </ng-template>
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
											<div style="text-align:center">
												<a i18n (click)="showPsrReport(d)" href="javascript:void(0)">Show Report</a>
												<span style="padding:3px;">|</span>
												<a i18n (click)="forward(d.projectSiteReportId, d.operationId, 5)" href="javascript:void(0)">Flag As Documented</a>
												<span style="padding:3px;">|</span>
												<a i18n (click)="showPsrDetail(d)" href="javascript:void(0)">Comments</a>
											</div>
											</ng-template>
										</p-column>
										</p-dataTable>
									</div>
									</p-tabPanel >
								</p-tabView>
								</div>
							</div>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Collateral Valuation">
							<p-tabView>
								<p-tabPanel i18n-header  header="Collateral Valuations">
									<div class="row" style="padding:0 15px 0 15px;">
										<p-dataTable [responsive]="true" [paginator]="true" [rows]="10" [value]="valuationPrerequisites">
											<p-column i18n-header field="systemArrivalDateTime" header="Arrival Date" [filter]="false">
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													{{ d.systemArrivalDateTime | date: 'medium' }}
												</ng-template>
											</p-column>
											<p-column i18n-header field="referenceNumber" header="Reference Number">
											</p-column>
											<p-column i18n-header field="customerName" header="Customer Name">
											</p-column>
											<p-column i18n-header field="customerAccount" header="Customer Account Number">
											</p-column>
											<p-column i18n-header field="collateralCode" header="Collateral Code">
											</p-column>
											<p-column i18n-header field="collateralType" header="Collateral Type">
											</p-column>
											<p-column i18n-header field="valuationName" header="Valuation Name">
											</p-column>
											<p-column i18n-header field="valuationReason" header="Valuation Reason">
											</p-column>
											<p-column i18n-header field="approvalStatus" header="Approval Status">
											</p-column>
											<p-column i18n-header [style]="{'width':'150px'}" header="View">
												<ng-template pTemplate="header"> </ng-template>
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<div style="text-align:center">
														<a i18n (click)="viewValuationDetail(d)" href="javascript:void(0)">View Details</a>
													</div>
												</ng-template>
											</p-column>
											<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
												<ng-template pTemplate="header"></ng-template>
												<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													<div style="text-align:center">
														<a i18n (click)="forward(d.valuationPrerequisiteId, d.operationId, 6)" href="javascript:void(0)">Flag As Documented</a>
													</div>
												</ng-template>
											</p-column>
										</p-dataTable>
									</div>
								</p-tabPanel >
							</p-tabView>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Collateral Swap">
							<p-tabView>
								<p-tabPanel i18n-header  header="Collateral Swap Requests">
									<div class="panel panel-default">
										<div class="panel-heading">
											<div class="row">
												<div class="col-md-12">
													<h2 i18n class="panel-title pull-left">Collateral Swap Requests</h2>
												</div>
											</div>
										</div>
										<div class="panel-body">
											<p-dataTable [value]="collateralSwapRequests" [paginator]="true" [rows]="10"
												[rowsPerPageOptions]="[10,20,30]">
												<p-column i18n-header field="systemArrivalDateTime" header="Arrival Time" sortable="true" [filter]="true" filterMatchMode="contains">
													<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
														{{ d.systemArrivalDateTime | date: 'medium' }}
													</ng-template>
												</p-column>
												<p-column i18n-header field="applicationReferenceNumber" header="Loan Reference" sortable="true" [filter]="true"
													filterMatchMode="contains"></p-column>
												<p-column i18n-header field="productName" header="Facility" sortable="true" [filter]="true"
													filterMatchMode="contains"></p-column>
												<p-column i18n-header field="customerName" header="Customer Name" sortable="true"
													[filter]="true" filterMatchMode="contains"></p-column>
												<p-column i18n-header field="swapRef" header="Swap Reference" sortable="true" [filter]="true"
													filterMatchMode="contains"></p-column>
												<p-column i18n-header field="oldCollateralCode" header="Old Collateral Code" sortable="true"
													[filter]="true" filterMatchMode="contains"></p-column>
												<p-column i18n-header field="newCollateralCode" header="New Collateral Code" sortable="true"
													[filter]="true" filterMatchMode="contains"></p-column>
												<p-column i18n-header field="approvalStatus" header="Approval Status" sortable="true"
													[filter]="true" filterMatchMode="contains"></p-column>
												<p-column>
													<ng-template pTemplate="header"></ng-template>
													<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
														<a i18n (click)="viewSwapInfo(d)" href="javascript:void(0)">See Swap Info</a>
													</ng-template>
												</p-column>
												<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
													<ng-template pTemplate="header"></ng-template>
													<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
														<div style="text-align:center">
															<a i18n (click)="forward(d.collateralSwapId, d.operationId, 7)" href="javascript:void(0)">Flag As Documented</a>
														</div>
													</ng-template>
												</p-column>
											</p-dataTable>
										</div>
									</div>
								</p-tabPanel >
							</p-tabView>
						</p-accordionTab>
						<p-accordionTab i18n-header header="Collateral Insurance">
							<div class="panel panel-default">
								<div class="panel-heading">
									<h2 i18n class="panel-title">Collateral Item Policy</h2>
								</div>
								<div class="panel-body">
									<p-dataTable [value]="itemPolicy" [paginator]="true" [rows]="5">
										<p-column i18n-header field="arrivalTime" header="Arrival Time" sortable="true">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
													{{ d.arrivalTime | date:'medium' }}
												</ng-template>
										</p-column>
										<p-column i18n-header field="requestNumber" header="Insurance Request No." sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
										<p-column i18n-header field="requestReason" header="Reason" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
										<p-column i18n-header field="requestComment" header="Comment" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
										<p-column i18n-header field="collateralCode" header="Collateral Ref. No." sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
										<p-column i18n-header field="collateralType" header="Collateral Type" sortable="true" [filter]="true"
											filterMatchMode="contains"></p-column>
										<p-column i18n-header field="collateralSubType" header="Sub Type" sortable="true" [filter]="true"
											filterMatchMode="contains">
										</p-column>
										<p-column i18n-header field="collateralValue" header="Collateral Value" sortable="true" [filter]="true"
											filterMatchMode="contains" [style]="{'text-align':'right'}">
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												{{ d.collateralValue | number : '1.2' }}
											</ng-template>
										</p-column>
										<p-column i18n-header field="approvalStatusName" header="Approval Status" sortable="true" [filter]="true"
											filterMatchMode="contains">
										</p-column>
										<p-column [style]="{'width':'150px'}">
											<ng-template pTemplate="header"></ng-template>
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												<div style="text-align:center">
													<a i18n (click)="getPolicyInformation(d)" href="javascript:void(0)">View</a>
												</div>
											</ng-template>
										</p-column>
										<p-column i18n-header [style]="{'width':'100px'}" header="After Printing">
											<ng-template pTemplate="header"></ng-template>
											<ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
												<div style="text-align:center">
													<a i18n (click)="forward(d.insuranceRequestId, d.operationId, 8)" href="javascript:void(0)">Flag As Documented</a>
												</div>
											</ng-template>
										</p-column>
									</p-dataTable>
								</div>
							</div>
						</p-accordionTab>
					</p-accordion>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- #region others -->
<p-dialog [responsive]=true [(visible)]="displayDocument" modal="modal" showEffect="fade" width="1200">
    <div style="margin-bottom:0" class="panel panel-default">
  
        <div class="panel-heading">
            <h2   class="panel-title">
               <ng-container i18n>Document Title:</ng-container>
                <strong>{{ selectedDocument }}</strong>
            </h2>
            <div class="pull-right">
                <a class="close" (click)="displayDocument=false">&times;</a>
            </div>
        </div>
  
        <div class="panel-body" style="overflow:auto;height:450px">
  
            <img *ngIf="binaryFile" style="max-width: 100%; display: block 2px black;" [src]="'data:image/jpg;base64,'+binaryFile"
                alt="" class="img-thumbnail">
  
        </div>
  
    </div>
  </p-dialog>

<p-dialog [responsive]=true [(visible)]="showUploadeddocumentForSecurityRelease" id="add-modal" modal="modal" showEffect="fade"
[contentStyle]="{'overflow':'auto','max-height':'700px','max-width':'1300px'}">
    <div class="panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Security Release
            </h2>
        </div>
        <div class="panel-body">
            <p-tabView [activeIndex]="activeTabindex2">
                <p-tabPanel i18n-header  header=" Uploaded Documents">
                    <p-dataTable [value]="documentUploadsForSecurityRelease" [responsive]="true" [paginator]="true" [rows]="5">
                        <p-column header="File Name">
                            <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                <span *ngIf="d.fileExtension == 'doc'" class="icon-file-word"></span>
                                <span *ngIf="d.fileExtension == 'docx'" class="icon-file-word"></span>
                                <span *ngIf="d.fileExtension == 'pdf'" class="icon-file-pdf"></span>
                                <span *ngIf="d.fileExtension == 'jpg'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'jpeg'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'png'" class="icon-file-picture"></span>
                                <span *ngIf="d.fileExtension == 'txt'" class="icon-file-text"></span>
                                <span *ngIf="d.fileExtension == 'xls'" class="icon-file-excel"></span>
                                <span *ngIf="d.fileExtension == 'xlsx'" class="icon-file-excel"></span>
                                {{d.fileName}}
                            </ng-template>
                        </p-column>
                        <p-column i18n-header field="fileSizeString" header="File Size" sortable="true" filterMatchMode="contains"
                        [style]="{'width':'100px'}"></p-column>
                        <p-column i18n-header field="documentTypeName" header="Document Type" sortable="true" filterMatchMode="contains">
                        </p-column>
                        <p-column i18n-header field="documentCategoryName" header="Document Category" sortable="true"
                        filterMatchMode="contains">
                        </p-column>
                        <p-column [style]="{'width':'120px'}">
                        <ng-template pTemplate="header"> </ng-template>
                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                            <div style="text-align:center">
                            <a i18n *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="downloadDocument(d,true)" href="javascript:void(0)">View</a>
                            <a i18n *ngIf="['doc','docx', 'pdf','xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1"
                                (click)="downloadDocument(d)" href="javascript:void(0)">Download</a>
                            </div>
                        </ng-template>
                        </p-column>
                    </p-dataTable>
                </p-tabPanel >
                <p-tabPanel i18n-header  header="Approval Comments">
                    <div *ngIf="operationId2 > 0">
                        <app-approval-comments [requireAll]=false [operationId]="operationId2"
                            [applicationId]="targetId2" [tableLabel]="'Security Release Comments'">
                        </app-approval-comments>
                    </div>
                </p-tabPanel >
          
                <p-tabPanel i18n-header  header="Supporting Documents">
                    <div class="panel panel-default">
                        <document-upload [operationId]="147" [customerId]="CUSTOMER_ID"
                            [targetId]="TARGET_ID" [isLms]="false" [reload]="TARGET_ID"
                            (requiredDocumentsUploadSatisfied)="true" [targetReferenceNumber]="REFERENCE_NUMBER">
                        </document-upload>
                    </div>
                </p-tabPanel >
            </p-tabView>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button (click)="showUploadeddocumentForSecurityRelease=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayLetterGenerationRequestForm" id="ct-modal" modal="modal"
    showEffect="fade" width="1000" [contentStyle]="{'overflow':'auto','max-height':'700px'}">

    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Letter Generation Request
            </h2>
		</div>
		<p-tabPanel i18n-header  header="Signatories">
			<p-dataTable [responsive]="true" [value]="letterGenerationsignatories">
				<p-column i18n-header field="signatoryTitle" header="Signatory's Tile ">
				</p-column>
				<p-column i18n-header field="signatoryName" header="Signatory's Name">
				</p-column>
				<p-column i18n-header field="signatoryInitials" header="Signatory's Initials">
				</p-column>
			</p-dataTable>
		</p-tabPanel >
        <p-tabView [activeIndex]="activeTabindex4">
            <p-tabPanel i18n-header  header="Print Document">
                <div class="panel panel-default">
                    <div class="panel-heading">
					</div>
                    <div class="panel-body" id="camsolLoanDocument" [innerHtml]="camsolLoanDocHtml">
					</div>
                </div>
            </p-tabPanel >
            <p-tabPanel i18n-header  header="Comments">
                <div *ngIf="operationId4>0">
                    <app-approval-comments [requireAll]=false [operationId]="operationId4"
                        [applicationId]="targetId4" [tableLabel]="'Leter Generation Approval Comments'">
                    </app-approval-comments>
                </div>
            </p-tabPanel >
        </p-tabView>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button i18n (click)="displayLetterGenerationRequestForm=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                        <button i18n type="button" (click)="printCamsolLoanDocument()" style="margin-right:5px"
                            [disabled]="activeTabindex4 != 0" class="btn btn-success pull-right">Print Document</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayCollateralValuationRequestForm" id="ct-modal" modal="modal"
    showEffect="fade" width="1000" [contentStyle]="{'overflow':'auto','max-height':'700px'}">

    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Collateral Valuation Request
            </h2>
        </div>

        <p-tabView [activeIndex]="activeTabindex6">
            <p-tabPanel i18n-header  header="Download document">
                <document-upload *ngIf="targetId6 > 0 && operationId6 > 0"
                    [deleteLink]="false"
                    [panelTitle]="'Collateral Valuation'"
                    [showUploadForm]="false" 
                    [operationId]="operationId6"
                    [targetId]="targetId6" 
                    [reload]="targetId6"
                    [customerId]="valuationCustomerId"
                    [targetReferenceNumber]="valuationReferenceNumber">
                </document-upload>
            </p-tabPanel >
            <p-tabPanel i18n-header  header="Comments">
                <div *ngIf="operationId6>0">
                    <app-approval-comments [requireAll]=false [operationId]="operationId6"
                        [applicationId]="targetId6" [tableLabel]="'Collateral Valuation Approval Comments'">
                    </app-approval-comments>
                </div>
            </p-tabPanel >
        </p-tabView>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button i18n (click)="displayCollateralValuationRequestForm=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayCollateralSwapForm" id="ct-modal" modal="modal"
    showEffect="fade" width="1000" [contentStyle]="{'overflow':'auto','max-height':'700px'}">

    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Collateral Swap
            </h2>
        </div>

        <p-tabView [activeIndex]="activeTabindex7">
            <p-tabPanel i18n-header  header="Download document">
                <document-upload *ngIf="targetId7 > 0 && operationId7 > 0"
                    [deleteLink]="false"
                    [panelTitle]="'Collateral Swap'"
                    [showUploadForm]="false" 
                    [operationId]="operationId7"
					[targetId]="targetId7"
                    [reload]="targetId7">
                </document-upload>
            </p-tabPanel >
            <p-tabPanel i18n-header  header="Comments">
                <div *ngIf="operationId7>0">
                    <app-approval-comments [requireAll]=false [operationId]="operationId7"
                        [applicationId]="targetId7" [tableLabel]="'Collateral Swap Approval Comments'">
                    </app-approval-comments>
                </div>
            </p-tabPanel >
        </p-tabView>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button i18n (click)="displayCollateralSwapForm=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayCollateralInsuranceForm" id="ct-modal" modal="modal"
    showEffect="fade" width="1000" [contentStyle]="{'overflow':'auto','max-height':'700px'}">

    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Collateral Insurance
            </h2>
        </div>

        <p-tabView [activeIndex]="activeTabindex8">
            <p-tabPanel i18n-header  header="Download document">
                <document-upload *ngIf="targetId8 > 0 && operationId8 > 0"
                    [deleteLink]="false"
                    [panelTitle]="'Collateral Insurance'"
                    [showUploadForm]="false" 
                    [operationId]="operationId8"
                    [targetId]="targetId8"
                    [reload]="targetId8">
                </document-upload>
            </p-tabPanel >
            <p-tabPanel i18n-header  header="Comments">
                <div *ngIf="operationId8>0">
                    <app-approval-comments [requireAll]=false [operationId]="operationId8"
                        [applicationId]="targetId8" [tableLabel]="'Collateral Insurance Approval Comments'">
                    </app-approval-comments>
                </div>
            </p-tabPanel >
        </p-tabView>

        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button i18n (click)="displayCollateralInsuranceForm=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="showProjectSiteDetail" id="ct-modal" modal="modal"
    showEffect="fade" width="1000" [contentStyle]="{'overflow':'auto','max-height':'700px'}">

    <div class="panel panel-default">
        <div class="panel-body">
            <p-tabView>
                <p-tabPanel i18n-header  header="PSR Details">
                    <p-accordion>
                        <!-- ===================================== -->
                        <p-accordionTab i18n-header header="Performance Analysis" [selected]="true"
                        *ngIf="psrReportTypeId == 2">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h2 i18n class="panel-title pull-left">
                                            PERFORMANCE ANALYSIS
                                        </h2>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body" *ngIf="showInput">
                                <p-dataTable [value]="performanceAnalysisReport" [responsive]="true"
                                    [paginator]="false" [rows]="5">
                                    <p-column i18n-header field="valueOfCollateral" header="Value Of Collateral"
                                        sortable="true" filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            {{ d.valueOfCollateral | number : '1.2' }}
                                        </ng-template>
                                    </p-column>
                                    <p-column i18n-header field="ipc" header="Certified VOWD to Date" sortable="true"
                                        filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            {{ d.ipc | number : '1.2' }}
                                        </ng-template>
                                    </p-column>
                                    <p-column i18n-header field="pmu" header="PMU assessed Work to Date" sortable="true"
                                        filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            {{ d.pmu | number : '1.2' }}
                                        </ng-template>
                                    </p-column>
                                    <p-column i18n-header field="amountDisbursed" header="Amount Disbursed"
                                        sortable="true" filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            {{ d.amountDisbursed | number : '1.2' }}
                                        </ng-template>
                                    </p-column>
                                    <p-column i18n-header field="amountRequested" header="Amount Requested"
                                        sortable="true" filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            {{ d.amountRequested | number : '1.2' }}
                                        </ng-template>
                                    </p-column>

                                    <p-column i18n-header [style]="{'width':'200px'}" header="View">
                                        <ng-template pTemplate="header"> </ng-template>
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            <div style="text-align:center">
                                                <a i18n (click)="myAnalysisDetail(d)"
                                                    href="javascript:void(0)">Detail</a>
                                            </div>
                                        </ng-template>
                                    </p-column>
                                </p-dataTable>
                            </div>
                            <div class="panel-body">
                                <table *ngIf="showAnalysisDetail" class="table table-casa-information">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <strong i18n>Value Of Collateral:</strong>
                                            </td>
                                            <td>
                                                {{analysisDetail.valueOfCollateral | number : '1.2' }}
                                            </td>
                                            <td>
                                                <strong i18n>Certified VOWD to Date:</strong>
                                            </td>
                                            <td>{{ analysisDetail.ipc | number : '1.2' }}
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <strong i18n>PMU assessed Work to Date:</strong>
                                            </td>
                                            <td>{{ analysisDetail.pmu | number : '1.2' }}</td>
                                            <td>
                                                <strong></strong>
                                            </td>
                                            <td></td>

                                        </tr>
                                        <tr>
                                            <td>
                                                <strong i18n>Amount Disbursed:</strong>
                                            </td>
                                            <td>{{ analysisDetail.amountDisbursed | number : '1.2' }}
                                            </td>
                                            <td>
                                                <strong i18n>Requested Amount:</strong>
                                            </td>
                                            <td>{{ analysisDetail.amountRequested | number : '1.2' }}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="panel-footer" *ngIf="showAnalysisDetail">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="pull-right">
                                                <button
                                                    (click)="showInput=true; showAnalysisDetail=false;"
                                                    pButton type="button" i18n-label label="Back"
                                                    icon="fa-plus"></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p-accordionTab>
                        <!-- =========================================== -->
                        <p-accordionTab i18n-header header="Performance Evaluation" >
                            <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-12">
                                <h2 i18n class="panel-title pull-left">
                                    PERFORMANCE EVALUATION
                                </h2>
                                <div class="pull-right">

                                </div>
                                </div>
                            </div>
                            </div>
                            <div class="panel-body">
                            <p-dataTable [value]="performanceEvaluationsReport" [responsive]="true" [paginator]="true"
                                [rows]="5">
                                <p-column i18n-header field="psrReportType" header="Report Type" sortable="true"
                                filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="projectSum" header="Project Sum" sortable="true"
                                    [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.projectSum | number : '1.2' }}
                                    </ng-template>
                                </p-column>
                                <p-column i18n-header field="apgIssued" header="APG Issued" sortable="true"
                                [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                    {{ d.apgIssued | number : '1.2' }}
                                </ng-template>
                                </p-column>
                                <p-column i18n-header field="paymentToDate" header="Progress Payment To Date" sortable="true"
                                [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                    {{ d.paymentToDate | number : '1.2' }}
                                </ng-template>
                                </p-column>
                                <p-column i18n-header field="disbursedTodate" header="Progress Payment To Date" sortable="true"
                                [filter]="true" filterMatchMode="contains" [style]="{'text-align':'right'}">
                                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                    {{ d.disbursedTodate | number : '1.2' }}
                                </ng-template>
                                </p-column>
                                <p-column i18n-header [style]="{'width':'200px'}" header="View">
                                <ng-template pTemplate="header"> </ng-template>
                                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                    <div style="text-align:center">
                                    <a i18n (click)="viewPerformanceEvaluationsDetail(d)" href="javascript:void(0)">Detail</a>
                                    </div>
                                </ng-template>
                                </p-column>
                            </p-dataTable>
                            </div>
                            <div class="panel-body" *ngIf="evaluationDetail">

                            <table class="table table-casa-information">
                                <tbody>
                                <tr>
                                    <td>
                                    <strong i18n>Project Sum:</strong>
                                    </td>
                                    <td colspan="2" style="text-align:left">
                                    {{evaluationDetail.projectSum | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>APG Issued:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.apgIssued | number: '1.2'}}
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                    <strong i18n>Amount Received:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.amountReceived | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>PMU Assessd VOWD To Date:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.pmuAssessed | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>Amount Disbursed To Date:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.disbursedTodate  | number: '1.2'}}</td>
                                </tr>
                                <tr>
                                    <td>
                                    <strong i18n>Independent Consultant To Date:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.consoltantVowd | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>Cost Variation:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.costVariation | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>Time Variation:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.timeVariation  }}</td>
                                </tr>
                                <tr>
                                    <td>
                                    <strong i18n>Certified VOWD To Date:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.certifiedVowd | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>Amortised APG:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.amortisedApg | number: '1.2'}}</td>
                                    <td>
                                    <strong i18n>Progress Payment to date:</strong>
                                    </td>
                                    <td>{{ evaluationDetail.progressPayment  | number: '1.2'}}</td>
                                </tr>
                                </tbody>
                            </table>
                            </div>
                        </p-accordionTab>
                        <p-accordionTab i18n-header header="Comments">
                            <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-12">
                                <h2 i18n class="panel-title pull-left">
                                    COMMENT FROM INSPECTION
                                </h2>
                                </div>
                            </div>
                            </div>

                            <div class="panel-body">
                            <p-dataTable [value]="commentReport" [responsive]="true" [paginator]="false" [rows]="5">
                                <p-column i18n-header field="comment" header="Comment" sortable="true"
                                    filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <span [innerHtml]="d.comment"></span>
                                    </ng-template>
                                </p-column>
                            </p-dataTable>
                            </div>
                        </p-accordionTab>
                        <p-accordionTab i18n-header header="Observations">
                            <div class="panel-heading">
                            <div class="row">
                                <div class="col-md-12">
                                <h2 i18n class="panel-title pull-left">
                                    OBSERVATIONS AND IMPACT
                                </h2>
                                </div>
                            </div>
                            </div>

                            <div class="panel-body">
                            <p-dataTable [value]="observationReport" [responsive]="true" [paginator]="false" [rows]="5">
                                <p-column i18n-header field="comment" header="Comment" sortable="true"
                                filterMatchMode="contains">
                                <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                    <span [innerHtml]="d.comment"></span>
                                </ng-template>
                            </p-column>
                            </p-dataTable>
                            </div>
                        </p-accordionTab>
                        <p-accordionTab i18n-header header="Recommendations">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h2 i18n class="panel-title pull-left">
                                            RECOMMENDATIONS
                                        </h2>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body">
                                <p-dataTable [value]="recommendationReport" [responsive]="true" [paginator]="false" [rows]="5">
                                    <p-column i18n-header field="comment" header="Comment" sortable="true"
                                    filterMatchMode="contains">
                                        <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                            <span [innerHtml]="d.comment"></span>
                                        </ng-template>
                                    </p-column>
                                </p-dataTable>
                            </div>
                        </p-accordionTab>
                        <p-accordionTab i18n-header header="Tasks">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h2 i18n class="panel-title pull-left">
                                            TASKS FOR NEXT INSPECTION
                                        </h2>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body">
                                <p-dataTable [value]="taskReport" [responsive]="true" [paginator]="false" [rows]="5">
                                    <p-column i18n-header field="comment" header="Comment" sortable="true"
                                    filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        <span [innerHtml]="d.comment"></span>
                                    </ng-template>
                                    </p-column>
                                    <p-column i18n-header field="nextInspectionDate" header="Next Inpectioan Date" sortable="true"
                                    filterMatchMode="contains">
                                    <ng-template let-d="rowData" let-i="rowIndex" pTemplate="body">
                                        {{ d.nextInspectionDate | date: 'medium' }}
                                    </ng-template>
                                    </p-column>
                                </p-dataTable>
                            </div>
                        </p-accordionTab>
                    </p-accordion>
                </p-tabPanel >
                <p-tabPanel i18n-header  header="Approval Comments">
                    <div *ngIf="operationId5>0">
                        <app-approval-comments [requireAll]=false [operationId]="operationId5"
                            [applicationId]="targetId5" [tableLabel]="'Project Site Approval Comments'">
                        </app-approval-comments>
                    </div>
                </p-tabPanel >
            </p-tabView>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <div class="btn-group pull-right">
                        <button i18n (click)="showProjectSiteDetail=false" type="button" class="btn btn-danger"
                            style="margin-right:5px">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayProjectSiteReport" width="1200" modal="modal" showEffect="fade">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="row">
                <div class="col-md-12">
                    <h2 i18n class="panel-title pull-left">
                        Project Site Report
                    </h2>
                    <button i18n type="button" (click)="displayProjectSiteReport=false" style="margin-right:5px"
                    class="btn btn-danger pull-right">Cancel</button>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <div class="col-md-12" *ngIf="displayProjectSiteReport" style=" width:1200px; overflow:auto;">
                <iframe [src]="projectReportSrc" id="report" name="report" frameborder="2" height="500px" width="1500px"
                    style="overflow:auto"></iframe>
            </div>
        </div>
    </div>
    <div class="panel-footer">
        <div class="row">
            <div class="col-md-12">
                <button i18n type="button" (click)="displayProjectSiteReport=false" style="margin-right:5px"
                    class="btn btn-danger pull-right">Cancel</button>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayDeferralModal" modal="modal" showEffect="fade" width="1200">
	<div style="margin-bottom:0" class="panel panel-default">
		
		<div class="panel-body" style="overflow:auto; max-height: 450px">
			<p-tabView>
				<p-tabPanel i18n-header  *ngIf="deferralDocumentUpload" header="Deferral Uploads">
					<div class="row">
						<div class="col-md-12">
							<p-dataTable [value]="deferralDocumentUpload" [paginator]="true" [rows]="10">
								<p-column i18n-header field="fileName" header="Document Name"></p-column>
								<p-column i18n-header field="fileExtension" header="Type" [style]="{'width':'60px'}"></p-column>
								<p-column i18n-header field="physicalFileNumber" header="File Number" [style]="{'width':'150px'}"></p-column>
								<p-column i18n-header field="physicalLocation" header="Physical Location"></p-column>
								<p-column [style]="{'width':'100px'}">
									<ng-template pTemplate="header"> </ng-template>
									<ng-template pTemplate="body" let-d="rowData" let-i="rowIndex">
										<a i18n *ngIf="['jpg','jpeg', 'png'].indexOf(d.fileExtension.toLowerCase()) > -1" (click)="viewDeferralDocument(d.documentId)" href="javascript:void(0)">View</a>
										<a i18n *ngIf="['doc', 'docx', 'pdf', 'xls', 'xlsx'].indexOf(d.fileExtension.toLowerCase()) > -1" (click)="viewDeferralDocument(d.documentId)" href="javascript:void(0)">Download</a>
									</ng-template>
								</p-column>
							</p-dataTable>
						</div>
					</div>
				</p-tabPanel >

				<p-tabPanel i18n-header  header="Approval Process Comments">
					<div *ngIf="operationId8>0">
						<app-approval-comments [requireAll]=false [operationId]="operationId8"
							[applicationId]="targetId8" [tableLabel]="'Deferred Document Approval Comments'">
						</app-approval-comments>
					</div>
				</p-tabPanel >
			</p-tabView>
		</div>
		<div class="panel-footer">
			<div class="row">
				<div class="col-md-12">
					<button i18n type="button" (click)="displayDeferralModal=false" style="margin-right:5px" class="btn btn-danger pull-right">Close</button>
				</div>
			</div>
		</div>
	</div>
</p-dialog>
  
<p-dialog [responsive]="true" [(visible)]="displayUploadShow" modal="modal" showEffect="fade" width="1200">
	<div *ngIf="displayUploadShow" style="margin-bottom:0" class="panel panel-default">

		<div class="panel-heading">
			<h2  class="panel-title">
				<ng-container i8n>Document Title:</ng-container>
				
				<strong>{{ selectedDocumentName }}</strong>
			</h2>
			<div class="pull-right">
				<a class="close" (click)="displayUploadShow=false">&times;</a>
			</div>
		</div>
		<div class="panel-body" style="overflow:auto;height:500px">
			<div style="margin: auto; width: 50%">
				<img *ngIf="binaryFile" style="max-width: 100%; display: block 2px black;" [src]="'data:image/jpg;base64,'+binaryFile" alt="" class="img-thumbnail">
			</div>
		</div>
	</div>
</p-dialog>
<!-- endregion -->
