<div class="container-fluid">
    <div class="row no-padding">
        <div class="panel panel-default" id="panel0">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>
                    WELCOME TO PRODUCT DEFINITION MODULE
                </h2>
            </div> 
            <div class="panel-body">
                <div>
                    <p i18n>You are about to start the definition of a new banking product.</p>
                    <br>
                    <p i18n>Please kindly ensure that the product details given are correct and accurate. </p>
                    <br>
                    <p i18n>The definition provided here will further guide the operations, activities and maintenance of the product.
                    </p>
                    <br>
                    <p><span i18n>Click </span>
                        <strong i18n>next</strong> <span i18n> to navigate the definition setup.</span></p>
                    <br>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="next()" class="btn btn-primary pull-right" [disabled]="btnDisabled" i18n>Next</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="panel1" hidden="true">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>CHOOSE PRODUCT GROUP</h2> 
            </div>
            <div class="panel-body">
                <div class="row">
                    <form #f class="form-horizontal" autocomplete="off">
                        <div class="col-md-6" *ngFor="let item of productGroups">
                            <div class="radio">
                                <label>
                                    <input type="radio" name="productGroups" [value]="item.value" [(ngModel)]="selectedGroup" [ngModelOptions]="{standalone: true}"
                                        (click)='onProdGroupSelect(item)'>{{item.display}}
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="next()" class="btn btn-primary pull-right" [disabled]="prodGrpRadBtnCannotClick" i18n>Next</button>
                        <button type="button" (click)="previous()" class="btn btn-primary pull-right" style="margin-right:5px" i18n>Previous</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="panel2" hidden="true">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>CHOOSE PRODUCT TYPE</h2>
            </div>
            <div class="panel-body">
                <div class="row"> 
                    <form #g class="form-horizontal" autocomplete="off">
                        <div class="col-md-6" *ngFor="let item of productTypes">
                            <div class="radio">
                                <label>
                                    <input type="radio" name="productTypes" [value]="item.value" (click)="onProdTypeSelect(item)">{{item.display}} 
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="next()" class="btn btn-primary pull-right" [disabled]="prodTypRadBtnCannotClick" i18n>Next</button>
                        <button type="button" (click)="previous()" class="btn btn-primary pull-right" style="margin-right:5px" i18n>Previous</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default" id="panel3" hidden="true">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>PRODUCT DETAILS</h2>
            </div>

            <form class="form-horizontal" id="productDetailsForm" [formGroup]="productFormGroup" role="form" novalidate autocomplete="off">
                <div class="panel-body" id="details-container">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="customerTypeId" class="control-label col-sm-4" i18n>Customer Class</label>
                            <div class="col-sm-8">
                                <select name="customerTypeId" id="customerTypeId" formControlName="customerTypeId" class="form-control"
                                    [ngClass]="!productFormGroup.controls['customerTypeId'].valid ? 'required-input' : 'valid-input'">
                                    <option value="" i18n>Select Customer Class </option>
                                    <option *ngFor="let nat of customerTypes" value="{{nat.customerTypeId}}">
                                        {{nat.name}}
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="productName" class="control-label col-sm-4" i18n>Product Name</label>
                            <div class="col-sm-8">
                                <input type="text" formControlName="productName" class="form-control" [ngClass]="productFormGroup.controls['productName'].valid ? 'valid-input': 'required-input'"
                                    name="productName" i18n-placeholder placeholder="Provide Product Name">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="productCode" class="control-label col-sm-4" i18n>Product Code</label>
                            <div class="col-sm-8">
                                <input type="text" formControlName="productCode" class="form-control" [ngClass]="productFormGroup.controls['productCode'].valid ? 'valid-input': 'required-input'"
                                    name="productCode" i18n-placeholder placeholder="Provide Product Code">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="productCategory" class="control-label col-sm-4" i18n>Product Category</label>
                            <div class="col-sm-8">
                                <select name="accountTypes" class="form-control" formControlName="productCategoryId" (change)="onProdCategorySelect($event.target.value)"
                                    [ngClass]="productFormGroup.controls['productCategoryId'].valid ? 'valid-input' : 'required-input'">
                                    <option value="" i18n>--- Select Product Category ---</option>
                                    <option *ngFor="let item of productCategoryData" [value]="item.value">{{item.label}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label class="control-label col-sm-4" for="productDes" i18n>Product Description</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" formControlName="productDescription" id="productDes" [ngClass]="productFormGroup.controls['productDescription'].valid ? 'valid-input' : 'required-input'"
                                    i18n-placeholder placeholder="Describe product"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="prodClass" class="control-label col-sm-4" i18n>Product Class</label>
                            <div class="col-sm-8">
                                <select name="prodClass" class="form-control" (change)="getSelectedProductClass($event.target.value)" [ngClass]="productFormGroup.controls['productClassId'].valid ? 'valid-input' : 'required-input'"
                                    formControlName="productClassId">
                                    <option value="" i18n>--- Select Product Class ---</option>
                                    <option *ngFor="let item of productClassData" [value]="item.lookupId">{{item.lookupName}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="dayCount" class="control-label col-sm-4" i18n>Accrual Basis</label>
                            <div class="col-sm-8">
                                <select name="dayCount" id="dayCount" class="form-control" formControlName="dayCountId" required [ngClass]="productFormGroup.controls['dayCountId'].valid ? 'valid-input' : 'required-input'"
                                    (change)="onDayCountSelect($event.target.value)">
                                    <option value="" i18n>--- Select Day Count ---</option>
                                    <option *ngFor="let item of dayCountData" [value]="item.lookupId">{{item.lookupName}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="dealClass" class="control-label col-sm-4" i18n>Classification</label>
                            <div class="col-sm-8">
                                <select name="dealClass" class="form-control" formControlName="dealClassificationId" [ngClass]="productFormGroup.controls['dealClassificationId'].valid ? 'valid-input': 'required-input'">
                                    <option value="" i18n>--- Select Deal Classification ---</option>
                                    <option *ngFor="let item of dealClassficationData" [value]="item.value">{{item.label}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 ">
                        <div class="form-group">
                            <label for="prodPriceIndex" class="control-label col-sm-4" i18n>Product Price Index</label>
                            <div class="col-sm-6">
                                <select name="prodPriceIndex" id="prodPriceIndex" class="form-control" formControlName="productPriceIndexId" [ngClass]="productFormGroup.controls['productPriceIndexId'].valid ? 'valid-input': 'required-input'"
                                    (change)="onPriceIndexSelect($event.target.value)">
                                    <option value="" i18n>--- Select Product Price Index ---</option>
                                    <option *ngFor="let item of productPriceIndexData" [value]="item.productPriceIndexId">{{item.priceIndexName}}</option>
                                </select>
                            </div>
                            <div class="col-sm-2">
                                <input type="text" [(ngModel)]="priceIndexRateValue" [ngModelOptions]="{standalone: true}" class="form-control" [disabled]="true">
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 ">
                        <div class="form-group">
                            <label for="prodSpreadIndex" class="control-label col-sm-4" i18n>Product Spread Index</label>
                            <div class="col-sm-4">
                                <input type="number" name="prodSpreadIndex" formControlName="productPriceIndexSpread" class="form-control" [ngClass]="productFormGroup.controls['productPriceIndexSpread'].valid ? 'valid-input': 'required-input'"
                                    (change)="onProductSpreadSelect($event.target.value)" />
                            </div>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon" i18n>Total</span>
                                    <input type="text" [(ngModel)]="productSpreadTotal" [ngModelOptions]="{standalone: true}" class="form-control" [disabled]="true"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label for="dealTypes" class="control-label col-sm-4" i18n>Accrual Type</label>
                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" value="1" formControlName="dealTypeId" i18n>Backend</label>
                                <label class="radio-inline">
                                    <input type="radio" value="2" formControlName="dealTypeId" i18n>Upfront</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 " *ngIf="isSelectedType('Current Account')">
                        <div class="form-group">
                            <label for="allowOverdraft" class="control-label col-sm-4" i18n>Allow Overdraft</label>
                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" value="true" id="allowOverdraft" formControlName="allowOverdrawn" i18n>Yes</label>
                                <label class="radio-inline">
                                    <input type="radio" value="false" id="allowOverdraft" formControlName="allowOverdrawn" i18n> No</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 " *ngIf="requireLoanSchedule()">
                        <div class="form-group">
                            <label for="scheduleTypeId" class="control-label col-sm-4" i18n>Loan Schedule</label>
                            <div class="col-sm-8">
                                <select name="scheduleTypeId" id="scheduleTypeId" class="form-control" formControlName="scheduleTypeId">
                                    <option value="" i18n>--- Select Loan Schedule ---</option>
                                    <option *ngFor="let item of loanScheduleTypeData" [value]="item.value">{{item.label}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-sm-6 " *ngIf="isSelectedGroup('00001')">
                            <div class="form-group">
                                <label for="productBehaviourId" class="control-label col-sm-4">Product Behaviour Type</label>
                                <div class="col-sm-8">
                                    <select name="productBehaviourId" id="productBehaviourId" class="form-control" formControlName="productBehaviourId">
                                        <option value="" i18n>--- Select Product Behaviour Type ---</option>
                                        <option *ngFor="let item of productBehaviorData" [value]="item.lookupId">{{item.lookupName}}</option>
                                    </select>
                                </div>
                            </div>
                        </div> -->
                    <div class="col-sm-12 col-lg-12" *ngIf="isSelectedGroup('00002')">
                        <div class="form-group">
                            <label for="minBalance" class="control-label col-sm-2" i18n>Minumum Balance</label>
                            <div class="col-sm-4">
                                <input type="number" min="0" id="minBalance" formControlName="minimumBalance" class="form-control" style="width:80px">
                            </div>
                            <label for="opBalance" class="control-label col-sm-2" i18n>Opening Balance</label>
                            <div class="col-sm-4">
                                <input type="number" min="0" id="opBalance" formControlName="openingBalance" class="form-control" style="width:80px">
                            </div>
                        </div>
                    </div>
                    <div class="cols-sm-12 col-lg-12">
                        <div class="form-group">
                            <label for="" class="control-label col-sm-2" *ngIf="requireRateTenor()" i18n>Tenor Bracket (Months)</label>
                            <div class="col-sm-4" *ngIf="requireRateTenor()">
                                <div class="row">
                                    <label class="control-label col-sm-3" for="minimumTenor" i18n>Mininum:</label>
                                    <div class="col-sm-3">
                                        <input type="number" min="0" max="100" formControlName="minimumTenor" id="minimumTenor" class="form-control">
                                    </div>
                                    <label class="control-label col-sm-3" for="maximumTenor" i18n>Maximum:</label>
                                    <div class="col-sm-3">
                                        <input type="number" min="0" max="100" formControlName="maximumTenor" id="maximumTenor" class="form-control">
                                    </div>
                                    <br>
                                    <div class="col-sm-6">
                                        <input type="checkbox" formControlName="allowTenor" i18n> Allow Override
                                    </div>
                                </div>
                            </div>
                            <label for="" class="col-sm-2 control-label" *ngIf="requireRateTenor()" i18n>Rate Bracket (%)</label>
                            <div class="col-sm-4" *ngIf="requireRateTenor()">
                                <div class="row">
                                    <label class="control-label col-sm-3" for="minimumRate" i18n>Minimum:</label>
                                    <div class="col-sm-3">
                                        <input type="number" min="0" max="100" formControlName="minimumRate" id="minimumRate" class="form-control">
                                    </div>
                                    <label class="control-label col-sm-3" for="maximumRate" i18n>Maximum:</label>
                                    <div class="col-sm-3">
                                        <input type="number" min="0" max="100" formControlName="maximumRate" id="maximumRate" class="form-control">
                                    </div>
                                    <br>
                                    <div class="col-sm-6">
                                        <input type="checkbox" formControlName="allowRate" i18n> Allow Override
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr/>
                    <div class="col-sm-12 col-lg-12">
                        <div class="form-group">
                            <label for="dGracePeriod" class="control-label col-sm-2" i18n>Grace Period (Default)</label>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" min="0" max="100" id="dGracePeriod" formControlName="defaultGracePeriod" class="form-control">
                                    <span class="input-group-addon" i18n>Days</span>
                                </div>
                            </div>
                            <label for="cleanUpPeriod" class="control-label col-sm-2" i18n>Clean-Up Period</label>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" min="0" max="100" id="cleanUpPeriod" formControlName="cleanupPeriod" class="form-control">
                                    <span class="input-group-addon" i18n>Days</span>
                                </div>
                            </div>
                            <label for="eqContrib" class="control-label col-sm-2" i18n>Equity Contribution</label>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" min="0" max="100" id="eqContrib" class="form-control" formControlName="equityContribution" class="form-control">
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="expPeriod" class="control-label col-sm-2" i18n>Expiry Period</label>
                            <div class="col-sm-2">
                                <div class="input-group">
                                    <input type="number" min="0" max="100" id="expPeriod" formControlName="expiryPeriod" class="form-control">
                                    <span class="input-group-addon" i18n>Days</span>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <label class="checkbox-inline control-label">
                                    <input type="checkbox" value="false" formControlName="allowCustomerAccountForceDebit">
                                    <strong i18n>Allow Customer Account Force Debit</strong>
                                </label>
                            </div>
                            <div class="col-sm-4">
                                <label class="checkbox-inline control-label">
                                    <input type="checkbox" value="false" formControlName="allowMoratorium">
                                    <strong i18n>Allow Moratorium</strong>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                                <label for="riskRatingId" class="control-label col-md-2" i18n>Product Rating</label>
                                <div class="col-md-4">
                                        <select name="riskRatingId" formControlName="riskRatingId" id="riskRatingId" class="form-control" [ngClass]="!productFormGroup.controls['riskRatingId'].valid ? 'required-input' : 'valid-input'">
                                                <option value="" i18n>-- Select Product Rating --</option>
                                                <option *ngFor="let x of riskRatings" [value]="x.lookupId">{{ x.lookupName }}</option>
                                            </select>
                                        </div>
                            <div class="col-md-4">
                            <label class="checkbox-inline control-label"><input type="checkbox" value="false" formControlName="excludeFromLitigation"><strong i18n>Exclude From Litigation/Debt Recovery Agencies</strong></label>
                             </div>
                             <div class="col-md-2" *ngIf="displayIsPaydayProduct">
                                <label class="checkbox-inline control-label"><input type="checkbox" value="false" formControlName="isPaydayProduct"><strong i18n>Is Payday Product</strong></label>
                                 </div>
                            </div>
                    </div>
                    <div class="col-sm-12 col-lg-12">
                        <fieldset>
                            <legend i18n>PRODUCT BEHAVIOUR</legend>
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="customerLimit" class="control-label col-sm-2" i18n>Customer Limit</label>
                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <input type="number" min="0" max="100" id="customerLimit" formControlName="customerLimit" class="form-control">
                                            <!-- <span class="input-group-addon">Months</span> -->
                                        </div>
                                    </div>
                                    <label for="collateralLcyLimit" class="control-label col-sm-2" i18n>Collateral LCY Limit</label>
                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <input type="number" min="0" max="100" id="collateralLcyLimit" formControlName="collateralLcyLimit" class="form-control">
                                            <!-- <span class="input-group-addon">Months</span> -->
                                        </div>
                                    </div>
                                    <label for="collateralFcyLimit" class="control-label col-sm-2" i18n>Collateral FCY Limit</label>
                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <input type="number" min="0" max="100" id="collateralFcyLimit" class="form-control" formControlName="collateralFcyLimit"
                                                class="form-control">
                                            <!-- <span class="input-group-addon">%</span> -->
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="productLimit" class="control-label col-sm-2" i18n>Product Limit</label>
                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <input type="number" min="0" max="100" id="productLimit" formControlName="productLimit" class="form-control">
                                            <!-- <span class="input-group-addon">Months</span> -->
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="checkbox-inline control-label">
                                            <input type="checkbox" value="false" formControlName="isInvoiceBased">
                                            <strong i18n>Is Invoice Based</strong>
                                        </label>
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="checkbox-inline control-label">
                                            <input type="checkbox" value="false" formControlName="allowFundUsage">
                                            <strong i18n>Allow Fund Usage</strong>
                                        </label>
                                    </div>
                                    <div class="col-sm-4">
                                        <label class="checkbox-inline control-label">
                                            <input type="checkbox" value="false" formControlName="isTemporaryOverDraft">
                                            <strong i18n>Is Temporary Overdraft</strong>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                        <label for="crmsRegulatoryId" class="control-label col-md-2" i18n>CRMS Regulatory Type</label>
                                        <div class="col-md-4">
                                                <select name="crmsRegulatoryId" formControlName="crmsRegulatoryId" id="crmsRegulatoryId" class="form-control" [ngClass]="!productFormGroup.controls['crmsRegulatoryId'].valid ? 'required-input' : 'valid-input'">
                                                        <option value="" i18n>-- Select CRMS Regulatory Type --</option>
                                                        <option *ngFor="let x of crmsProductTypes" [value]="x.lookupId">{{ x.lookupName }}</option>
                                                    </select>
                                                </div>
                                    </div>
                                   
                            </div>
                        </fieldset>
                    </div>

                    <div class="col-sm-12 col-lg-12" *ngIf="requireGl()">
                        <fieldset>
                            <legend>LEDGERS</legend>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rPrinGl">
                                <div class="form-group">
                                    <label for="pBalanceLedger" class="control-label col-sm-4" i18n>Principal Balance Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="pBalanceLedger" class="form-control" formControlName="principalBalanceGl" [ngClass]="productFormGroup.controls['principalBalanceGl'].valid ? 'valid-input': 'required-input'"
                                            (change)="onPrincipalGLSelect($event.target.value)">
                                            <option value="" i18n>--- Select Principal Balance Ledger ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rInIncomeGl">
                                <div class="form-group">
                                    <label for="inExpenseLedger" class="control-label col-sm-4" i18n>Interest Income Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="inExpenseLedger" class="form-control" formControlName="interestIncomeExpenseGl" [attr.disabled]="principalGlNotClicked ? true : null">
                                            <option value="" i18n>--- Select Interest Income\Expense Ledger ---</option>
                                            <option *ngFor="let item of incomeExpenseLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rPrinGl2">
                                <div class="form-group">
                                    <label for="pBalanceLedger2" class="control-label col-sm-4" i18n>Principal Balance Ledger 2</label>
                                    <div class="col-sm-8">
                                        <select name="pBalanceLedger2" class="form-control" formControlName="principalBalanceGl2" [ngClass]="productFormGroup.controls['principalBalanceGl2'].valid ? 'valid-input': 'required-input'"
                                            (change)="onPrincipalGLSelect($event.target.value)">
                                            <option value="" i18n>--- Select Principal Balance Ledger 2 ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rInReGl">
                                <div class="form-group">
                                    <label for="inPayableLedger" class="control-label col-sm-4" i18n>Interest Receivable Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="inPayableLedger" class="form-control" formControlName="interestReceivablePayableGl" [attr.disabled]="principalGlNotClicked ? true : null">
                                            <option value="" i18n>--- Select Interest Receivable\Payable Ledger ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rPrDisGl">
                                <div class="form-group">
                                    <label for="preDiscountLedger" class="control-label col-sm-4" i18n>Premium\Discount Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="preDiscountLedger" id="preDiscountLedger" class="form-control" formControlName="premiumDiscountGl" [attr.disabled]="principalGlNotClicked ? true : null">
                                            <option value="" i18n>--- Select Premium\Discount Ledger ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rDorGl">
                                <div class="form-group">
                                    <label for="dBalanceLedger" class="control-label col-sm-4" i18n>Dormant Balance Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="dBalanceLedger" class="form-control" formControlName="dormantGl" [attr.disabled]="principalGlNotClicked ? true : null">
                                            <option value="" i18n>--- Select Dormant Balance Ledger ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6" *ngIf="requireGlObj.rOvGl && productFormGroup.get('allowOverdrawn').value == true">
                                <div class="form-group">
                                    <label for="overDrawnLedger" class="control-label col-sm-4" i18n>Overdrawn Ledger</label>
                                    <div class="col-sm-8">
                                        <select name="overDrawnLedger" id="overDrawnLedger" class="form-control" formControlName="overdrawnGl" [attr.disabled]="principalGlNotClicked ? true : null">
                                            <option value="" i18n>--- Select Overdrawn Ledger ---</option>
                                            <option *ngFor="let item of assetLiabilityLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6"  *ngIf="requireGlObj.rPrinGl">
                                    <div class="form-group">
                                        <label for="penalChargeGl" class="control-label col-sm-4" i18n>Penal Charge Ledger</label>
                                        <div class="col-sm-8">
                                            <select name="penalChargeGl" id="penalChargeGl" class="form-control" formControlName="penalChargeGl">
                                                <option value="" i18n>--- Select Penal Charge Ledger ---</option>
                                                <option *ngFor="let item of assetPenalChargeLedgerData" [value]="item.accountId">{{item.accountCode + ' -- ' +item.accountName}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                        <div class="form-group">
                                                <div class="col-sm-6" *ngIf="requireGlObj.rPrinGl">
                                                        <label for="penalChargeRate" class="control-label col-sm-4" i18n>Penal Charge Rate</label>
                                                        <div class="col-sm-8">
                                                                <input type="number"  id="penalChargeRate" formControlName="penalChargeRate" class="form-control">
            
                                                        </div>
                                                </div>
                                                <div class="col-sm-6"  *ngIf="requireGlObj.rPrinGl">
                                                        <label class="checkbox-inline control-label">
                                                                <input type="checkbox" value="false" formControlName="usedByLos">
                                                                <strong i18n>Use By LOS</strong>
                                                            </label>
                                            </div>
                                        </div>
                                </div>
 
                                   
                        </fieldset>
                    </div>
                    <div class="col-sm-12 col-lg-12" *ngIf="displaySelectedCurrencies">
                        <fieldset>
                            <legend i18n>PRODUCT CURRENCIES</legend>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <button type="button" class="btn btn-info" (click)="displayCurrencyModal=true" i18n>View Selected Currencies</button>
                                </div>
                                <div class="col-sm-8">
                                    <p-chips [(ngModel)]="mappedCurrencies" [ngModelOptions]="{standalone: true}" (onRemove)="removeCurrency($event.value)"></p-chips>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>
                <div class="panel-footer">
                    <div class="row">
                        <div class="col-md-12">
                            <button type="button" (click)="next()" class="btn btn-primary pull-right" [disabled]="productFormGroup.invalid" i18n>Next</button>
                            <button type="button" (click)="previous()" class="btn btn-primary pull-right" style="margin-right:5px" i18n>Previous</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="panel panel-default" id="panel4" hidden="true">
            <div class="panel-heading">
                <h2 class="panel-title" i18n>Add Product Fee/ Collateral</h2>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <p-tabView>
                            <p-tabPanel header="Fees">
                                <div class="row">
                                    <div style="padding-top:20px" class="col-md-6">
                                        <fieldset>
                                            <legend i18n    i18n>Unmapped Fees</legend>

                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <td i18n>
                                                            Charge Name
                                                        </td>
                                                        <td i18n>
                                                            Target
                                                        </td>
                                                        <td i18n>
                                                            Frequency
                                                        </td>
                                                        <td i18n>
                                                            Account Category
                                                        </td>
                                                        <td style="width: 12%">

                                                        </td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let fee of feesNotMapped; let i = index">
                                                        <td>
                                                            {{fee.chargeName}}
                                                        </td>
                                                        <td>
                                                            {{fee.targetName}}
                                                        </td>
                                                        <td>{{fee.frequencyTypeName}}</td>
                                                        <td>{{fee.accountCategoryName}}</td>
                                                        <td>
                                                            <a style="text-decoration: none;" href="#" (click)="mapFee(i,$event)">
                                                                <i class="glyphicon glyphicon-plus"></i> Add</a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </fieldset>
                                    </div>
                                    <div style="padding-top:20px" class="col-md-6">
                                        <fieldset>
                                            <legend i18n>Mapped Fees</legend>

                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <td i18n>
                                                            Charge Name
                                                        </td>
                                                        <td i18n>
                                                            Target
                                                        </td>
                                                        <td i18n>
                                                            Frequency
                                                        </td>
                                                        <td i18n>
                                                            Value
                                                        </td>
                                                        <td i18n>
                                                            Dependent Amount
                                                        </td>
                                                        <td style="width: 15%">

                                                        </td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let fee of feedMapped; let i = index">
                                                        <td>
                                                            {{fee.feeName}}
                                                        </td>
                                                        <td>
                                                            {{fee.feeTargetName}}
                                                        </td>
                                                        <td>{{fee.feeIntervalName}}</td>
                                                        <td>{{fee.rateValue}}</td>
                                                        <td>{{fee.dependentAmount}}</td>
                                                        <td>
                                                            <a style="text-decoration: none;color:#ff0000" href="#" (click)="removeFee(i,$event)">
                                                                <i class="glyphicon glyphicon-remove"></i> Remove</a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </fieldset>
                                    </div>
                                </div>
                            </p-tabPanel>
                            <p-tabPanel header="Security">
                                <div class="row">
                                    <div style="padding-top:20px" class="col-md-6">
                                        <fieldset>
                                            <legend i18n>Security Not Mapped</legend>

                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <td i18n>
                                                            Collateral Security Name</td>
                                                        <td style="width: 20%">
                                                            <a style="text-decoration: none;" href="#" (click)="mapMultipleSecurity($event)">
                                                                <i class="glyphicon glyphicon-plus"></i> Add Multiple</a>
                                                        </td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let sec of securityNotMapped; let i = index">
                                                        <td>
                                                            {{sec.collateralTypeName}}
                                                        </td>
                                                        <td style="text-align:right">
                                                            <a style="text-decoration: none;" href="#" (click)="mapSecurity(i,$event)">
                                                                <i class="glyphicon glyphicon-plus"></i> <ng-container i18n>Add</ng-container></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </fieldset>
                                    </div>
                                    <div style="padding-top:20px" class="col-md-6">
                                        <fieldset>
                                            <legend i18n>Security Mapped</legend>

                                            <table class="table table-striped table-hover">
                                                <thead>
                                                    <tr>
                                                        <td i18n>
                                                            Collateral Security Name</td>
                                                        <td style="width: 16%">

                                                        </td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let sec of securityMapped; let i = index">
                                                        <td>
                                                            {{sec.collateralTypeName}}
                                                        </td>
                                                        <td>
                                                            <a style="text-decoration: none;color:#ff0000" href="#" (click)="removeSecurity(i,$event)">
                                                                <i class="glyphicon glyphicon-remove"></i> <ng-container i18n>Remove</ng-container></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </fieldset>
                                    </div>
                                </div>
                            </p-tabPanel>
                        </p-tabView>
                    </div>
                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="submitProductForm()" class="btn btn-success pull-right" i18n>Submit</button>
                        <button type="button" (click)="previous()" class="btn btn-primary pull-right" style="margin-right:5px" i18n>Previous</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<fintrakbanking-message [title]="title" [message]="message" [show]="show" [cssClass]="cssClass" (closeEvent)="hideMessage($event)"></fintrakbanking-message>

<p-dialog [responsive]=true [(visible)]="displayCurrencyModal" modal="modal" showEffect="fade" width="500">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Select Product Currencies
            </h2>
        </div>
        <div class="panel-body">
            <p-dataTable [value]="productCurrencies" [(selection)]="selectedCurrencies" dataKey="currencyId">
                <p-column i18n-header field="currencyId" header="Currency ID" hidden="true" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                <p-column i18n-header field="currencyName" header="Currency Name"></p-column>
                <p-column [style]="{'width':'60px'}" selectionMode="multiple"></p-column>
            </p-dataTable>
        </div>
        <div class="panel-footer">
            <div class="row">
                <div class="col-md-12">
                    <button type="button" [disabled]="selectedCurrencies == null" (click)="hideCurrencyModal()" class="btn btn-success pull-right"  i18n>Save</button>
                    <button style="margin-right:5px" type="button" class="btn btn-danger pull-right" (click)="displayCurrencyModal=false" i18n>Close</button>
                </div>
            </div>
        </div>
    </div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="display" modal="modal" showEffect="fade" width="800">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title" i18n>
                Map Fee to Product
            </h2>
        </div>

        <form novalidate [formGroup]="feeEdit" (ngSubmit)="onFormSubmitted(feeEdit)" autocomplete="off">
            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label for="feeName" class="control-label col-md-2" i18n>
                            Charge Name
                        </label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="feeName" formControlName="feeName" [attr.disabled]="true">
                        </div>

                        <label for="target" class="control-label col-md-2" i18n>
                            Target
                        </label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="feeTargetName" formControlName="feeTargetName" [attr.disabled]="true">
                        </div>
                    </div>


                    <div class="form-group">

                        <label for="interval" class="control-label col-md-2" i18n>
                            Category
                        </label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="accountCategoryName" formControlName="accountCategoryName" [attr.disabled]="true">
                        </div>

                        <label for="interval" class="control-label col-md-2" i18n>
                            Frequency
                        </label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="feeIntervalName" formControlName="feeIntervalName" [attr.disabled]="true">
                        </div>

                    </div>


                    <div class="form-group">
                        <label for="rateValue" class="control-label col-md-2" i18n>
                            Rate Value
                        </label>
                        <div class="col-md-4">
                            <input type="number" min="0" max="100" class="form-control" name="rateValue" formControlName="rateValue" style="text-align:right">
                        </div>

                        <label for="confirmPass" class="control-label col-md-2" i18n>
                            Dependent Amount
                        </label>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="dependentAmount" formControlName="dependentAmount" formatM style="text-align:right">
                        </div>
                    </div>


                </div>
            </div>
            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <!--{{ user.value | json }} [disabled]="user.invalid"-->
                        <button type="submit" [disabled]="feeEdit.invalid" class="btn btn-success pull-right" i18n>Map to Product</button>
                        <button style="margin-right:5px" type="button" class="btn btn-danger pull-right" (click)="display=false" i18n>Close</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</p-dialog>