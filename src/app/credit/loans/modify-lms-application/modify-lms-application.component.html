<div class="ui-g">
  <div class="ui-g-12 no-padding">
      <div class="card no-padding">
          <div class="panel panel-default">
              <div class="panel-heading">
                  <div class="row">
                      <div class="col-md-12">
                          <h2 class="panel-title pull-left">
                              Loan Application Modification
                          </h2>
                          
                      </div>
                  </div>
              </div>
              <div class="panel-heading">
                <div class="row">
                    <div class="col-md-12">
                        <h2 class="panel-title pull-left">
                            
                        </h2>

                        <div class="pull-right">
                            <button (click)="showSearchForm()" pButton type="button" i18n-label label="Search" icon="fa-search"></button>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
              <div class="panel-body">
                                      
                        <div class="card no-padding" *ngIf="displaySearchTable">
                          <p-dataTable [paginator]="true" [value]="approvedLineReviewData" [rows]="15" (onRowSelect)="onSelectedLoanReviewChange($event)">
						               <p-column *ngIf="isAmongActivities('modify lms application')" [style]="{'width':'38px'}" selectionMode="single"></p-column>
                              <p-column i18n-header field="loanTypeId" header="Type" [style]="{'width':'43px'}" filterMatchMode="contains">
                                <ng-template pTemplate="body" let-item="rowData">
                                    <span i18n *ngIf="item.loanTypeId2 == 1">Single</span>
                                    <span i18n *ngIf="item.loanTypeId2 != 1">Group</span>
                                </ng-template>
                              </p-column>
                              <p-column i18n-header [style]="{'width':'80px'}" field="lmsApplicationReferenceNumber" header="Reference" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                <p-column i18n-header field="customerName" [style]="{'width':'150px'}" header="Obligor's Name" sortable="true" [filter]="true" filterMatchMode="contains">
                                  <ng-template pTemplate="body" let-item="rowData">
                                      <span *ngIf="item.loanTypeId2 == 1">{{item.customerName}}</span>
                                      <span *ngIf="item.loanTypeId2 != 1">{{item.customerName}} ({{item.customerGroupName}})</span>
                                  </ng-template>
                              </p-column>
                              <p-column i18n-header [style]="{'width':'110px'}" field="operationName" header="Operation" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                              <p-column i18n-header [style]="{'width':'130px'}" field="productTypeName" header="Facility Type" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                              <p-column i18n-header [style]="{'text-align':'right','width':'135px'}" field="approvedAmount" header="Approved Amount" sortable="true" [filter]="true" filterMatchMode="contains">
                                  <ng-template pTemplate="body" let-item="rowData">
                                      {{item.approvedAmount | number: '1.2'}}
                                  </ng-template>
                              </p-column> 
                              <p-column i18n-header [style]="{'width':'80px'}" field="approvedTenor" header="Tenor" sortable="true" [filter]="true" filterMatchMode="contains">
                                  <ng-template pTemplate="body" let-item="rowData">
                                      {{item.approvedLoanTenorString}}
                                  </ng-template>
                              </p-column>
                              
                          </p-dataTable>
                      
                  </div>

                  <div *ngIf="displayCustomerLoanDetails" class="form-horizontal">
                          <div class="form-group">
                                  <p-tabView>
                                    <p-tabPanel i18n-header  header="Facility Details">
                                      <div style="margin-bottom:0" class="panel panel-default">
                                        <div class="panel-heading">
                                          <h2 i18n class="panel-title">
                                            Facility Details
                                          </h2>
                                        </div>
                                        <div class="panel-body">
                                          <table *ngIf="selectedLoanReview != null" class="table table-customer-information">
                                            <tbody>
                              
                                              <tr>
                                                <td>
                                                  <strong i18n>Application Reference No:</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.applicationReferenceNumber ? selectedLoanReview.applicationReferenceNumber : 'N/A'}}</td>
                                                <td>
                                                  <strong i18n>Customer Code</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.customerCode }}</td>
                                                <td>
                                                  <strong i18n>Customer Group</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.customerGroupName ? selectedLoanReview.customerGroupName : 'N/A'}}</td>
                                      
                                              </tr>
                                              <tr>
                                                <td>
                                                  <strong i18n>Customer Name</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.customerName ? selectedLoanReview.customerName : 'N/A'}}</td>
                                                <td>
                                                    <strong i18n> Sector Name</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.sectorName }}</td>
                                                  <td>
                                                      <strong i18n> Sub-Sector Name</strong>
                                                    </td>
                                                    <td>{{ selectedLoanReview.subSectorName }}</td>
                                              </tr>
                                              <tr>
                                                <td>
                                                  <strong i18n>Initiating Officer</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.relationshipOfficerName ? selectedLoanReview.relationshipOfficerName : 'N/A' }}</td>
                                                <!-- <td>
                                                  <strong i18n>Business Manager</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.relationshipManagerName ? selectedLoanReview.relationshipManagerName : 'N/A' }}</td> -->
                                                <td>
                                                    <strong i18n>Branch Name</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.branchName }}</td>
                                              </tr>
                                              <tr>
                                                  <td>
                                                    <strong i18n> Facility</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.productName }}</td>
                                                  <td>
                                                    <strong i18n>Facility Type</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.productTypeName ? selectedLoanReview.productTypeName : 'N/A'}}</td>
                                                  <td>
                                                    <strong i18n>Customer Type</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.customerType ? selectedLoanReview.customerType : 'N/A'}}</td>
                                              </tr>
                                              <tr>
                                                <td>
                                                  <strong i18n>Approved Amount</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.approvedAmount | currency:selectedLoanReview.currencyCode:true:'1.2-2'}}</td>
                                                <td>
                                                  <strong i18n> Interest Rate</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.approvedInterestRate }}</td>
                                                <td>
                                                    <strong i18n> Tenor</strong>
                                                  </td>
                                                  <td>{{ selectedLoanReview.approvedLoanTenorString }}</td>
                                              </tr>
                                              <tr>
                                                <td>
                                                  <strong i18n> Effective Date</strong>
                                                </td>
                                                <td>{{ selectedLoanReview.effectiveDate ? (selectedLoanReview.effectiveDate | date) : 'N/A'}}</td>
                                                <td>
                                                    <strong></strong>
                                                  </td>
                                                  <td></td>
                                                <td>
                                                  <strong> </strong>
                                                </td>
                                                <td></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </div>
                                       
                                        <form *ngIf="displayTenorChangeModal" [formGroup]="tenorChangeForm" autocomplete="off"> 
                                            <div class="panel-body">
                                              <fieldset style="padding-left:14px">
                                                <legend><strong i18n>Tenor Change</strong></legend>
                                                <div class="form-group">
                                                    <label i18n for="newTenor" class="control-label col-md-2">Add Tenor (days)</label>
                                                    <div class="col-md-2 ">
                                                      <input type="text" name="newTenor" formControlName="newTenor" id="tempTenor" class="form-control" [ngClass]="!tenorChangeForm.controls['newTenor'].valid ? 'required-input' : 'valid-input'">
                                                      </div>
                                                      <div class="col-md-2 ">
                                                              <button (click)="calculateNewTenor(tenorChangeForm)" class="btn btn-sm btn-primary" ><span class="glyphicon glyphicon-plus"></span> <ng-container i18n>Add Tenor</ng-container>
                                                              </button>
                                                      </div>
                                                      <label i18n for="newMaturity" class="control-label col-md-2">New Expiry Date</label>
                                                    <div class="col-md-4 ">
                                                      <input type="text" [attr.disabled]="true" name="newMaturity" formControlName="newMaturity" id="newMaturity" class="form-control" [ngClass]="!tenorChangeForm.controls['newMaturity'].valid ? 'required-input' : 'valid-input'">
                                                      </div>
                                                </div>
                                                <div class="form-group">
                                                    <label i18n for="newTenorLeft" class="control-label col-md-2">New Tenor Left (days)</label>
                                                    <div class="col-md-4 ">
                                                      <input type="text" [attr.disabled]="true" name="newTenorLeft" value="{{newTenorLeft}}" id="tempTenor" class="form-control" >
                                                      </div>
            
                                                      <label i18n for="totalTenor" class="control-label col-md-2">Total Tenor (days)</label>
                                                    <div class="col-md-4 ">
                                                      <input type="text" [attr.disabled]="true" name="totalTenor" value="{{totalTenor}}" id="totalTenor" class="form-control" >
                                                      </div>
                                                </div>
                                                </fieldset>
                                                <div class="form-group">
                                                  <div class="col-md-4">
                                                    <button i18n type="button" (click)="addTenor(tenorChangeForm)" [disabled]="!tenorChangeForm.valid && !hasNewMaturityDate || !takeFeeStatus" class="btn btn-success ">Submit</button>
                                                  </div>
                                                </div>
                                            </div> 
                                        </form>
                                        <form *ngIf="displayInterestChangeModal" [formGroup]="interestRateChangeForm" autocomplete="off">
                                            <div class="panel-body">
                                              <fieldset style="padding-left:14px">
                                                  <legend><strong i18n>Interest Rate Change</strong></legend>
                                                  <div class="form-group">
                                                      <label i18n for="New Interest Rate" class="control-label col-md-2">New Interest Rate</label>
                                                      <div class="col-md-4 ">
                                                          <input type="text" name="newInterestRate" formControlName="newInterestRate" id="newInterestRate" class="form-control" [ngClass]="!interestRateChangeForm.controls['newInterestRate'].valid ? 'required-input' : 'valid-input'">
                                                      </div>
                                                      <label i18n for="Value Date" class="control-label col-md-2">Value Date</label>
                                                      <div class="col-md-4 ">
                                                           <p-calendar id="valueDate" 
                                                              formControlName="valueDate" 
                                                              dateFormat="dd/mm/yy" 
                                                              [ngClass]="!interestRateChangeForm.controls['valueDate'].valid ? 'required-input' : 'valid-input'"
                                                                  [inputStyle]="{'width': '100%' }" [style]="{'width': '100%', 'overflow': 'visible'  }" [monthNavigator]="true" [yearNavigator]="true" yearRange="1955:2030" [showIcon]="true"></p-calendar>
                                                      </div>
                                                  </div>
                                                  <div class="form-group">
                                                      <label for="" formatM class="control-label col-md-2"></label>
                                                      <div class="col-md-4 ">
                                                          <button i18n type="button" (click)="changeApplicationLineInterestRate(interestRateChangeForm)" [disabled]="!interestRateChangeForm.valid || !takeFeeStatus" class="btn btn-success">Submit</button>
                                                      </div>
                                                  </div>
                                              </fieldset>
                                            </div>
                                        </form>
                                        <form *ngIf="displaySubAllocationChangeModal" [formGroup]="subAllocationForm" autocomplete="off">
                                              <div class="panel-body">
                                                 
                                                  <fieldset style="padding-left:14px">
                                                      <legend><strong i18n>Principal Sub-Allocation</strong></legend>
                                                      <div class="form-group">
                                                          <div class="col-md-12 ">
                                                              <p-dataTable *ngIf="showFirstGrid" [paginator]="false" [value]="sourceValues" [rows]="5" (onRowSelect)="onSubAllocateLoanChange($event)" [selection]="true" >
                                                                  <p-header i18n-header>Running Commercial Loan For Sub-Allocation </p-header>
                                                                  <p-column [style]="{'width':'30px'}" selectionMode="single"></p-column>
                                                                  <p-column i18n-header field="loanReferenceNumber" header="Loan Reference No" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                                                  <p-column i18n-header field="principalAmount" header="Principal" sortable="true" [filter]="true" filterMatchMode="contains">
                                                                  <ng-template let-col let-row="rowData" pTemplate="body">
                                                                      <span [style]="{'width':'150px','text-align':'right'}">{{row.principalAmount | number:'1.2'}}</span>
                                                                      </ng-template>
                                                                  </p-column>
                                                                  <p-column i18n-header field="newPrincipalAmount" header="New Principal" sortable="true" [filter]="true" filterMatchMode="contains">
                                                                      <ng-template let-col let-row="rowData" pTemplate="body">
                                                                      <span [style]="{'width':'150px','text-align':'right'}">{{row.newPrincipalAmount | number:'1.2'}}</span>
                                                                      </ng-template>
                                                                  </p-column>
                                                                  <p-footer> <div class="pull-left"><ng-container i18n>All Selected Loan Principal:</ng-container>
                                                                   <b>{{allSelectedPrincipalAmount | number:'1.2'}}</b></div>
                                                                   <ng-container i18n>Sub Allocation Principal Sum:</ng-container>
                                                                   <b>{{ subAllocationPrincipalAmount | number:'1.2'}}</b></p-footer>  
                                                                  </p-dataTable>
                                                                  <p-dataTable *ngIf="!showFirstGrid" [paginator]="false" [value]="sourceValues" [rows]="5" (onRowSelect)="onSubAllocateLoanChange($event)" [selection]="true" >
                                                                      <p-header i18n-header>Running Commercial Loan For Sub-Allocation </p-header>
                                                                      <p-column [style]="{'width':'30px'}" selectionMode="single"></p-column>
                                                                      <p-column i18n-header field="loanReferenceNumber" header="Loan Reference No" sortable="true" [filter]="true" filterMatchMode="contains"></p-column>
                                                                      <p-column i18n-header field="principalAmount" header="Principal" sortable="true" [filter]="true" filterMatchMode="contains">
                                                                      <ng-template let-col let-row="rowData" pTemplate="body">
                                                                          <span [style]="{'width':'150px','text-align':'right'}">{{row.principalAmount | number:'1.2'}}</span>
                                                                      </ng-template>
                                                                      </p-column>
                                                                      <p-column i18n-header field="newPrincipalAmount" header="New Principal" sortable="true" [filter]="true" filterMatchMode="contains">
                                                                          <ng-template let-col let-row="rowData" pTemplate="body">
                                                                          <span [style]="{'width':'150px','text-align':'right'}">{{row.newPrincipalAmount | number:'1.2'}}</span>
                                                                          </ng-template>
                                                                      </p-column>
                                                                      <p-footer><div class="pull-left" ><ng-container i18n>All Selected Loan Principal: </ng-container>
                                                                      <b>{{allSelectedPrincipalAmount | number:'1.2'}}</b></div><ng-container i18n>Sub Allocation Principal Sum:</ng-container>
                                                                       <b>{{ subAllocationPrincipalAmount | number:'1.2'}}</b></p-footer>  
                                                                  </p-dataTable>
                                                              </div>
                                                              </div>
                                                              <div *ngIf="loanGridRecordSelected" class="form-group">
                                                                  <label for="outstandingPrincipal" class="control-label col-md-2">Adjust Selected Principal</label>
                                                                  <div class="col-md-4 ">
                                                                  <input type="text" name="sourcePrincipal" formControlName="sourcePrincipal" id="sourcePrincipal" class="form-control"
                                                                      [ngClass]="!subAllocationForm.controls['sourcePrincipal'].valid ? 'required-input' : 'valid-input'">
                                                                  </div>
                                                                  <div class="col-md-4">
                                                                      <button (click)="subAllocate(subAllocationForm)" class="btn btn-sm btn-btn"><span class="glyphicon glyphicon-plus"></span> <ng-container i18n>Sub Allocate</ng-container></button>
                                                                  </div>
                                                                  <div *ngIf="gridEditted" class="col-md-2">
                                                                      <button i18n type="button" (click)="saveSubAllocations()" [disabled]="allSelectedPrincipalAmount != subAllocationPrincipalAmount && !isGroup" class="btn btn-success ">Submit</button>
                                                                      <!-- <button (click)="saveSubAllocations()" class="btn btn-sm btn-sucess" [disabled]="allSelectedPrincipalAmount != subAllocationPrincipalAmount"><span class="glyphicon glyphicon-tick"></span> Save</button> -->
                                                                  </div>
                                                              </div>
                                                              <hr>
                                                              <div class="form-group">
                                                                  <label for="submit" class="control-label col-md-2"></label>
                                                              </div>
                                                              <hr>
                                                  </fieldset>
                                              </div>
                                      </form>
                                      <form *ngIf="displayFacilityLineAmountChangeModal" [formGroup]="facilityAmountForm" autocomplete="off">
                                          <div class="panel-body">
                                            <fieldset style="padding-left:14px">
                                                <legend><strong i18n>Line Facility Amount Change</strong></legend>
                                                <div class="form-group">
                                                    <label i18n for="newPrincipalAmount" class="control-label col-md-2">New Line Amount</label>
                                                    <div class="col-md-4 ">
                                                        <input type="text" name="newPrincipalAmount" (blur)="formatValue()" [(ngModel)]="data.amount"  formControlName="newPrincipalAmount" id="newPrincipalAmount" class="form-control" [ngClass]="!facilityAmountForm.controls['newPrincipalAmount'].valid ? 'required-input' : 'valid-input'">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="" formatM class="control-label col-md-2"></label>
                                                    <div class="col-md-4 ">
                                                        <button i18n type="button" (click)="changeFacilityAmount(facilityAmountForm)" [disabled]="!facilityAmountForm.valid || !takeFeeStatus" class="btn btn-success">Submit</button>
                                                    </div>
                                                </div>
                                            </fieldset>
                                          </div>
                                      </form>
                                      </div>
                                    </p-tabPanel >
                                    <p-tabPanel i18n-header  header="Modify Facility">
                                      <div style="margin-bottom:0;" class="panel panel-default">
                                        <div class="panel-heading">
                                            <div class="panel-title">
                                          Modify Facility
                                        </div> 
                                        </div>
                                      <div class="panel-body" style="overflow: auto;">
                                        <form [formGroup]="facilityDetailsForm" autocomplete="off">
                                          <div class="form-horizontal">
                                            <div class="form-group">
                                              <label i18n for="approvedProductId" class="control-label col-md-2">
                                                Product
                                              </label>
                                              <div class="col-md-4">
                                                <select name="approvedProductId" class="form-control" [ngClass]="!facilityDetailsForm.controls['approvedProductId'].valid ? 'required-input' : 'valid-input'"
                                                  formControlName="approvedProductId" id="approvedProductId">
                                                  <option value=""></option>
                                                  <option *ngFor="let pc of filteredProducts" value="{{pc.productId}}">
                                                    {{pc.productName}}
                                                  </option>
                                                </select>
                                              </div>
                                            </div>
                                            <div class="form-group">
                                              <label i18n for="approvedTenor" class="control-label col-md-2 pull-left">Approved Tenor</label> 
                                              <div>
                                                <div class="col-md-2">
                                                  <input name="approvedTenor" formControlName="approvedTenor" [(ngModel)]="approvedTenor" [ngClass]="!facilityDetailsForm.controls['approvedTenor'].valid ? 'required-input' : 'valid-input'" class="form-control">
                                                </div>
                                                <div class="col-md-2">
                                                  <select class="form-control" formControlName="tenorModeId" [ngClass]="!facilityDetailsForm.controls['tenorModeId'].valid ? 'required-input' : 'valid-input'"
                                                    name="tenorModeId" id="tenorModeId">
                                                    <option *ngFor="let item of tenorTypes" value="{{item.tenorModeId}}">{{item.name}}</option>
                                                  </select>
                                                </div>
                                              </div>
                                              <div *ngIf="(isContingent != true)">
                                                <label i18n for="" class="control-label col-md-2">Interest Rate</label>
                                                <div class="col-md-4">
                                                  <input class="form-control" [readonly]="false" type="text" formControlName="approvedInterestRate" [ngClass]="!facilityDetailsForm.controls['approvedInterestRate'].valid ? 'required-input' : 'valid-input'">
                                                </div>
                                              </div>
                                            </div>
                                    
                                            <!-- <product-fees [productId]="selectedProductId" [loanApplicationDetailId]="selectedloanReviewApplicationId" [editFee]="true" (feesCollection)="feesData($event)"> </product-fees> -->
                                            
                                            <div class="form-group">
                                    
                                              <label i18n for="approvedAmount" class="control-label col-md-2">Facility Amount</label>
                                              <div class="col-md-4">
                                              <input type="text" id="approvedAmount" formatM name="approvedAmount" [ngClass]="!facilityDetailsForm.controls['approvedAmount'].valid ? 'required-input' : 'valid-input'"
                                                formControlName="approvedAmount" class="form-control">
                                              </div>
                                              <label i18n for="loanDetailReviewTypeId" class="control-label col-md-2">
                                                Review Details 
                                              </label>
                                              <div class="col-md-4">
                                                <textarea id="reviewDetails" name="reviewDetails" [ngClass]="!facilityDetailsForm.controls['reviewDetails'].valid ? 'required-input' : 'valid-input'"
                                                formControlName="reviewDetails" class="form-control"></textarea>
                                               
                                              </div>
                                            </div>
                                          </div>
                                        </form>
                                      </div>
                                        <div class="panel-footer">
                                            <div class="row">
                                                <div class="col-md-12">
                                            <div class="btn-group pull-right">
                                              <button i18n (click)="backToLoanReviewList()" type="button" class="btn btn-danger" style="margin-right:5px">Close</button>
                                              <button i18n [disabled]="facilityDetailsForm.invalid" type="button" (click)="updateFacilityDetails()"
                                                class="btn btn-success">Update</button>
                                            </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    </p-tabPanel >
                                  </p-tabView>

                                </div>
                  </div>

              </div>
              <div class="panel-footer">
                  <div class="row">
                      <div class="col-md-12">
                          <button i18n type="button" *ngIf="displayBackToList" (click)="backToLoanReviewList()" class="btn btn-primary pull-right">Back</button>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

<p-dialog [responsive]="true" [(visible)]="displayLoanReviewOperationModal" id="limit-def-modal" modal="modal" showEffect="fade"
  width="500">
  <div style="margin-bottom:0" class="panel panel-default">
      <div class="panel-heading">
          <div class="row">
              <div class="col-md-12">
                  <h2 class="panel-title pull-left">
                      {{entityName}}
                  </h2>
                  <a (click)="displayLoanReviewOperationModal = false; data.operationTypeId=null" class="pull-right remove-btn">
                    <i class="glyphicon glyphicon-remove-sign"></i>
                </a>
              </div>
          </div>
      </div>

      <div class="panel-body">
          <div class="form-horizontal">
              <div class="form-group">
                  <label i18n class="col-md-4">Operation Type</label>
                  <div class="col-md-8">
                          <select name="operationTypeId" [(ngModel)]="data.operationTypeId" (change)="onOperationTypeChange($event.target.value)" class="form-control"
                              [ngClass]="!data.operationTypeId ? 'required-input' : 'valid-input'">
                              <option value="" [selected]="true"  i18n>--- Select Operation Type ---</option>
                              <option *ngFor="let pc of operationTypes" value="{{pc.operationTypeId}}">
                                  {{pc.operationTypeName}}
                              </option>
                          </select>                      
                  </div>
              </div>
          </div>
      </div>
      <!-- end panel-body -->
  </div>
</p-dialog>

<p-dialog [responsive]="true" [(visible)]="displayRolloverModal" id="rollover-modal" modal="modal" showEffect="fade"
  width="1100">
  <div *ngIf="selectedLoanReview != null || selectedLoanReview != undefined">
    <app-cp-rollover [LoadLoanDetails]="termLoanId" ></app-cp-rollover>
  </div>

  <div class="panel-footer">
    <div class="row">
        <div class="col-md-12">
            <button i18n type="button" (click)="displayRolloverModal=false" style="margin-right:5px" class="btn btn-danger pull-right">Close</button>
        </div>
    </div>
</div>
</p-dialog>

<p-dialog [responsive]="true" [(visible)]="displayAutomaticRolloverModal" id="maturity-instruction-modal" modal="modal" showEffect="fade"
  width="1100">

  <div *ngIf="selectedLoanReview != null || selectedLoanReview != undefined">
    <app-maturity-instruction [LoadLoanDetails]="termLoanId" ></app-maturity-instruction>
  </div>

  <div class="panel-footer">
    <div class="row">
        <div class="col-md-12">
            <button i18n type="button" (click)="displayRolloverModal=false" style="margin-right:5px" class="btn btn-danger pull-right">Close</button>
        </div>
    </div>
</div>
</p-dialog>

<p-dialog [responsive]=true [(visible)]="displayDocumentation" modal="modal" showEffect="fade" width="1200">
      <div *ngIf="displayDocumentation" style="margin-bottom:0" class="panel panel-default">
  
          <div class="panel-heading">
              <h2   class="panel-title">
                <ng-container i18n> Appraisal Documentation for REFERENCE:</ng-container>
                  <strong>{{ selectedLoanReview?.applicationReferenceNumber }}</strong> of OBLIGOR:
                  <strong>{{ selectedLoanReview?.customerName }}</strong>
              </h2>
              <div class="pull-right">
                  <a class="close" (click)="closeDocumentation()">&times;</a>
              </div>
          </div>
  
          <div class="panel-body" style="overflow:auto;height:450px">
              <div *ngFor="let x of documentations">
                  <p><strong>{{x.title}}</strong></p>
                  <span [innerHtml]="x.templateDocument"></span>
              </div>
          </div>
  
      </div>
  </p-dialog>

  <p-dialog [responsive]=true [(visible)]="displaySearchForm" id="add-modal" modal="modal" showEffect="fade" width="450">
    <div style="margin-bottom:0" class="panel panel-default">
        <div class="panel-heading">
            <h2 i18n class="panel-title">
                Search Application
            </h2>
        </div>

        <form novalidate [formGroup]="searchForm" autocomplete="off" (ngSubmit)="getProcessReviewLoanData(searchForm)">

            <div class="panel-body">
                <div class="form-horizontal">
                    <div class="form-group">
                        <label i18n for="searchString" class="control-label col-md-12">Loan Application Reference Number / Customer Name</label>
                        <div class="col-md-12">
                            <input type="text" name="searchString" formControlName="searchString" id="searchString" class="form-control" [ngClass]="!searchForm.controls['searchString'].valid ? 'required-input' : 'valid-input'">
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-footer">
                <div class="row">
                    <div class="col-md-12">
                        <button i18n type="button" (click)="getProcessReviewLoanData(searchForm)" [disabled]="searchForm.invalid" class="btn btn-success pull-right">Search</button>
                        <button i18n type="button" (click)="displaySearchForm=false"  style="margin-right:5px"class="btn btn-danger pull-right">Cancel</button>
                    </div>
                </div>
            </div>

        </form>

    </div>
</p-dialog>
  